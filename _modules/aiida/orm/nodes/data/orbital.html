

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.orm.nodes.data.orbital &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
        <script src="../../../../../_static/togglebutton.js"></script>
        <script src="../../../../../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../../aiida.html">aiida</a> &raquo;</li>
        
      <li>aiida.orm.nodes.data.orbital</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for aiida.orm.nodes.data.orbital</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">###########################################################################</span>
<span class="c1"># Copyright (c), The AiiDA team. All rights reserved.                     #</span>
<span class="c1"># This file is part of the AiiDA code.                                    #</span>
<span class="c1">#                                                                         #</span>
<span class="c1"># The code is hosted on GitHub at https://github.com/aiidateam/aiida-core #</span>
<span class="c1"># For further information on the license, see the LICENSE.txt file        #</span>
<span class="c1"># For further information please visit http://www.aiida.net               #</span>
<span class="c1">###########################################################################</span>

<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">from</span> <span class="nn">.data</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">.structure</span> <span class="kn">import</span> <span class="n">Site</span> <span class="k">as</span> <span class="n">site_class</span>
<span class="kn">from</span> <span class="nn">aiida.common.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">InputValidationError</span>
<span class="kn">from</span> <span class="nn">aiida.plugins</span> <span class="kn">import</span> <span class="n">OrbitalFactory</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;OrbitalData&#39;</span><span class="p">,)</span>


<div class="viewcode-block" id="OrbitalData"><a class="viewcode-back" href="../../../../../apidoc/aiida.orm.nodes.data.html#aiida.orm.OrbitalData">[docs]</a><span class="k">class</span> <span class="nc">OrbitalData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used for storing collections of orbitals, as well as</span>
<span class="sd">    providing methods for accessing them internally.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OrbitalData.clear_orbitals"><a class="viewcode-back" href="../../../../../apidoc/aiida.orm.nodes.data.html#aiida.orm.OrbitalData.clear_orbitals">[docs]</a>    <span class="k">def</span> <span class="nf">clear_orbitals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove all orbitals that were added to the class</span>
<span class="sd">        Cannot work if OrbitalData has been already stored</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s1">&#39;orbital_dicts&#39;</span><span class="p">,</span> <span class="p">[])</span></div>

<div class="viewcode-block" id="OrbitalData.get_orbitals"><a class="viewcode-back" href="../../../../../apidoc/aiida.orm.nodes.data.html#aiida.orm.OrbitalData.get_orbitals">[docs]</a>    <span class="k">def</span> <span class="nf">get_orbitals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all orbitals by default. If a site is provided, returns</span>
<span class="sd">        all orbitals cooresponding to the location of that site, additional</span>
<span class="sd">        arguments may be provided, which act as filters on the retrieved</span>
<span class="sd">        orbitals.</span>

<span class="sd">        :param site: if provided, returns all orbitals with position of site</span>
<span class="sd">        :kwargs: attributes than can filter the set of returned orbitals</span>
<span class="sd">        :return list_of_outputs: a list of orbitals</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">orbital_dicts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;orbital_dicts&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">orbital_dicts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s1">&#39;Orbitals must be set before being retrieved&#39;</span><span class="p">)</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">filter_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># prevents KeyError from occuring</span>
        <span class="n">orbital_dicts</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">orbital_dicts</span> <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="n">y</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">filter_dict</span><span class="p">])]</span>
        <span class="n">orbital_dicts</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">orbital_dicts</span> <span class="k">if</span>
                         <span class="nb">all</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">filter_dict</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">filter_dict</span><span class="p">])]</span>

        <span class="n">list_of_outputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">orbital_dict</span> <span class="ow">in</span> <span class="n">orbital_dicts</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">orbital_type</span> <span class="o">=</span> <span class="n">orbital_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;_orbital_type&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;No _orbital_type found in: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">orbital_dict</span><span class="p">))</span>

            <span class="n">OrbitalClass</span> <span class="o">=</span> <span class="n">OrbitalFactory</span><span class="p">(</span><span class="n">orbital_type</span><span class="p">)</span>
            <span class="n">orbital</span> <span class="o">=</span> <span class="n">OrbitalClass</span><span class="p">(</span><span class="o">**</span><span class="n">orbital_dict</span><span class="p">)</span>
            <span class="n">list_of_outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">orbital</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_of_outputs</span></div>

<div class="viewcode-block" id="OrbitalData.set_orbitals"><a class="viewcode-back" href="../../../../../apidoc/aiida.orm.nodes.data.html#aiida.orm.OrbitalData.set_orbitals">[docs]</a>    <span class="k">def</span> <span class="nf">set_orbitals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orbitals</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the orbitals into the database. Uses the orbital&#39;s inherent</span>
<span class="sd">        set_orbital_dict method to generate a orbital dict string.</span>

<span class="sd">        :param orbital: an orbital or list of orbitals to be set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">orbitals</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">orbitals</span> <span class="o">=</span> <span class="p">[</span><span class="n">orbitals</span><span class="p">]</span>
        <span class="n">orbital_dicts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">orbital</span> <span class="ow">in</span> <span class="n">orbitals</span><span class="p">:</span>
            <span class="n">orbital_dict</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">orbital</span><span class="o">.</span><span class="n">get_orbital_dict</span><span class="p">())</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_orbital_type</span> <span class="o">=</span> <span class="n">orbital_dict</span><span class="p">[</span><span class="s1">&#39;_orbital_type&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InputValidationError</span><span class="p">(</span><span class="s1">&#39;No _orbital_type found in: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">orbital_dict</span><span class="p">))</span>
            <span class="n">orbital_dicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">orbital_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s1">&#39;orbital_dicts&#39;</span><span class="p">,</span> <span class="n">orbital_dicts</span><span class="p">)</span></div></div>

<span class="c1">##########################################################################</span>
<span class="c1">#     Here are some ideas for potential future convenience methods</span>
<span class="c1">#########################################################################</span>
<span class="c1">#     def set_projection_on_site(self, orbital, site, tag=None):</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         Sets a orbital on a site</span>
<span class="c1">#         We prepare the description dictionary, using information `parsed`</span>
<span class="c1">#         from the site.</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         diffusivity = from_site_guess_diffusivity(site) # or 1.</span>
<span class="c1">#         position = site.position</span>
<span class="c1">#         description = {&#39;somedictionary of the above&#39;:&#39;&#39;}</span>
<span class="c1">#         self.set_projection(orbital=orbital, description=description)</span>

<span class="c1">#     def delete_projections_by_attribute(self, selection_attributes):</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         Deletes all projections whose internal attributes correspond to the</span>
<span class="c1">#         selection_attributes</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>
<span class="c1">#</span>
<span class="c1">#     def modify_projections(self, key_attributes_to_select_projections, attributes_to_be_modified):</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         Modifies the projections, as selected by the key_attributes.</span>
<span class="c1">#         Overwrites attributes inside these projections, to values stored</span>
<span class="c1">#         in attributes_to_be_modified</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#</span>
<span class="c1">#    def set_realhydrogenorbitals_from_structure(self, structure, pseudo_family=None):</span>
<span class="c1">#        raise NotImplementedError</span>

</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>