

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.orm.nodes.data.array package &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>aiida.orm.nodes.data.array package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/aiida.orm.nodes.data.array.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aiida.orm.nodes.data.array">
<span id="aiida-orm-nodes-data-array-package"></span><h1>aiida.orm.nodes.data.array package<a class="headerlink" href="#module-aiida.orm.nodes.data.array" title="Permalink to this headline">¶</a></h1>
<p>Module with <cite>Node</cite> sub classes for array based data structures.</p>
<dl class="class">
<dt id="aiida.orm.nodes.data.array.ArrayData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.</code><code class="sig-name descname">ArrayData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.data.Data" title="aiida.orm.nodes.data.data.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.data.Data</span></code></a></p>
<p>Store a set of arrays on disk (rather than on the database) in an efficient
way using numpy.save() (therefore, this class requires numpy to be
installed).</p>
<p>Each array is stored within the Node folder as a different .npy file.</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>Before storing, no caching is done: if you perform a
<a class="reference internal" href="#aiida.orm.nodes.data.array.ArrayData.get_array" title="aiida.orm.nodes.data.array.ArrayData.get_array"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_array()</span></code></a> call, the array will be re-read from disk.
If instead the ArrayData node has already been stored,
the array is cached in memory after the first read, and the cached array
is used thereafter.
If too much RAM memory is used, you can clear the
cache with the <a class="reference internal" href="#aiida.orm.nodes.data.array.ArrayData.clear_internal_cache" title="aiida.orm.nodes.data.array.ArrayData.clear_internal_cache"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear_internal_cache()</span></code></a> method.</p>
</dd>
</dl>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.array'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData._arraynames_from_files">
<code class="sig-name descname">_arraynames_from_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData._arraynames_from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._arraynames_from_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all arrays stored in the node, listing the files (and
not relying on the properties).</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData._arraynames_from_properties">
<code class="sig-name descname">_arraynames_from_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData._arraynames_from_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._arraynames_from_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all arrays stored in the node, listing the attributes
starting with the correct prefix.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData._cached_arrays">
<code class="sig-name descname">_cached_arrays</code><em class="property"> = None</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._cached_arrays" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.array.ArrayData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.ArrayData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData._validate">
<code class="sig-name descname">_validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData._validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData._validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the list of .npy files stored inside the node and the
list of properties match. Just a name check, no check on the size
since this would require to reload all arrays and this may take time
and memory.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ArrayData.array_prefix">
<code class="sig-name descname">array_prefix</code><em class="property"> = 'array|'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.array_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.clear_internal_cache">
<code class="sig-name descname">clear_internal_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.clear_internal_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.clear_internal_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the internal memory cache where the arrays are stored after being
read from disk (used in order to reduce at minimum the readings from
disk).
This function is useful if you want to keep the node in memory, but you
do not want to waste memory to cache the arrays in RAM.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.delete_array">
<code class="sig-name descname">delete_array</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.delete_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.delete_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an array from the node. Can only be called before storing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the array to delete from the node.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.get_array">
<code class="sig-name descname">get_array</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.get_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array stored in the node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the array to return.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.get_arraynames">
<code class="sig-name descname">get_arraynames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_arraynames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.get_arraynames" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all arrays stored in the node, listing the files (and
not relying on the properties).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from arraynames</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.get_iterarrays">
<code class="sig-name descname">get_iterarrays</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_iterarrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.get_iterarrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator that returns tuples (name, array) for each array stored in the node.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0: </span>Renamed from iterarrays</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.get_shape">
<code class="sig-name descname">get_shape</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.get_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the shape of an array (read from the value cached in the
properties for efficiency reasons).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the array.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize internal variables for the backend node</p>
<p>This needs to be called explicitly in each specific subclass implementation of the init.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ArrayData.set_array">
<code class="sig-name descname">set_array</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.set_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ArrayData.set_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a new numpy array inside the node. Possibly overwrite the array
if it already existed.</p>
<p>Internally, it stores a name.npy file in numpy format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the array.</p></li>
<li><p><strong>array</strong> – The numpy array to store.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.orm.nodes.data.array.BandsData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.</code><code class="sig-name descname">BandsData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.kpoints.KpointsData" title="aiida.orm.nodes.data.array.kpoints.KpointsData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.kpoints.KpointsData</span></code></a></p>
<p>Class to handle bands data</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.BandsData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.BandsData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.bands'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.BandsData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.BandsData._custom_export_format_replacements">
<code class="sig-name descname">_custom_export_format_replacements</code><em class="property"> = {'dat': 'dat_multicolumn', 'gnu': 'gnuplot', 'pdf': 'mpl_pdf', 'png': 'mpl_png', 'py': 'mpl_singlefile'}</em><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._custom_export_format_replacements" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._get_band_segments">
<code class="sig-name descname">_get_band_segments</code><span class="sig-paren">(</span><em class="sig-param">cartesian</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._get_band_segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._get_band_segments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._get_bandplot_data">
<code class="sig-name descname">_get_bandplot_data</code><span class="sig-paren">(</span><em class="sig-param">cartesian</em>, <em class="sig-param">prettify_format=None</em>, <em class="sig-param">join_symbol=None</em>, <em class="sig-param">get_segments=False</em>, <em class="sig-param">y_origin=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._get_bandplot_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._get_bandplot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get data to plot a band structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cartesian</strong> – if True, distances (for the x-axis) are computed in
cartesian coordinates, otherwise they are computed in reciprocal
coordinates. cartesian=True will fail if no cell has been set.</p></li>
<li><p><strong>prettify_format</strong> – by default, strings are not prettified. If you want
to prettify them, pass a valid prettify_format string (see valid options
in the docstring of :py:func:prettify_labels).</p></li>
<li><p><strong>join_symbols</strong> – by default, strings are not joined. If you pass a string,
this is used to join strings that are much closer than a given threshold.
The most typical string is the pipe symbol: <code class="docutils literal notranslate"><span class="pre">|</span></code>.</p></li>
<li><p><strong>get_segments</strong> – if True, also computes the band split into segments</p></li>
<li><p><strong>y_origin</strong> – if present, shift bands so to set the value specified at <code class="docutils literal notranslate"><span class="pre">y=0</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a plot_info dictiorary, whose keys are <code class="docutils literal notranslate"><span class="pre">x</span></code> (array of distances
for the x axis of the plot); <code class="docutils literal notranslate"><span class="pre">y</span></code> (array of bands), <code class="docutils literal notranslate"><span class="pre">labels</span></code> (list
of tuples in the format (float x value of the label, label string),
<code class="docutils literal notranslate"><span class="pre">band_type_idx</span></code> (array containing an index for each band: if there is only
one spin, then it’s an array of zeros, of length equal to the number of bands
at each point; if there are two spins, then it’s an array of zeros or ones
depending on the type of spin; the length is always equalt to the total
number of bands per kpoint).</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._get_mpl_body_template">
<em class="property">static </em><code class="sig-name descname">_get_mpl_body_template</code><span class="sig-paren">(</span><em class="sig-param">paths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._get_mpl_body_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._get_mpl_body_template" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>paths</strong> – paths of k-points</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.BandsData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.bands.BandsData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._matplotlib_get_dict">
<code class="sig-name descname">_matplotlib_get_dict</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">title=''</em>, <em class="sig-param">legend=None</em>, <em class="sig-param">legend2=None</em>, <em class="sig-param">y_max_lim=None</em>, <em class="sig-param">y_min_lim=None</em>, <em class="sig-param">y_origin=0.0</em>, <em class="sig-param">prettify_format=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._matplotlib_get_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._matplotlib_get_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the data to send to the python-matplotlib plotting script.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p></li>
<li><p><strong>plot_info</strong> – a dictionary</p></li>
<li><p><strong>setnumber_offset</strong> – an offset to be applied to all set numbers
(i.e. s0 is replaced by s[offset], s1 by s[offset+1], etc.)</p></li>
<li><p><strong>color_number</strong> – the color number for lines, symbols, error bars
and filling (should be less than the parameter max_num_agr_colors
defined below)</p></li>
<li><p><strong>title</strong> – the title</p></li>
<li><p><strong>legend</strong> – the legend (applied only to the first of the set)</p></li>
<li><p><strong>legend2</strong> – the legend for second-type spins
(applied only to the first of the set)</p></li>
<li><p><strong>y_max_lim</strong> – the maximum on the y axis (if None, put the
maximum of the bands)</p></li>
<li><p><strong>y_min_lim</strong> – the minimum on the y axis (if None, put the
minimum of the bands)</p></li>
<li><p><strong>y_origin</strong> – the new origin of the y axis -&gt; all bands are replaced
by bands-y_origin</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
<li><p><strong>kwargs</strong> – additional customization variables; only a subset is
accepted, see internal variable ‘valid_additional_keywords</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.BandsData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.bands.BandsData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_agr">
<code class="sig-name descname">_prepare_agr</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">setnumber_offset=0</em>, <em class="sig-param">color_number=1</em>, <em class="sig-param">color_number2=2</em>, <em class="sig-param">legend=''</em>, <em class="sig-param">title=''</em>, <em class="sig-param">y_max_lim=None</em>, <em class="sig-param">y_min_lim=None</em>, <em class="sig-param">y_origin=0.0</em>, <em class="sig-param">prettify_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_agr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_agr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare an xmgrace agr file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comments</strong> – if True, print comments
(if it makes sense for the given format)</p></li>
<li><p><strong>plot_info</strong> – a dictionary</p></li>
<li><p><strong>setnumber_offset</strong> – an offset to be applied to all set numbers
(i.e. s0 is replaced by s[offset], s1 by s[offset+1], etc.)</p></li>
<li><p><strong>color_number</strong> – the color number for lines, symbols, error bars
and filling (should be less than the parameter max_num_agr_colors
defined below)</p></li>
<li><p><strong>color_number2</strong> – the color number for lines, symbols, error bars
and filling for the second-type spins (should be less than the
parameter max_num_agr_colors defined below)</p></li>
<li><p><strong>legend</strong> – the legend (applied only to the first set)</p></li>
<li><p><strong>title</strong> – the title</p></li>
<li><p><strong>y_max_lim</strong> – the maximum on the y axis (if None, put the
maximum of the bands); applied <em>after</em> shifting the origin
by <code class="docutils literal notranslate"><span class="pre">y_origin</span></code></p></li>
<li><p><strong>y_min_lim</strong> – the minimum on the y axis (if None, put the
minimum of the bands); applied <em>after</em> shifting the origin
by <code class="docutils literal notranslate"><span class="pre">y_origin</span></code></p></li>
<li><p><strong>y_origin</strong> – the new origin of the y axis -&gt; all bands are replaced
by bands-y_origin</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_agr_batch">
<code class="sig-name descname">_prepare_agr_batch</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">prettify_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_agr_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_agr_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare two files, data and batch, to be plot with xmgrace as:
xmgrace -batch file.dat</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>main_file_name</strong> – if the user asks to write the main content on a
file, this contains the filename. This should be used to infer a
good filename for the additional files.
In this case, we remove the extension, and add ‘_data.dat’</p></li>
<li><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_dat_blocks">
<code class="sig-name descname">_prepare_dat_blocks</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_dat_blocks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_dat_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Format suitable for gnuplot using blocks.
Columns with x and y (path and band energy). Several blocks, separated
by two empty lines, one per energy band.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_dat_multicolumn">
<code class="sig-name descname">_prepare_dat_multicolumn</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_dat_multicolumn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_dat_multicolumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an N x M matrix. First column is the distance between kpoints,
The other columns are the bands. Header contains number of kpoints and
the number of bands (commented).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_gnuplot">
<code class="sig-name descname">_prepare_gnuplot</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=None</em>, <em class="sig-param">title=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">prettify_format=None</em>, <em class="sig-param">y_max_lim=None</em>, <em class="sig-param">y_min_lim=None</em>, <em class="sig-param">y_origin=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_gnuplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_gnuplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare an gnuplot script to plot the bands, with the .dat file
returned as an independent file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>main_file_name</strong> – if the user asks to write the main content on a
file, this contains the filename. This should be used to infer a
good filename for the additional files.
In this case, we remove the extension, and add ‘_data.dat’</p></li>
<li><p><strong>title</strong> – if specified, add a title to the plot</p></li>
<li><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_json">
<code class="sig-name descname">_prepare_json</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a json file in a format compatible with the AiiDA band visualizer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_mpl_pdf">
<code class="sig-name descname">_prepare_mpl_pdf</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_pdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_mpl_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands, with the JSON
returned as an independent file.</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_mpl_png">
<code class="sig-name descname">_prepare_mpl_png</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_png"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_mpl_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands, with the JSON
returned as an independent file.</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_mpl_singlefile">
<code class="sig-name descname">_prepare_mpl_singlefile</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_singlefile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_mpl_singlefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._prepare_mpl_withjson">
<code class="sig-name descname">_prepare_mpl_withjson</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_withjson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._prepare_mpl_withjson" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands, with the JSON
returned as an independent file.</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.BandsData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.bands.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._set_pbc">
<code class="sig-name descname">_set_pbc</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._set_pbc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._set_pbc" title="Permalink to this definition">¶</a></dt>
<dd><p>validate the pbc, then store them</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData._validate_bands_occupations">
<code class="sig-name descname">_validate_bands_occupations</code><span class="sig-paren">(</span><em class="sig-param">bands</em>, <em class="sig-param">occupations=None</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._validate_bands_occupations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData._validate_bands_occupations" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the list of bands and of occupations before storage.
Kpoints must be set in advance.
Bands and occupations must be convertible into arrays of
Nkpoints x Nbands floats or Nspins x Nkpoints x Nbands; Nkpoints must
correspond to the number of kpoints.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData.array_labels">
<em class="property">property </em><code class="sig-name descname">array_labels</code><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.array_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the labels associated with the band arrays</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData.get_bands">
<code class="sig-name descname">get_bands</code><span class="sig-paren">(</span><em class="sig-param">also_occupations=False</em>, <em class="sig-param">also_labels=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.get_bands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.get_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array (nkpoints x num_bands or nspins x nkpoints x num_bands)
of energies.
:param also_occupations: if True, returns also the occupations array.
Default = False</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData.set_bands">
<code class="sig-name descname">set_bands</code><span class="sig-paren">(</span><em class="sig-param">bands</em>, <em class="sig-param">units=None</em>, <em class="sig-param">occupations=None</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.set_bands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.set_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an array of band energies of dimension (nkpoints x nbands).
Kpoints must be set in advance. Can contain floats or None.
:param bands: a list of nkpoints lists of nbands bands, or a 2D array
of shape (nkpoints x nbands), with band energies for each kpoint
:param units: optional, energy units
:param occupations: optional, a 2D list or array of floats of same
shape as bands, with the occupation associated to each band</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData.set_kpointsdata">
<code class="sig-name descname">set_kpointsdata</code><span class="sig-paren">(</span><em class="sig-param">kpointsdata</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.set_kpointsdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.set_kpointsdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the kpoints from a kpoint object.
:param kpointsdata: an instance of KpointsData class</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData.show_mpl">
<code class="sig-name descname">show_mpl</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.show_mpl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.show_mpl" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a show() command for the band structure using matplotlib.
This uses internally the ‘mpl_singlefile’ format, with empty
main_file_name.</p>
<p>Other kwargs are passed to self._exportcontent.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.BandsData.units">
<em class="property">property </em><code class="sig-name descname">units</code><a class="headerlink" href="#aiida.orm.nodes.data.array.BandsData.units" title="Permalink to this definition">¶</a></dt>
<dd><p>Units in which the data in bands were stored. A string</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.orm.nodes.data.array.KpointsData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.</code><code class="sig-name descname">KpointsData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>Class to handle array of kpoints in the Brillouin zone. Provide methods to
generate either user-defined k-points or path of k-points along symmetry
lines.
Internally, all k-points are defined in terms of crystal (fractional)
coordinates.
Cell and lattice vector coordinates are in Angstroms, reciprocal lattice
vectors in Angstrom^-1 .
:note: The methods setting and using the Bravais lattice info assume the
PRIMITIVE unit cell is provided in input to the set_cell or
set_cell_from_structure methods.</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.KpointsData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.KpointsData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.kpoints'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.KpointsData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData._change_reference">
<code class="sig-name descname">_change_reference</code><span class="sig-paren">(</span><em class="sig-param">kpoints</em>, <em class="sig-param">to_cartesian=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._change_reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._change_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Change reference system, from cartesian to crystal coordinates (units of b1,b2,b3) or viceversa.
:param kpoints: a list of (3) point coordinates
:return kpoints: a list of (3) point coordinates in the new reference</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData._dimension">
<em class="property">property </em><code class="sig-name descname">_dimension</code><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._dimension" title="Permalink to this definition">¶</a></dt>
<dd><p>Dimensionality of the structure, found from its pbc (i.e. 1 if it’s a 1D
structure, 2 if its 2D, 3 if it’s 3D …).
:return dimensionality: 0, 1, 2 or 3
:note: will return 3 if pbc has not been set beforehand</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.KpointsData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.kpoints.KpointsData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.KpointsData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.kpoints.KpointsData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.KpointsData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.kpoints.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData._set_cell">
<code class="sig-name descname">_set_cell</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._set_cell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._set_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate if ‘value’ is a allowed crystal unit cell
:param value: something compatible with a 3x3 tuple of floats</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData._set_labels">
<code class="sig-name descname">_set_labels</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._set_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._set_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>set label names. Must pass in input a list like: <code class="docutils literal notranslate"><span class="pre">[[0,'X'],[34,'L'],...</span> <span class="pre">]</span></code></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData._set_pbc">
<code class="sig-name descname">_set_pbc</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._set_pbc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._set_pbc" title="Permalink to this definition">¶</a></dt>
<dd><p>validate the pbc, then store them</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData._validate_kpoints_weights">
<code class="sig-name descname">_validate_kpoints_weights</code><span class="sig-paren">(</span><em class="sig-param">kpoints</em>, <em class="sig-param">weights</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._validate_kpoints_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData._validate_kpoints_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the list of kpoints and of weights before storage.
Kpoints and weights must be convertible respectively to an array of
N x dimension and N floats</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.cell">
<em class="property">property </em><code class="sig-name descname">cell</code><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.cell" title="Permalink to this definition">¶</a></dt>
<dd><p>The crystal unit cell. Rows are the crystal vectors in Angstroms.
:return: a 3x3 numpy.array</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.get_description">
<code class="sig-name descname">get_description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.get_description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.get_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string with infos retrieved from  kpoints node’s properties.
:param node:
:return: retstr</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.get_kpoints">
<code class="sig-name descname">get_kpoints</code><span class="sig-paren">(</span><em class="sig-param">also_weights=False</em>, <em class="sig-param">cartesian=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.get_kpoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.get_kpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of kpoints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>also_weights</strong> – if True, returns also the list of weights.
Default = False</p></li>
<li><p><strong>cartesian</strong> – if True, returns points in cartesian coordinates,
otherwise, returns in crystal coordinates. Default = False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.get_kpoints_mesh">
<code class="sig-name descname">get_kpoints_mesh</code><span class="sig-paren">(</span><em class="sig-param">print_list=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.get_kpoints_mesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.get_kpoints_mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mesh of kpoints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>print_list</strong> – default=False. If True, prints the mesh of kpoints as a list</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.8)"><strong>AttributeError</strong></a> – if no mesh has been set</p>
</dd>
<dt class="field-odd">Return mesh,offset</dt>
<dd class="field-odd"><p>(if print_list=False) a list of 3 integers and a list of three
floats 0&lt;x&lt;1, representing the mesh and the offset of kpoints</p>
</dd>
<dt class="field-even">Return kpoints</dt>
<dd class="field-even"><p>(if print_list = True) an explicit list of kpoints coordinates,
similar to what returned by get_kpoints()</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.labels">
<em class="property">property </em><code class="sig-name descname">labels</code><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Labels associated with the list of kpoints.
List of tuples with kpoint index and kpoint name: <code class="docutils literal notranslate"><span class="pre">[(0,'G'),(13,'M'),...]</span></code></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.pbc">
<em class="property">property </em><code class="sig-name descname">pbc</code><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.pbc" title="Permalink to this definition">¶</a></dt>
<dd><p>The periodic boundary conditions along the vectors a1,a2,a3.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple of three booleans, each one tells if there are periodic
boundary conditions for the i-th real-space direction (i=1,2,3)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.reciprocal_cell">
<em class="property">property </em><code class="sig-name descname">reciprocal_cell</code><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.reciprocal_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute reciprocal cell from the internally set cell.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>reciprocal cell in units of 1/Angstrom with cell vectors stored as rows.
Use e.g. reciprocal_cell[0] to access the first reciprocal cell vector.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.set_cell">
<code class="sig-name descname">set_cell</code><span class="sig-paren">(</span><em class="sig-param">cell</em>, <em class="sig-param">pbc=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_cell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.set_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cell to be used for symmetry analysis.
To set a cell from an AiiDA structure, use “set_cell_from_structure”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cell</strong> – 3x3 matrix of cell vectors. Orientation: each row
represent a lattice vector. Units are Angstroms.</p></li>
<li><p><strong>pbc</strong> – list of 3 booleans, True if in the nth crystal direction the
structure is periodic. Default = [True,True,True]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.set_cell_from_structure">
<code class="sig-name descname">set_cell_from_structure</code><span class="sig-paren">(</span><em class="sig-param">structuredata</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_cell_from_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.set_cell_from_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cell to be used for symmetry analysis from an AiiDA structure.
Inherits both the cell and the pbc’s.
To set manually a cell, use “set_cell”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>structuredata</strong> – an instance of StructureData</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.set_kpoints">
<code class="sig-name descname">set_kpoints</code><span class="sig-paren">(</span><em class="sig-param">kpoints</em>, <em class="sig-param">cartesian=False</em>, <em class="sig-param">labels=None</em>, <em class="sig-param">weights=None</em>, <em class="sig-param">fill_values=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_kpoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.set_kpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the list of kpoints. If a mesh has already been stored, raise a
ModificationNotAllowed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kpoints</strong> – <p>a list of kpoints, each kpoint being a list of one, two
or three coordinates, depending on self.pbc: if structure is 1D
(only one True in self.pbc) one allows singletons or scalars for
each k-point, if it’s 2D it can be a length-2 list, and in all
cases it can be a length-3 list.
Examples:</p>
<blockquote>
<div><ul>
<li><p>[[0.,0.,0.],[0.1,0.1,0.1],…] for 1D, 2D or 3D</p></li>
<li><p>[[0.,0.],[0.1,0.1,],…] for 1D or 2D</p></li>
<li><p>[[0.],[0.1],…] for 1D</p></li>
<li><p>[0., 0.1, …] for 1D (list of scalars)</p></li>
</ul>
</div></blockquote>
<p>For 0D (all pbc are False), the list can be any of the above
or empty - then only Gamma point is set.
The value of k for the non-periodic dimension(s) is set by
fill_values</p>
</p></li>
<li><p><strong>cartesian</strong> – if True, the coordinates given in input are treated
as in cartesian units. If False, the coordinates are crystal,
i.e. in units of b1,b2,b3. Default = False</p></li>
<li><p><strong>labels</strong> – optional, the list of labels to be set for some of the
kpoints. See labels for more info</p></li>
<li><p><strong>weights</strong> – optional, a list of floats with the weight associated
to the kpoint list</p></li>
<li><p><strong>fill_values</strong> – scalar to be set to all
non-periodic dimensions (indicated by False in self.pbc), or list of
values for each of the non-periodic dimensions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.set_kpoints_mesh">
<code class="sig-name descname">set_kpoints_mesh</code><span class="sig-paren">(</span><em class="sig-param">mesh</em>, <em class="sig-param">offset=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_kpoints_mesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.set_kpoints_mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set KpointsData to represent a uniformily spaced mesh of kpoints in the
Brillouin zone. This excludes the possibility of set/get kpoints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mesh</strong> – a list of three integers, representing the size of the
kpoint mesh along b1,b2,b3.</p></li>
<li><p><strong>offset</strong> – (optional) a list of three floats between 0 and 1.
[0.,0.,0.] is Gamma centered mesh
[0.5,0.5,0.5] is half shifted
[1.,1.,1.] by periodicity should be equivalent to [0.,0.,0.]
Default = [0.,0.,0.].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.KpointsData.set_kpoints_mesh_from_density">
<code class="sig-name descname">set_kpoints_mesh_from_density</code><span class="sig-paren">(</span><em class="sig-param">distance</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">force_parity=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_kpoints_mesh_from_density"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.KpointsData.set_kpoints_mesh_from_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a kpoints mesh using a kpoints density, expressed as the maximum
distance between adjacent points along a reciprocal axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distance</strong> – distance (in 1/Angstrom) between adjacent
kpoints, i.e. the number of kpoints along each reciprocal
axis i is <img class="math" src="../_images/math/073705362f01ab3a6c5124c090d07635d17b7d14.png" alt="|b_i|/distance"/>
where <img class="math" src="../_images/math/88b5f9d85a03915f622e5072c9f5b2baf1f25cf8.png" alt="|b_i|"/> is the norm of the reciprocal cell vector.</p></li>
<li><p><strong>offset</strong> – (optional) a list of three floats between 0 and 1.
[0.,0.,0.] is Gamma centered mesh
[0.5,0.5,0.5] is half shifted
Default = [0.,0.,0.].</p></li>
<li><p><strong>force_parity</strong> – (optional) if True, force each integer in the mesh
to be even (except for the non-periodic directions).</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>a cell should be defined first.</p>
</dd>
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>the number of kpoints along non-periodic axes is always 1.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.orm.nodes.data.array.ProjectionData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.</code><code class="sig-name descname">ProjectionData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.orbital.OrbitalData" title="aiida.orm.nodes.data.orbital.OrbitalData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.orbital.OrbitalData</span></code></a>, <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>A class to handle arrays of projected wavefunction data. That is projections
of a orbitals, usually an atomic-hydrogen orbital, onto a
given bloch wavefunction, the bloch wavefunction being indexed by
s, n, and k. E.g. the elements are the projections described as
&lt; orbital | Bloch wavefunction (s,n,k) &gt;</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ProjectionData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ProjectionData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.projection'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ProjectionData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData._check_projections_bands">
<code class="sig-name descname">_check_projections_bands</code><span class="sig-paren">(</span><em class="sig-param">projection_array</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData._check_projections_bands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData._check_projections_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to make sure that a reference bandsdata is already set, and that
projection_array is of the same shape of the bands data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>projwfc_arrays</strong> – nk x nb x nwfc array, to be
checked against bands</p>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p>AttributeError if energy is not already set</p>
</dd>
<dt class="field-odd">Raise</dt>
<dd class="field-odd"><p>AttributeError if input_array is not of same shape as
dos_energy</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData._find_orbitals_and_indices">
<code class="sig-name descname">_find_orbitals_and_indices</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData._find_orbitals_and_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData._find_orbitals_and_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all the orbitals and their indicies associated with kwargs
essential for retrieving the other indexed array parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – kwargs that can call orbitals as in get_orbitals()</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>retrieve_indexes, list of indicicies of orbitals corresponding
to the kwargs</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>all_orbitals, list of orbitals to which the indexes correspond</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData._from_index_to_arrayname">
<code class="sig-name descname">_from_index_to_arrayname</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData._from_index_to_arrayname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData._from_index_to_arrayname" title="Permalink to this definition">¶</a></dt>
<dd><p>Used internally to determine the array names.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ProjectionData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.projection.ProjectionData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ProjectionData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.projection.ProjectionData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.ProjectionData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.projection.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData.get_pdos">
<code class="sig-name descname">get_pdos</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.get_pdos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.get_pdos" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves all the pdos arrays corresponding to the input kwargs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – inputs describing the orbitals associated with the pdos
arrays</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of tuples containing the orbital, energy array and pdos
array associated with all orbitals that correspond to kwargs</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData.get_projections">
<code class="sig-name descname">get_projections</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.get_projections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.get_projections" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves all the pdos arrays corresponding to the input kwargs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – inputs describing the orbitals associated with the pdos
arrays</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of tuples containing the orbital, and projection arrays
associated with all orbitals that correspond to kwargs</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData.get_reference_bandsdata">
<code class="sig-name descname">get_reference_bandsdata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.get_reference_bandsdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.get_reference_bandsdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the reference BandsData, using the set uuid via
set_reference_bandsdata</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a BandsData instance</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.8)"><strong>AttributeError</strong></a> – if the bandsdata has not been set yet</p></li>
<li><p><a class="reference internal" href="aiida.common.html#aiida.common.exceptions.NotExistent" title="aiida.common.exceptions.NotExistent"><strong>exceptions.NotExistent</strong></a> – if the bandsdata uuid did not retrieve bandsdata</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData.set_orbitals">
<code class="sig-name descname">set_orbitals</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.set_orbitals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.set_orbitals" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is inherited from OrbitalData, but is blocked here.
If used will raise a NotImplementedError</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData.set_projectiondata">
<code class="sig-name descname">set_projectiondata</code><span class="sig-paren">(</span><em class="sig-param">list_of_orbitals</em>, <em class="sig-param">list_of_projections=None</em>, <em class="sig-param">list_of_energy=None</em>, <em class="sig-param">list_of_pdos=None</em>, <em class="sig-param">tags=None</em>, <em class="sig-param">bands_check=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.set_projectiondata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.set_projectiondata" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the projwfc_array using the projwfc_label, after validating both.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_orbitals</strong> – list of orbitals, of class orbital data.
They should be the ones up on which the
projection array corresponds with.</p></li>
<li><p><strong>list_of_projections</strong> – list of arrays of projections of a atomic
wavefunctions onto bloch wavefunctions. Since the
projection is for every bloch wavefunction which
can be specified by its spin (if used), band, and
kpoint the dimensions must be
nspin x nbands x nkpoints for the projwfc array.
Or nbands x nkpoints if spin is not used.</p></li>
<li><p><strong>energy_axis</strong> – list of energy axis for the list_of_pdos</p></li>
<li><p><strong>list_of_pdos</strong> – a list of projected density of states for the
atomic wavefunctions, units in states/eV</p></li>
<li><p><strong>tags</strong> – A list of tags, not supported currently.</p></li>
<li><p><strong>bands_check</strong> – if false, skips checks of whether the bands has
been already set, and whether the sizes match. For
use in parsers, where the BandsData has not yet
been stored and therefore get_reference_bandsdata
cannot be called</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.ProjectionData.set_reference_bandsdata">
<code class="sig-name descname">set_reference_bandsdata</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.set_reference_bandsdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.ProjectionData.set_reference_bandsdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a reference bandsdata, creates a uuid link between this data
object and a bandsdata object, must be set before any projection arrays</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – a BandsData instance, a uuid or a pk</p>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p>exceptions.NotExistent if there was no BandsData associated with uuid or pk</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.orm.nodes.data.array.TrajectoryData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.</code><code class="sig-name descname">TrajectoryData</code><span class="sig-paren">(</span><em class="sig-param">structurelist=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>Stores a trajectory (a sequence of crystal structures with timestamps, and
possibly with velocities).</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">structurelist=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>backend_entity</strong> (<a class="reference internal" href="aiida.orm.implementation.html#aiida.orm.implementation.BackendEntity" title="aiida.orm.implementation.BackendEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.implementation.BackendEntity</span></code></a>) – the backend model supporting this entity</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.trajectory'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._internal_validate">
<code class="sig-name descname">_internal_validate</code><span class="sig-paren">(</span><em class="sig-param">stepids</em>, <em class="sig-param">cells</em>, <em class="sig-param">symbols</em>, <em class="sig-param">positions</em>, <em class="sig-param">times</em>, <em class="sig-param">velocities</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._internal_validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._internal_validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal function to validate the type and shape of the arrays. See
the documentation of py:meth:<cite>.set_trajectory</cite> for a description of the
valid shape and type of the parameters.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.trajectory.TrajectoryData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._parse_xyz_pos">
<code class="sig-name descname">_parse_xyz_pos</code><span class="sig-paren">(</span><em class="sig-param">inputstring</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._parse_xyz_pos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._parse_xyz_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>Load positions from a XYZ file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The steps and symbols must be set manually before calling this
import function as a consistency measure. Even though the symbols
and steps could be extracted from the XYZ file, the data present in
the XYZ file may or may not be correct and the same logic would have
to be present in the XYZ-velocities function. It was therefore
decided not to implement it at all but require it to be set
explicitly.</p>
</div>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.orm.nodes.data.array.trajectory</span> <span class="kn">import</span> <span class="n">TrajectoryData</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">TrajectoryData</span><span class="p">()</span>
<span class="c1"># get sites and number of timesteps</span>
<span class="n">t</span><span class="o">.</span><span class="n">set_array</span><span class="p">(</span><span class="s1">&#39;steps&#39;</span><span class="p">,</span> <span class="n">arange</span><span class="p">(</span><span class="n">ntimesteps</span><span class="p">))</span>
<span class="n">t</span><span class="o">.</span><span class="n">set_array</span><span class="p">(</span><span class="s1">&#39;symbols&#39;</span><span class="p">,</span> <span class="n">array</span><span class="p">([</span><span class="n">site</span><span class="o">.</span><span class="n">kind</span> <span class="k">for</span> <span class="n">site</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">sites</span><span class="p">]))</span>
<span class="n">t</span><span class="o">.</span><span class="n">importfile</span><span class="p">(</span><span class="s1">&#39;some-calc/AIIDA-PROJECT-pos-1.xyz&#39;</span><span class="p">,</span> <span class="s1">&#39;xyz_pos&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._parse_xyz_vel">
<code class="sig-name descname">_parse_xyz_vel</code><span class="sig-paren">(</span><em class="sig-param">inputstring</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._parse_xyz_vel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._parse_xyz_vel" title="Permalink to this definition">¶</a></dt>
<dd><p>Load velocities from a XYZ file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The steps and symbols must be set manually before calling this
import function as a consistency measure. See also comment for
<a class="reference internal" href="#aiida.orm.nodes.data.array.TrajectoryData._parse_xyz_pos" title="aiida.orm.nodes.data.array.TrajectoryData._parse_xyz_pos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_parse_xyz_pos()</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.trajectory.TrajectoryData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._prepare_cif">
<code class="sig-name descname">_prepare_cif</code><span class="sig-paren">(</span><em class="sig-param">trajectory_index=None</em>, <em class="sig-param">main_file_name=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._prepare_cif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._prepare_cif" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the given trajectory to a string of format CIF.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._prepare_xsf">
<code class="sig-name descname">_prepare_xsf</code><span class="sig-paren">(</span><em class="sig-param">index=None</em>, <em class="sig-param">main_file_name=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._prepare_xsf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._prepare_xsf" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the given trajectory to a string of format XSF (for XCrySDen).</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.trajectory.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData._validate">
<code class="sig-name descname">_validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData._validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the required arrays are present and that their type and
dimension are correct.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_cells">
<code class="sig-name descname">get_cells</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_cells"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of cells, if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_cif">
<code class="sig-name descname">get_cif</code><span class="sig-paren">(</span><em class="sig-param">index=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_cif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_cif" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.cif.CifData" title="aiida.orm.nodes.data.cif.CifData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.cif.CifData</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0: </span>Renamed from _get_cif</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_index_from_stepid">
<code class="sig-name descname">get_index_from_stepid</code><span class="sig-paren">(</span><em class="sig-param">stepid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_index_from_stepid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_index_from_stepid" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value for the stepid (i.e., a value among those of the <code class="docutils literal notranslate"><span class="pre">steps</span></code>
array), return the array index of that stepid, that can be used in other
methods such as <a class="reference internal" href="#aiida.orm.nodes.data.array.TrajectoryData.get_step_data" title="aiida.orm.nodes.data.array.TrajectoryData.get_step_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_step_data()</span></code></a> or
<a class="reference internal" href="#aiida.orm.nodes.data.array.TrajectoryData.get_step_structure" title="aiida.orm.nodes.data.array.TrajectoryData.get_step_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_step_structure()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from get_step_index</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this function returns the first index found
(i.e. if multiple steps are present with the same value,
only the index of the first one is returned).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if no step with the given value is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_positions">
<code class="sig-name descname">get_positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of positions, if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_step_data">
<code class="sig-name descname">get_step_data</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_step_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_step_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple with all information concerning
the stepid with given index (0 is the first step, 1 the second step
and so on). If you know only the step value, use the
<a class="reference internal" href="#aiida.orm.nodes.data.array.TrajectoryData.get_index_from_stepid" title="aiida.orm.nodes.data.array.TrajectoryData.get_index_from_stepid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_index_from_stepid()</span></code></a>  method to get the
corresponding index.</p>
<p>If no velocities were specified, None is returned as the last element.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple in the format
<code class="docutils literal notranslate"><span class="pre">(stepid,</span> <span class="pre">time,</span> <span class="pre">cell,</span> <span class="pre">symbols,</span> <span class="pre">positions,</span> <span class="pre">velocities)</span></code>,
where <code class="docutils literal notranslate"><span class="pre">stepid</span></code> is an integer, <code class="docutils literal notranslate"><span class="pre">time</span></code> is a float, <code class="docutils literal notranslate"><span class="pre">cell</span></code> is a
<img class="math" src="../_images/math/679c5d9dbdc2f5079c0c554856efdae3d27b5d80.png" alt="3 \times 3"/> matrix, <code class="docutils literal notranslate"><span class="pre">symbols</span></code> is an array of length <code class="docutils literal notranslate"><span class="pre">n</span></code>,
positions is a <img class="math" src="../_images/math/b9caefcfbaa80eeafb7a625d3d5eb9fce06fc487.png" alt="n \times 3"/> array, and velocities is either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or a <img class="math" src="../_images/math/b9caefcfbaa80eeafb7a625d3d5eb9fce06fc487.png" alt="n \times 3"/> array</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>index</strong> – The index of the step that you want to retrieve, from
0 to <code class="docutils literal notranslate"><span class="pre">self.numsteps</span> <span class="pre">-</span> <span class="pre">1</span></code>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IndexError" title="(in Python v3.8)"><strong>IndexError</strong></a> – if you require an index beyond the limits.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if you did not store the trajectory yet.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_step_structure">
<code class="sig-name descname">get_step_structure</code><span class="sig-paren">(</span><em class="sig-param">index</em>, <em class="sig-param">custom_kinds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_step_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_step_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an AiiDA <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> node
(not stored yet!) with the coordinates of the given step, identified by
its index. If you know only the step value, use the
<a class="reference internal" href="#aiida.orm.nodes.data.array.TrajectoryData.get_index_from_stepid" title="aiida.orm.nodes.data.array.TrajectoryData.get_index_from_stepid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_index_from_stepid()</span></code></a> method to get the corresponding index.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The periodic boundary conditions are always set to True.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from step_to_structure</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> – The index of the step that you want to retrieve, from
0 to <code class="docutils literal notranslate"><span class="pre">self.numsteps-</span> <span class="pre">1</span></code>.</p></li>
<li><p><strong>custom_kinds</strong> – (Optional) If passed must be a list of
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.Kind" title="aiida.orm.nodes.data.structure.Kind"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.Kind</span></code></a> objects. There must be one
kind object for each different string in the <code class="docutils literal notranslate"><span class="pre">symbols</span></code> array, with
<code class="docutils literal notranslate"><span class="pre">kind.name</span></code> set to this string.
If this parameter is omitted, the automatic kind generation of AiiDA
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> nodes is used,
meaning that the strings in the <code class="docutils literal notranslate"><span class="pre">symbols</span></code> array must be valid
chemical symbols.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_stepids">
<code class="sig-name descname">get_stepids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_stepids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_stepids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of steps, if it has already been set.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from get_steps</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_structure">
<code class="sig-name descname">get_structure</code><span class="sig-paren">(</span><em class="sig-param">store=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0: </span>Renamed from _get_aiida_structure</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>converter</strong> – specify the converter. Default ‘ase’.</p></li>
<li><p><strong>store</strong> – If True, intermediate calculation gets stored in the
AiiDA database for record. Default False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> node.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_times">
<code class="sig-name descname">get_times</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of times (in ps), if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.get_velocities">
<code class="sig-name descname">get_velocities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_velocities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.get_velocities" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of velocities, if it has already been set.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function (differently from all other <code class="docutils literal notranslate"><span class="pre">get_*</span></code>
functions, will not raise an exception if the velocities are not
set, but rather return <code class="docutils literal notranslate"><span class="pre">None</span></code> (both if no trajectory was not set yet,
and if it the trajectory was set but no velocities were specified).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.numsites">
<em class="property">property </em><code class="sig-name descname">numsites</code><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.numsites" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of stored sites, or zero if nothing has been stored yet.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.numsteps">
<em class="property">property </em><code class="sig-name descname">numsteps</code><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.numsteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of stored steps, or zero if nothing has been stored yet.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.set_structurelist">
<code class="sig-name descname">set_structurelist</code><span class="sig-paren">(</span><em class="sig-param">structurelist</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.set_structurelist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.set_structurelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Create trajectory from the list of
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>structurelist</strong> – a list of
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if symbol lists of supplied structures are
different</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.set_trajectory">
<code class="sig-name descname">set_trajectory</code><span class="sig-paren">(</span><em class="sig-param">symbols</em>, <em class="sig-param">positions</em>, <em class="sig-param">stepids=None</em>, <em class="sig-param">cells=None</em>, <em class="sig-param">times=None</em>, <em class="sig-param">velocities=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.set_trajectory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.set_trajectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the whole trajectory, after checking that types and dimensions
are correct.</p>
<p>Parameters <code class="docutils literal notranslate"><span class="pre">stepids</span></code>, <code class="docutils literal notranslate"><span class="pre">cells</span></code> and <code class="docutils literal notranslate"><span class="pre">velocities</span></code> are optional
variables. If nothing is passed for <code class="docutils literal notranslate"><span class="pre">cells</span></code> or <code class="docutils literal notranslate"><span class="pre">velocities</span></code>
nothing will be stored. However, if no input is given for <code class="docutils literal notranslate"><span class="pre">stepids</span></code>
a consecutive sequence [0,1,2,…,len(positions)-1] will be assumed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbols</strong> – string list with dimension <code class="docutils literal notranslate"><span class="pre">n</span></code>, where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the
number of atoms (i.e., sites) in the structure.
The same list is used for each step. Normally, the string
should be a valid chemical symbol, but actually any unique
string works and can be used as the name of the atomic kind
(see also the <a class="reference internal" href="#aiida.orm.nodes.data.array.TrajectoryData.get_step_structure" title="aiida.orm.nodes.data.array.TrajectoryData.get_step_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_step_structure()</span></code></a> method).</p></li>
<li><p><strong>positions</strong> – float array with dimension <img class="math" src="../_images/math/7dd7f53f442f3a3b0bb3e0725c666d1d8e020897.png" alt="s \times n \times 3"/>,
where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the
length of the <code class="docutils literal notranslate"><span class="pre">stepids</span></code> array and <code class="docutils literal notranslate"><span class="pre">n</span></code> is the length
of the <code class="docutils literal notranslate"><span class="pre">symbols</span></code> array. Units are angstrom.
In particular,
<code class="docutils literal notranslate"><span class="pre">positions[i,j,k]</span></code> is the <code class="docutils literal notranslate"><span class="pre">k</span></code>-th component of the
<code class="docutils literal notranslate"><span class="pre">j</span></code>-th atom (or site) in the structure at the time step
with index <code class="docutils literal notranslate"><span class="pre">i</span></code> (identified
by step number <code class="docutils literal notranslate"><span class="pre">step[i]</span></code> and with timestamp <code class="docutils literal notranslate"><span class="pre">times[i]</span></code>).</p></li>
<li><p><strong>stepids</strong> – integer array with dimension <code class="docutils literal notranslate"><span class="pre">s</span></code>, where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the
number of steps. Typically represents an internal counter
within the code. For instance, if you want to store a
trajectory with one step every 10, starting from step 65,
the array will be <code class="docutils literal notranslate"><span class="pre">[65,75,85,...]</span></code>.
No checks are done on duplicate elements
or on the ordering, but anyway this array should be
sorted in ascending order, without duplicate elements.
(If not specified, stepids will be set to <code class="docutils literal notranslate"><span class="pre">numpy.arange(s)</span></code>
by default) It is internally stored as an array named ‘steps’.</p></li>
<li><p><strong>cells</strong> – if specified float array with dimension
<img class="math" src="../_images/math/521d5f645dbd52b09727bacf679fe42cfc7e6ca1.png" alt="s \times 3 \times 3"/>, where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the
length of the <code class="docutils literal notranslate"><span class="pre">stepids</span></code> array. Units are angstrom.
In particular, <code class="docutils literal notranslate"><span class="pre">cells[i,j,k]</span></code> is the <code class="docutils literal notranslate"><span class="pre">k</span></code>-th component
of the <code class="docutils literal notranslate"><span class="pre">j</span></code>-th cell vector at the time step with index
<code class="docutils literal notranslate"><span class="pre">i</span></code> (identified by step number <code class="docutils literal notranslate"><span class="pre">stepid[i]</span></code> and with
timestamp <code class="docutils literal notranslate"><span class="pre">times[i]</span></code>).</p></li>
<li><p><strong>times</strong> – if specified, float array with dimension <code class="docutils literal notranslate"><span class="pre">s</span></code>, where
<code class="docutils literal notranslate"><span class="pre">s</span></code> is the length of the <code class="docutils literal notranslate"><span class="pre">stepids</span></code> array. Contains the
timestamp of each step in picoseconds (ps).</p></li>
<li><p><strong>velocities</strong> – if specified, must be a float array with the same
dimensions of the <code class="docutils literal notranslate"><span class="pre">positions</span></code> array.
The array contains the velocities in the atoms.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Choose suitable units for velocities</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.show_mpl_heatmap">
<code class="sig-name descname">show_mpl_heatmap</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.show_mpl_heatmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.show_mpl_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Show a heatmap of the trajectory with matplotlib.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.show_mpl_pos">
<code class="sig-name descname">show_mpl_pos</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.show_mpl_pos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.show_mpl_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows the positions as a function of time, separate for XYZ coordinates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stepsize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The stepsize for the trajectory, set higher than 1 to
reduce number of points</p></li>
<li><p><strong>mintime</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Time to start from</p></li>
<li><p><strong>maxtime</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Maximum time</p></li>
<li><p><strong>elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – A list of atomic symbols that should be displayed.
If not specified, all atoms are displayed.</p></li>
<li><p><strong>indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – A list of indices of that atoms that can be displayed.
If not specified, all atoms of the correct species are displayed.</p></li>
<li><p><strong>dont_block</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If True, interpreter is not blocked when figure is displayed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.TrajectoryData.symbols">
<em class="property">property </em><code class="sig-name descname">symbols</code><a class="headerlink" href="#aiida.orm.nodes.data.array.TrajectoryData.symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of symbols, if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.orm.nodes.data.array.XyData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.</code><code class="sig-name descname">XyData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>A subclass designed to handle arrays that have an “XY” relationship to
each other. That is there is one array, the X array, and there are several
Y arrays, which can be considered functions of X.</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.XyData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.XyData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.xy'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.XyData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.XyData._arrayandname_validator">
<code class="sig-name descname">_arrayandname_validator</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">name</em>, <em class="sig-param">units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData._arrayandname_validator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData._arrayandname_validator" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates that the array is an numpy.ndarray and that the name is
of type str. Raises InputValidationError if this not the case.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.XyData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.xy.XyData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.XyData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.xy.XyData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.XyData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.xy.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.XyData.get_x">
<code class="sig-name descname">get_x</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.get_x"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData.get_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to retrieve the x array and x name raises a NotExistent
exception if no x array has been set yet.
:return x_name: the name set for the x_array
:return x_array: the x array set earlier
:return x_units: the x units set earlier</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.XyData.get_y">
<code class="sig-name descname">get_y</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.get_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData.get_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to retrieve the y arrays and the y names, raises a
NotExistent exception if they have not been set yet, or cannot be
retrieved
:return y_names: list of strings naming the y_arrays
:return y_arrays: list of y_arrays
:return y_units: list of strings giving the units for the y_arrays</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.XyData.set_x">
<code class="sig-name descname">set_x</code><span class="sig-paren">(</span><em class="sig-param">x_array</em>, <em class="sig-param">x_name</em>, <em class="sig-param">x_units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.set_x"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData.set_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the array and the name for the x values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_array</strong> – A numpy.ndarray, containing only floats</p></li>
<li><p><strong>x_name</strong> – a string for the x array name</p></li>
<li><p><strong>x_units</strong> – the units of x</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.XyData.set_y">
<code class="sig-name descname">set_y</code><span class="sig-paren">(</span><em class="sig-param">y_arrays</em>, <em class="sig-param">y_names</em>, <em class="sig-param">y_units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.set_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.XyData.set_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Set array(s) for the y part of the dataset. Also checks if the
x_array has already been set, and that, the shape of the y_arrays
agree with the x_array.
:param y_arrays: A list of y_arrays, numpy.ndarray
:param y_names: A list of strings giving the names of the y_arrays
:param y_units: A list of strings giving the units of the y_arrays</p>
</dd></dl>

</dd></dl>

<div class="section" id="module-aiida.orm.nodes.data.array.array">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-aiida.orm.nodes.data.array.array" title="Permalink to this headline">¶</a></h2>
<p>AiiDA ORM data class storing (numpy) arrays</p>
<dl class="class">
<dt id="aiida.orm.nodes.data.array.array.ArrayData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.array.</code><code class="sig-name descname">ArrayData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.data.Data" title="aiida.orm.nodes.data.data.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.data.Data</span></code></a></p>
<p>Store a set of arrays on disk (rather than on the database) in an efficient
way using numpy.save() (therefore, this class requires numpy to be
installed).</p>
<p>Each array is stored within the Node folder as a different .npy file.</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>Before storing, no caching is done: if you perform a
<a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData.get_array" title="aiida.orm.nodes.data.array.array.ArrayData.get_array"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_array()</span></code></a> call, the array will be re-read from disk.
If instead the ArrayData node has already been stored,
the array is cached in memory after the first read, and the cached array
is used thereafter.
If too much RAM memory is used, you can clear the
cache with the <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData.clear_internal_cache" title="aiida.orm.nodes.data.array.array.ArrayData.clear_internal_cache"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear_internal_cache()</span></code></a> method.</p>
</dd>
</dl>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.array'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._arraynames_from_files">
<code class="sig-name descname">_arraynames_from_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData._arraynames_from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._arraynames_from_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all arrays stored in the node, listing the files (and
not relying on the properties).</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._arraynames_from_properties">
<code class="sig-name descname">_arraynames_from_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData._arraynames_from_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._arraynames_from_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all arrays stored in the node, listing the attributes
starting with the correct prefix.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._cached_arrays">
<code class="sig-name descname">_cached_arrays</code><em class="property"> = None</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._cached_arrays" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.array.ArrayData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.ArrayData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData._validate">
<code class="sig-name descname">_validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData._validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData._validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the list of .npy files stored inside the node and the
list of properties match. Just a name check, no check on the size
since this would require to reload all arrays and this may take time
and memory.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.array_prefix">
<code class="sig-name descname">array_prefix</code><em class="property"> = 'array|'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.array_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.clear_internal_cache">
<code class="sig-name descname">clear_internal_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.clear_internal_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.clear_internal_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the internal memory cache where the arrays are stored after being
read from disk (used in order to reduce at minimum the readings from
disk).
This function is useful if you want to keep the node in memory, but you
do not want to waste memory to cache the arrays in RAM.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.delete_array">
<code class="sig-name descname">delete_array</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.delete_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.delete_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an array from the node. Can only be called before storing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the array to delete from the node.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.get_array">
<code class="sig-name descname">get_array</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.get_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array stored in the node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the array to return.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.get_arraynames">
<code class="sig-name descname">get_arraynames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_arraynames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.get_arraynames" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all arrays stored in the node, listing the files (and
not relying on the properties).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from arraynames</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.get_iterarrays">
<code class="sig-name descname">get_iterarrays</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_iterarrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.get_iterarrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator that returns tuples (name, array) for each array stored in the node.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0: </span>Renamed from iterarrays</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.get_shape">
<code class="sig-name descname">get_shape</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.get_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.get_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the shape of an array (read from the value cached in the
properties for efficiency reasons).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the array.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize internal variables for the backend node</p>
<p>This needs to be called explicitly in each specific subclass implementation of the init.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.array.ArrayData.set_array">
<code class="sig-name descname">set_array</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/array.html#ArrayData.set_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.array.ArrayData.set_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a new numpy array inside the node. Possibly overwrite the array
if it already existed.</p>
<p>Internally, it stores a name.npy file in numpy format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the array.</p></li>
<li><p><strong>array</strong> – The numpy array to store.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.orm.nodes.data.array.bands"></span><p>This module defines the classes related to band structures or dispersions
in a Brillouin zone, and how to operate on them.</p>
<dl class="class">
<dt id="aiida.orm.nodes.data.array.bands.BandsData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.bands.</code><code class="sig-name descname">BandsData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.kpoints.KpointsData" title="aiida.orm.nodes.data.array.kpoints.KpointsData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.kpoints.KpointsData</span></code></a></p>
<p>Class to handle bands data</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.bands'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._custom_export_format_replacements">
<code class="sig-name descname">_custom_export_format_replacements</code><em class="property"> = {'dat': 'dat_multicolumn', 'gnu': 'gnuplot', 'pdf': 'mpl_pdf', 'png': 'mpl_png', 'py': 'mpl_singlefile'}</em><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._custom_export_format_replacements" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._get_band_segments">
<code class="sig-name descname">_get_band_segments</code><span class="sig-paren">(</span><em class="sig-param">cartesian</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._get_band_segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._get_band_segments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._get_bandplot_data">
<code class="sig-name descname">_get_bandplot_data</code><span class="sig-paren">(</span><em class="sig-param">cartesian</em>, <em class="sig-param">prettify_format=None</em>, <em class="sig-param">join_symbol=None</em>, <em class="sig-param">get_segments=False</em>, <em class="sig-param">y_origin=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._get_bandplot_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._get_bandplot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get data to plot a band structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cartesian</strong> – if True, distances (for the x-axis) are computed in
cartesian coordinates, otherwise they are computed in reciprocal
coordinates. cartesian=True will fail if no cell has been set.</p></li>
<li><p><strong>prettify_format</strong> – by default, strings are not prettified. If you want
to prettify them, pass a valid prettify_format string (see valid options
in the docstring of :py:func:prettify_labels).</p></li>
<li><p><strong>join_symbols</strong> – by default, strings are not joined. If you pass a string,
this is used to join strings that are much closer than a given threshold.
The most typical string is the pipe symbol: <code class="docutils literal notranslate"><span class="pre">|</span></code>.</p></li>
<li><p><strong>get_segments</strong> – if True, also computes the band split into segments</p></li>
<li><p><strong>y_origin</strong> – if present, shift bands so to set the value specified at <code class="docutils literal notranslate"><span class="pre">y=0</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a plot_info dictiorary, whose keys are <code class="docutils literal notranslate"><span class="pre">x</span></code> (array of distances
for the x axis of the plot); <code class="docutils literal notranslate"><span class="pre">y</span></code> (array of bands), <code class="docutils literal notranslate"><span class="pre">labels</span></code> (list
of tuples in the format (float x value of the label, label string),
<code class="docutils literal notranslate"><span class="pre">band_type_idx</span></code> (array containing an index for each band: if there is only
one spin, then it’s an array of zeros, of length equal to the number of bands
at each point; if there are two spins, then it’s an array of zeros or ones
depending on the type of spin; the length is always equalt to the total
number of bands per kpoint).</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._get_mpl_body_template">
<em class="property">static </em><code class="sig-name descname">_get_mpl_body_template</code><span class="sig-paren">(</span><em class="sig-param">paths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._get_mpl_body_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._get_mpl_body_template" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>paths</strong> – paths of k-points</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.bands.BandsData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict">
<code class="sig-name descname">_matplotlib_get_dict</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">title=''</em>, <em class="sig-param">legend=None</em>, <em class="sig-param">legend2=None</em>, <em class="sig-param">y_max_lim=None</em>, <em class="sig-param">y_min_lim=None</em>, <em class="sig-param">y_origin=0.0</em>, <em class="sig-param">prettify_format=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._matplotlib_get_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the data to send to the python-matplotlib plotting script.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p></li>
<li><p><strong>plot_info</strong> – a dictionary</p></li>
<li><p><strong>setnumber_offset</strong> – an offset to be applied to all set numbers
(i.e. s0 is replaced by s[offset], s1 by s[offset+1], etc.)</p></li>
<li><p><strong>color_number</strong> – the color number for lines, symbols, error bars
and filling (should be less than the parameter max_num_agr_colors
defined below)</p></li>
<li><p><strong>title</strong> – the title</p></li>
<li><p><strong>legend</strong> – the legend (applied only to the first of the set)</p></li>
<li><p><strong>legend2</strong> – the legend for second-type spins
(applied only to the first of the set)</p></li>
<li><p><strong>y_max_lim</strong> – the maximum on the y axis (if None, put the
maximum of the bands)</p></li>
<li><p><strong>y_min_lim</strong> – the minimum on the y axis (if None, put the
minimum of the bands)</p></li>
<li><p><strong>y_origin</strong> – the new origin of the y axis -&gt; all bands are replaced
by bands-y_origin</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
<li><p><strong>kwargs</strong> – additional customization variables; only a subset is
accepted, see internal variable ‘valid_additional_keywords</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.bands.BandsData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_agr">
<code class="sig-name descname">_prepare_agr</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">setnumber_offset=0</em>, <em class="sig-param">color_number=1</em>, <em class="sig-param">color_number2=2</em>, <em class="sig-param">legend=''</em>, <em class="sig-param">title=''</em>, <em class="sig-param">y_max_lim=None</em>, <em class="sig-param">y_min_lim=None</em>, <em class="sig-param">y_origin=0.0</em>, <em class="sig-param">prettify_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_agr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_agr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare an xmgrace agr file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comments</strong> – if True, print comments
(if it makes sense for the given format)</p></li>
<li><p><strong>plot_info</strong> – a dictionary</p></li>
<li><p><strong>setnumber_offset</strong> – an offset to be applied to all set numbers
(i.e. s0 is replaced by s[offset], s1 by s[offset+1], etc.)</p></li>
<li><p><strong>color_number</strong> – the color number for lines, symbols, error bars
and filling (should be less than the parameter max_num_agr_colors
defined below)</p></li>
<li><p><strong>color_number2</strong> – the color number for lines, symbols, error bars
and filling for the second-type spins (should be less than the
parameter max_num_agr_colors defined below)</p></li>
<li><p><strong>legend</strong> – the legend (applied only to the first set)</p></li>
<li><p><strong>title</strong> – the title</p></li>
<li><p><strong>y_max_lim</strong> – the maximum on the y axis (if None, put the
maximum of the bands); applied <em>after</em> shifting the origin
by <code class="docutils literal notranslate"><span class="pre">y_origin</span></code></p></li>
<li><p><strong>y_min_lim</strong> – the minimum on the y axis (if None, put the
minimum of the bands); applied <em>after</em> shifting the origin
by <code class="docutils literal notranslate"><span class="pre">y_origin</span></code></p></li>
<li><p><strong>y_origin</strong> – the new origin of the y axis -&gt; all bands are replaced
by bands-y_origin</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_agr_batch">
<code class="sig-name descname">_prepare_agr_batch</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">prettify_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_agr_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_agr_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare two files, data and batch, to be plot with xmgrace as:
xmgrace -batch file.dat</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>main_file_name</strong> – if the user asks to write the main content on a
file, this contains the filename. This should be used to infer a
good filename for the additional files.
In this case, we remove the extension, and add ‘_data.dat’</p></li>
<li><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_dat_blocks">
<code class="sig-name descname">_prepare_dat_blocks</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_dat_blocks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_dat_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Format suitable for gnuplot using blocks.
Columns with x and y (path and band energy). Several blocks, separated
by two empty lines, one per energy band.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_dat_multicolumn">
<code class="sig-name descname">_prepare_dat_multicolumn</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_dat_multicolumn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_dat_multicolumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an N x M matrix. First column is the distance between kpoints,
The other columns are the bands. Header contains number of kpoints and
the number of bands (commented).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_gnuplot">
<code class="sig-name descname">_prepare_gnuplot</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=None</em>, <em class="sig-param">title=''</em>, <em class="sig-param">comments=True</em>, <em class="sig-param">prettify_format=None</em>, <em class="sig-param">y_max_lim=None</em>, <em class="sig-param">y_min_lim=None</em>, <em class="sig-param">y_origin=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_gnuplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_gnuplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare an gnuplot script to plot the bands, with the .dat file
returned as an independent file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>main_file_name</strong> – if the user asks to write the main content on a
file, this contains the filename. This should be used to infer a
good filename for the additional files.
In this case, we remove the extension, and add ‘_data.dat’</p></li>
<li><p><strong>title</strong> – if specified, add a title to the plot</p></li>
<li><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p></li>
<li><p><strong>prettify_format</strong> – if None, use the default prettify format. Otherwise
specify a string with the prettifier to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_json">
<code class="sig-name descname">_prepare_json</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">comments=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a json file in a format compatible with the AiiDA band visualizer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comments</strong> – if True, print comments (if it makes sense for the given
format)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_pdf">
<code class="sig-name descname">_prepare_mpl_pdf</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_pdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands, with the JSON
returned as an independent file.</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_png">
<code class="sig-name descname">_prepare_mpl_png</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_png"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands, with the JSON
returned as an independent file.</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_singlefile">
<code class="sig-name descname">_prepare_mpl_singlefile</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_singlefile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_singlefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_withjson">
<code class="sig-name descname">_prepare_mpl_withjson</code><span class="sig-paren">(</span><em class="sig-param">main_file_name=''</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._prepare_mpl_withjson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._prepare_mpl_withjson" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a python script using matplotlib to plot the bands, with the JSON
returned as an independent file.</p>
<p>For the possible parameters, see documentation of
<a class="reference internal" href="#aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict" title="aiida.orm.nodes.data.array.bands.BandsData._matplotlib_get_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_matplotlib_get_dict()</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.bands.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._set_pbc">
<code class="sig-name descname">_set_pbc</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._set_pbc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._set_pbc" title="Permalink to this definition">¶</a></dt>
<dd><p>validate the pbc, then store them</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData._validate_bands_occupations">
<code class="sig-name descname">_validate_bands_occupations</code><span class="sig-paren">(</span><em class="sig-param">bands</em>, <em class="sig-param">occupations=None</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData._validate_bands_occupations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData._validate_bands_occupations" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the list of bands and of occupations before storage.
Kpoints must be set in advance.
Bands and occupations must be convertible into arrays of
Nkpoints x Nbands floats or Nspins x Nkpoints x Nbands; Nkpoints must
correspond to the number of kpoints.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.array_labels">
<em class="property">property </em><code class="sig-name descname">array_labels</code><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.array_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the labels associated with the band arrays</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.get_bands">
<code class="sig-name descname">get_bands</code><span class="sig-paren">(</span><em class="sig-param">also_occupations=False</em>, <em class="sig-param">also_labels=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.get_bands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.get_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array (nkpoints x num_bands or nspins x nkpoints x num_bands)
of energies.
:param also_occupations: if True, returns also the occupations array.
Default = False</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.set_bands">
<code class="sig-name descname">set_bands</code><span class="sig-paren">(</span><em class="sig-param">bands</em>, <em class="sig-param">units=None</em>, <em class="sig-param">occupations=None</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.set_bands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.set_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an array of band energies of dimension (nkpoints x nbands).
Kpoints must be set in advance. Can contain floats or None.
:param bands: a list of nkpoints lists of nbands bands, or a 2D array
of shape (nkpoints x nbands), with band energies for each kpoint
:param units: optional, energy units
:param occupations: optional, a 2D list or array of floats of same
shape as bands, with the occupation associated to each band</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.set_kpointsdata">
<code class="sig-name descname">set_kpointsdata</code><span class="sig-paren">(</span><em class="sig-param">kpointsdata</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.set_kpointsdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.set_kpointsdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the kpoints from a kpoint object.
:param kpointsdata: an instance of KpointsData class</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.show_mpl">
<code class="sig-name descname">show_mpl</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#BandsData.show_mpl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.show_mpl" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a show() command for the band structure using matplotlib.
This uses internally the ‘mpl_singlefile’ format, with empty
main_file_name.</p>
<p>Other kwargs are passed to self._exportcontent.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.bands.BandsData.units">
<em class="property">property </em><code class="sig-name descname">units</code><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.BandsData.units" title="Permalink to this definition">¶</a></dt>
<dd><p>Units in which the data in bands were stored. A string</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="aiida.orm.nodes.data.array.bands.find_bandgap">
<code class="sig-prename descclassname">aiida.orm.nodes.data.array.bands.</code><code class="sig-name descname">find_bandgap</code><span class="sig-paren">(</span><em class="sig-param">bandsdata</em>, <em class="sig-param">number_electrons=None</em>, <em class="sig-param">fermi_energy=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#find_bandgap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.find_bandgap" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to guess whether the bandsdata represent an insulator.
This method is meant to be used only for electronic bands (not phonons)
By default, it will try to use the occupations to guess the number of
electrons and find the Fermi Energy, otherwise, it can be provided
explicitely.
Also, there is an implicit assumption that the kpoints grid is
“sufficiently” dense, so that the bandsdata are not missing the
intersection between valence and conduction band if present.
Use this function with care!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number_electrons</strong> – (optional, float) number of electrons in the unit cell</p></li>
<li><p><strong>fermi_energy</strong> – (optional, float) value of the fermi energy.</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>By default, the algorithm uses the occupations array
to guess the number of electrons and the occupied bands. This is to be
used with care, because the occupations could be smeared so at a
non-zero temperature, with the unwanted effect that the conduction bands
might be occupied in an insulator.
Prefer to pass the number_of_electrons explicitly</p>
</dd>
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>Only one between number_electrons and fermi_energy can be specified at the
same time.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(is_insulator, gap), where is_insulator is a boolean, and gap a
float. The gap is None in case of a metal, zero when the homo is
equal to the lumo (e.g. in semi-metals).</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.orm.nodes.data.array.bands.prepare_header_comment">
<code class="sig-prename descclassname">aiida.orm.nodes.data.array.bands.</code><code class="sig-name descname">prepare_header_comment</code><span class="sig-paren">(</span><em class="sig-param">uuid</em>, <em class="sig-param">plot_info</em>, <em class="sig-param">comment_char='#'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/bands.html#prepare_header_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.bands.prepare_header_comment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<span class="target" id="module-aiida.orm.nodes.data.array.kpoints"></span><p>Module of the KpointsData class, defining the AiiDA data type for storing
lists and meshes of k-points (i.e., points in the reciprocal space of a
periodic crystal structure).</p>
<dl class="class">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.kpoints.</code><code class="sig-name descname">KpointsData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>Class to handle array of kpoints in the Brillouin zone. Provide methods to
generate either user-defined k-points or path of k-points along symmetry
lines.
Internally, all k-points are defined in terms of crystal (fractional)
coordinates.
Cell and lattice vector coordinates are in Angstroms, reciprocal lattice
vectors in Angstrom^-1 .
:note: The methods setting and using the Bravais lattice info assume the
PRIMITIVE unit cell is provided in input to the set_cell or
set_cell_from_structure methods.</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.kpoints'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._change_reference">
<code class="sig-name descname">_change_reference</code><span class="sig-paren">(</span><em class="sig-param">kpoints</em>, <em class="sig-param">to_cartesian=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._change_reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._change_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Change reference system, from cartesian to crystal coordinates (units of b1,b2,b3) or viceversa.
:param kpoints: a list of (3) point coordinates
:return kpoints: a list of (3) point coordinates in the new reference</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._dimension">
<em class="property">property </em><code class="sig-name descname">_dimension</code><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._dimension" title="Permalink to this definition">¶</a></dt>
<dd><p>Dimensionality of the structure, found from its pbc (i.e. 1 if it’s a 1D
structure, 2 if its 2D, 3 if it’s 3D …).
:return dimensionality: 0, 1, 2 or 3
:note: will return 3 if pbc has not been set beforehand</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.kpoints.KpointsData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.kpoints.KpointsData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.kpoints.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._set_cell">
<code class="sig-name descname">_set_cell</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._set_cell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._set_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate if ‘value’ is a allowed crystal unit cell
:param value: something compatible with a 3x3 tuple of floats</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._set_labels">
<code class="sig-name descname">_set_labels</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._set_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._set_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>set label names. Must pass in input a list like: <code class="docutils literal notranslate"><span class="pre">[[0,'X'],[34,'L'],...</span> <span class="pre">]</span></code></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._set_pbc">
<code class="sig-name descname">_set_pbc</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._set_pbc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._set_pbc" title="Permalink to this definition">¶</a></dt>
<dd><p>validate the pbc, then store them</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData._validate_kpoints_weights">
<code class="sig-name descname">_validate_kpoints_weights</code><span class="sig-paren">(</span><em class="sig-param">kpoints</em>, <em class="sig-param">weights</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData._validate_kpoints_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData._validate_kpoints_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the list of kpoints and of weights before storage.
Kpoints and weights must be convertible respectively to an array of
N x dimension and N floats</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.cell">
<em class="property">property </em><code class="sig-name descname">cell</code><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.cell" title="Permalink to this definition">¶</a></dt>
<dd><p>The crystal unit cell. Rows are the crystal vectors in Angstroms.
:return: a 3x3 numpy.array</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.get_description">
<code class="sig-name descname">get_description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.get_description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.get_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string with infos retrieved from  kpoints node’s properties.
:param node:
:return: retstr</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.get_kpoints">
<code class="sig-name descname">get_kpoints</code><span class="sig-paren">(</span><em class="sig-param">also_weights=False</em>, <em class="sig-param">cartesian=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.get_kpoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.get_kpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of kpoints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>also_weights</strong> – if True, returns also the list of weights.
Default = False</p></li>
<li><p><strong>cartesian</strong> – if True, returns points in cartesian coordinates,
otherwise, returns in crystal coordinates. Default = False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.get_kpoints_mesh">
<code class="sig-name descname">get_kpoints_mesh</code><span class="sig-paren">(</span><em class="sig-param">print_list=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.get_kpoints_mesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.get_kpoints_mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mesh of kpoints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>print_list</strong> – default=False. If True, prints the mesh of kpoints as a list</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.8)"><strong>AttributeError</strong></a> – if no mesh has been set</p>
</dd>
<dt class="field-odd">Return mesh,offset</dt>
<dd class="field-odd"><p>(if print_list=False) a list of 3 integers and a list of three
floats 0&lt;x&lt;1, representing the mesh and the offset of kpoints</p>
</dd>
<dt class="field-even">Return kpoints</dt>
<dd class="field-even"><p>(if print_list = True) an explicit list of kpoints coordinates,
similar to what returned by get_kpoints()</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.labels">
<em class="property">property </em><code class="sig-name descname">labels</code><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Labels associated with the list of kpoints.
List of tuples with kpoint index and kpoint name: <code class="docutils literal notranslate"><span class="pre">[(0,'G'),(13,'M'),...]</span></code></p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.pbc">
<em class="property">property </em><code class="sig-name descname">pbc</code><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.pbc" title="Permalink to this definition">¶</a></dt>
<dd><p>The periodic boundary conditions along the vectors a1,a2,a3.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple of three booleans, each one tells if there are periodic
boundary conditions for the i-th real-space direction (i=1,2,3)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.reciprocal_cell">
<em class="property">property </em><code class="sig-name descname">reciprocal_cell</code><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.reciprocal_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute reciprocal cell from the internally set cell.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>reciprocal cell in units of 1/Angstrom with cell vectors stored as rows.
Use e.g. reciprocal_cell[0] to access the first reciprocal cell vector.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.set_cell">
<code class="sig-name descname">set_cell</code><span class="sig-paren">(</span><em class="sig-param">cell</em>, <em class="sig-param">pbc=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_cell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.set_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cell to be used for symmetry analysis.
To set a cell from an AiiDA structure, use “set_cell_from_structure”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cell</strong> – 3x3 matrix of cell vectors. Orientation: each row
represent a lattice vector. Units are Angstroms.</p></li>
<li><p><strong>pbc</strong> – list of 3 booleans, True if in the nth crystal direction the
structure is periodic. Default = [True,True,True]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.set_cell_from_structure">
<code class="sig-name descname">set_cell_from_structure</code><span class="sig-paren">(</span><em class="sig-param">structuredata</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_cell_from_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.set_cell_from_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cell to be used for symmetry analysis from an AiiDA structure.
Inherits both the cell and the pbc’s.
To set manually a cell, use “set_cell”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>structuredata</strong> – an instance of StructureData</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.set_kpoints">
<code class="sig-name descname">set_kpoints</code><span class="sig-paren">(</span><em class="sig-param">kpoints</em>, <em class="sig-param">cartesian=False</em>, <em class="sig-param">labels=None</em>, <em class="sig-param">weights=None</em>, <em class="sig-param">fill_values=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_kpoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.set_kpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the list of kpoints. If a mesh has already been stored, raise a
ModificationNotAllowed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kpoints</strong> – <p>a list of kpoints, each kpoint being a list of one, two
or three coordinates, depending on self.pbc: if structure is 1D
(only one True in self.pbc) one allows singletons or scalars for
each k-point, if it’s 2D it can be a length-2 list, and in all
cases it can be a length-3 list.
Examples:</p>
<blockquote>
<div><ul>
<li><p>[[0.,0.,0.],[0.1,0.1,0.1],…] for 1D, 2D or 3D</p></li>
<li><p>[[0.,0.],[0.1,0.1,],…] for 1D or 2D</p></li>
<li><p>[[0.],[0.1],…] for 1D</p></li>
<li><p>[0., 0.1, …] for 1D (list of scalars)</p></li>
</ul>
</div></blockquote>
<p>For 0D (all pbc are False), the list can be any of the above
or empty - then only Gamma point is set.
The value of k for the non-periodic dimension(s) is set by
fill_values</p>
</p></li>
<li><p><strong>cartesian</strong> – if True, the coordinates given in input are treated
as in cartesian units. If False, the coordinates are crystal,
i.e. in units of b1,b2,b3. Default = False</p></li>
<li><p><strong>labels</strong> – optional, the list of labels to be set for some of the
kpoints. See labels for more info</p></li>
<li><p><strong>weights</strong> – optional, a list of floats with the weight associated
to the kpoint list</p></li>
<li><p><strong>fill_values</strong> – scalar to be set to all
non-periodic dimensions (indicated by False in self.pbc), or list of
values for each of the non-periodic dimensions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.set_kpoints_mesh">
<code class="sig-name descname">set_kpoints_mesh</code><span class="sig-paren">(</span><em class="sig-param">mesh</em>, <em class="sig-param">offset=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_kpoints_mesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.set_kpoints_mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set KpointsData to represent a uniformily spaced mesh of kpoints in the
Brillouin zone. This excludes the possibility of set/get kpoints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mesh</strong> – a list of three integers, representing the size of the
kpoint mesh along b1,b2,b3.</p></li>
<li><p><strong>offset</strong> – (optional) a list of three floats between 0 and 1.
[0.,0.,0.] is Gamma centered mesh
[0.5,0.5,0.5] is half shifted
[1.,1.,1.] by periodicity should be equivalent to [0.,0.,0.]
Default = [0.,0.,0.].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.kpoints.KpointsData.set_kpoints_mesh_from_density">
<code class="sig-name descname">set_kpoints_mesh_from_density</code><span class="sig-paren">(</span><em class="sig-param">distance</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">force_parity=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/kpoints.html#KpointsData.set_kpoints_mesh_from_density"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.kpoints.KpointsData.set_kpoints_mesh_from_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a kpoints mesh using a kpoints density, expressed as the maximum
distance between adjacent points along a reciprocal axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distance</strong> – distance (in 1/Angstrom) between adjacent
kpoints, i.e. the number of kpoints along each reciprocal
axis i is <img class="math" src="../_images/math/073705362f01ab3a6c5124c090d07635d17b7d14.png" alt="|b_i|/distance"/>
where <img class="math" src="../_images/math/88b5f9d85a03915f622e5072c9f5b2baf1f25cf8.png" alt="|b_i|"/> is the norm of the reciprocal cell vector.</p></li>
<li><p><strong>offset</strong> – (optional) a list of three floats between 0 and 1.
[0.,0.,0.] is Gamma centered mesh
[0.5,0.5,0.5] is half shifted
Default = [0.,0.,0.].</p></li>
<li><p><strong>force_parity</strong> – (optional) if True, force each integer in the mesh
to be even (except for the non-periodic directions).</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>a cell should be defined first.</p>
</dd>
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>the number of kpoints along non-periodic axes is always 1.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.orm.nodes.data.array.projection"></span><dl class="class">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.projection.</code><code class="sig-name descname">ProjectionData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.orbital.OrbitalData" title="aiida.orm.nodes.data.orbital.OrbitalData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.orbital.OrbitalData</span></code></a>, <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>A class to handle arrays of projected wavefunction data. That is projections
of a orbitals, usually an atomic-hydrogen orbital, onto a
given bloch wavefunction, the bloch wavefunction being indexed by
s, n, and k. E.g. the elements are the projections described as
&lt; orbital | Bloch wavefunction (s,n,k) &gt;</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.projection'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData._check_projections_bands">
<code class="sig-name descname">_check_projections_bands</code><span class="sig-paren">(</span><em class="sig-param">projection_array</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData._check_projections_bands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData._check_projections_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to make sure that a reference bandsdata is already set, and that
projection_array is of the same shape of the bands data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>projwfc_arrays</strong> – nk x nb x nwfc array, to be
checked against bands</p>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p>AttributeError if energy is not already set</p>
</dd>
<dt class="field-odd">Raise</dt>
<dd class="field-odd"><p>AttributeError if input_array is not of same shape as
dos_energy</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData._find_orbitals_and_indices">
<code class="sig-name descname">_find_orbitals_and_indices</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData._find_orbitals_and_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData._find_orbitals_and_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all the orbitals and their indicies associated with kwargs
essential for retrieving the other indexed array parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – kwargs that can call orbitals as in get_orbitals()</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>retrieve_indexes, list of indicicies of orbitals corresponding
to the kwargs</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>all_orbitals, list of orbitals to which the indexes correspond</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData._from_index_to_arrayname">
<code class="sig-name descname">_from_index_to_arrayname</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData._from_index_to_arrayname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData._from_index_to_arrayname" title="Permalink to this definition">¶</a></dt>
<dd><p>Used internally to determine the array names.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.projection.ProjectionData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.projection.ProjectionData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.projection.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.get_pdos">
<code class="sig-name descname">get_pdos</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.get_pdos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.get_pdos" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves all the pdos arrays corresponding to the input kwargs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – inputs describing the orbitals associated with the pdos
arrays</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of tuples containing the orbital, energy array and pdos
array associated with all orbitals that correspond to kwargs</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.get_projections">
<code class="sig-name descname">get_projections</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.get_projections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.get_projections" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves all the pdos arrays corresponding to the input kwargs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – inputs describing the orbitals associated with the pdos
arrays</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of tuples containing the orbital, and projection arrays
associated with all orbitals that correspond to kwargs</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.get_reference_bandsdata">
<code class="sig-name descname">get_reference_bandsdata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.get_reference_bandsdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.get_reference_bandsdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the reference BandsData, using the set uuid via
set_reference_bandsdata</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a BandsData instance</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.8)"><strong>AttributeError</strong></a> – if the bandsdata has not been set yet</p></li>
<li><p><a class="reference internal" href="aiida.common.html#aiida.common.exceptions.NotExistent" title="aiida.common.exceptions.NotExistent"><strong>exceptions.NotExistent</strong></a> – if the bandsdata uuid did not retrieve bandsdata</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.set_orbitals">
<code class="sig-name descname">set_orbitals</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.set_orbitals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.set_orbitals" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is inherited from OrbitalData, but is blocked here.
If used will raise a NotImplementedError</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.set_projectiondata">
<code class="sig-name descname">set_projectiondata</code><span class="sig-paren">(</span><em class="sig-param">list_of_orbitals</em>, <em class="sig-param">list_of_projections=None</em>, <em class="sig-param">list_of_energy=None</em>, <em class="sig-param">list_of_pdos=None</em>, <em class="sig-param">tags=None</em>, <em class="sig-param">bands_check=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.set_projectiondata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.set_projectiondata" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the projwfc_array using the projwfc_label, after validating both.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_orbitals</strong> – list of orbitals, of class orbital data.
They should be the ones up on which the
projection array corresponds with.</p></li>
<li><p><strong>list_of_projections</strong> – list of arrays of projections of a atomic
wavefunctions onto bloch wavefunctions. Since the
projection is for every bloch wavefunction which
can be specified by its spin (if used), band, and
kpoint the dimensions must be
nspin x nbands x nkpoints for the projwfc array.
Or nbands x nkpoints if spin is not used.</p></li>
<li><p><strong>energy_axis</strong> – list of energy axis for the list_of_pdos</p></li>
<li><p><strong>list_of_pdos</strong> – a list of projected density of states for the
atomic wavefunctions, units in states/eV</p></li>
<li><p><strong>tags</strong> – A list of tags, not supported currently.</p></li>
<li><p><strong>bands_check</strong> – if false, skips checks of whether the bands has
been already set, and whether the sizes match. For
use in parsers, where the BandsData has not yet
been stored and therefore get_reference_bandsdata
cannot be called</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.projection.ProjectionData.set_reference_bandsdata">
<code class="sig-name descname">set_reference_bandsdata</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/projection.html#ProjectionData.set_reference_bandsdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.projection.ProjectionData.set_reference_bandsdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a reference bandsdata, creates a uuid link between this data
object and a bandsdata object, must be set before any projection arrays</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – a BandsData instance, a uuid or a pk</p>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p>exceptions.NotExistent if there was no BandsData associated with uuid or pk</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.orm.nodes.data.array.trajectory"></span><p>AiiDA class to deal with crystal structure trajectories.</p>
<dl class="class">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.trajectory.</code><code class="sig-name descname">TrajectoryData</code><span class="sig-paren">(</span><em class="sig-param">structurelist=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>Stores a trajectory (a sequence of crystal structures with timestamps, and
possibly with velocities).</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">structurelist=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>backend_entity</strong> (<a class="reference internal" href="aiida.orm.implementation.html#aiida.orm.implementation.BackendEntity" title="aiida.orm.implementation.BackendEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.implementation.BackendEntity</span></code></a>) – the backend model supporting this entity</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.trajectory'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._internal_validate">
<code class="sig-name descname">_internal_validate</code><span class="sig-paren">(</span><em class="sig-param">stepids</em>, <em class="sig-param">cells</em>, <em class="sig-param">symbols</em>, <em class="sig-param">positions</em>, <em class="sig-param">times</em>, <em class="sig-param">velocities</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._internal_validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._internal_validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal function to validate the type and shape of the arrays. See
the documentation of py:meth:<cite>.set_trajectory</cite> for a description of the
valid shape and type of the parameters.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.trajectory.TrajectoryData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._parse_xyz_pos">
<code class="sig-name descname">_parse_xyz_pos</code><span class="sig-paren">(</span><em class="sig-param">inputstring</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._parse_xyz_pos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._parse_xyz_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>Load positions from a XYZ file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The steps and symbols must be set manually before calling this
import function as a consistency measure. Even though the symbols
and steps could be extracted from the XYZ file, the data present in
the XYZ file may or may not be correct and the same logic would have
to be present in the XYZ-velocities function. It was therefore
decided not to implement it at all but require it to be set
explicitly.</p>
</div>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.orm.nodes.data.array.trajectory</span> <span class="kn">import</span> <span class="n">TrajectoryData</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">TrajectoryData</span><span class="p">()</span>
<span class="c1"># get sites and number of timesteps</span>
<span class="n">t</span><span class="o">.</span><span class="n">set_array</span><span class="p">(</span><span class="s1">&#39;steps&#39;</span><span class="p">,</span> <span class="n">arange</span><span class="p">(</span><span class="n">ntimesteps</span><span class="p">))</span>
<span class="n">t</span><span class="o">.</span><span class="n">set_array</span><span class="p">(</span><span class="s1">&#39;symbols&#39;</span><span class="p">,</span> <span class="n">array</span><span class="p">([</span><span class="n">site</span><span class="o">.</span><span class="n">kind</span> <span class="k">for</span> <span class="n">site</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">sites</span><span class="p">]))</span>
<span class="n">t</span><span class="o">.</span><span class="n">importfile</span><span class="p">(</span><span class="s1">&#39;some-calc/AIIDA-PROJECT-pos-1.xyz&#39;</span><span class="p">,</span> <span class="s1">&#39;xyz_pos&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._parse_xyz_vel">
<code class="sig-name descname">_parse_xyz_vel</code><span class="sig-paren">(</span><em class="sig-param">inputstring</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._parse_xyz_vel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._parse_xyz_vel" title="Permalink to this definition">¶</a></dt>
<dd><p>Load velocities from a XYZ file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The steps and symbols must be set manually before calling this
import function as a consistency measure. See also comment for
<a class="reference internal" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._parse_xyz_pos" title="aiida.orm.nodes.data.array.trajectory.TrajectoryData._parse_xyz_pos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_parse_xyz_pos()</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.trajectory.TrajectoryData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._prepare_cif">
<code class="sig-name descname">_prepare_cif</code><span class="sig-paren">(</span><em class="sig-param">trajectory_index=None</em>, <em class="sig-param">main_file_name=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._prepare_cif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._prepare_cif" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the given trajectory to a string of format CIF.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._prepare_xsf">
<code class="sig-name descname">_prepare_xsf</code><span class="sig-paren">(</span><em class="sig-param">index=None</em>, <em class="sig-param">main_file_name=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._prepare_xsf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._prepare_xsf" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the given trajectory to a string of format XSF (for XCrySDen).</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.trajectory.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData._validate">
<code class="sig-name descname">_validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData._validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData._validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the required arrays are present and that their type and
dimension are correct.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_cells">
<code class="sig-name descname">get_cells</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_cells"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of cells, if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_cif">
<code class="sig-name descname">get_cif</code><span class="sig-paren">(</span><em class="sig-param">index=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_cif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_cif" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.cif.CifData" title="aiida.orm.nodes.data.cif.CifData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.cif.CifData</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0: </span>Renamed from _get_cif</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_index_from_stepid">
<code class="sig-name descname">get_index_from_stepid</code><span class="sig-paren">(</span><em class="sig-param">stepid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_index_from_stepid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_index_from_stepid" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value for the stepid (i.e., a value among those of the <code class="docutils literal notranslate"><span class="pre">steps</span></code>
array), return the array index of that stepid, that can be used in other
methods such as <a class="reference internal" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_data" title="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_step_data()</span></code></a> or
<a class="reference internal" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_structure" title="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_step_structure()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from get_step_index</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this function returns the first index found
(i.e. if multiple steps are present with the same value,
only the index of the first one is returned).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if no step with the given value is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_positions">
<code class="sig-name descname">get_positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of positions, if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_data">
<code class="sig-name descname">get_step_data</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_step_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple with all information concerning
the stepid with given index (0 is the first step, 1 the second step
and so on). If you know only the step value, use the
<a class="reference internal" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_index_from_stepid" title="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_index_from_stepid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_index_from_stepid()</span></code></a>  method to get the
corresponding index.</p>
<p>If no velocities were specified, None is returned as the last element.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple in the format
<code class="docutils literal notranslate"><span class="pre">(stepid,</span> <span class="pre">time,</span> <span class="pre">cell,</span> <span class="pre">symbols,</span> <span class="pre">positions,</span> <span class="pre">velocities)</span></code>,
where <code class="docutils literal notranslate"><span class="pre">stepid</span></code> is an integer, <code class="docutils literal notranslate"><span class="pre">time</span></code> is a float, <code class="docutils literal notranslate"><span class="pre">cell</span></code> is a
<img class="math" src="../_images/math/679c5d9dbdc2f5079c0c554856efdae3d27b5d80.png" alt="3 \times 3"/> matrix, <code class="docutils literal notranslate"><span class="pre">symbols</span></code> is an array of length <code class="docutils literal notranslate"><span class="pre">n</span></code>,
positions is a <img class="math" src="../_images/math/b9caefcfbaa80eeafb7a625d3d5eb9fce06fc487.png" alt="n \times 3"/> array, and velocities is either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or a <img class="math" src="../_images/math/b9caefcfbaa80eeafb7a625d3d5eb9fce06fc487.png" alt="n \times 3"/> array</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>index</strong> – The index of the step that you want to retrieve, from
0 to <code class="docutils literal notranslate"><span class="pre">self.numsteps</span> <span class="pre">-</span> <span class="pre">1</span></code>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IndexError" title="(in Python v3.8)"><strong>IndexError</strong></a> – if you require an index beyond the limits.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if you did not store the trajectory yet.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_structure">
<code class="sig-name descname">get_step_structure</code><span class="sig-paren">(</span><em class="sig-param">index</em>, <em class="sig-param">custom_kinds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_step_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an AiiDA <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> node
(not stored yet!) with the coordinates of the given step, identified by
its index. If you know only the step value, use the
<a class="reference internal" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_index_from_stepid" title="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_index_from_stepid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_index_from_stepid()</span></code></a> method to get the corresponding index.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The periodic boundary conditions are always set to True.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from step_to_structure</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> – The index of the step that you want to retrieve, from
0 to <code class="docutils literal notranslate"><span class="pre">self.numsteps-</span> <span class="pre">1</span></code>.</p></li>
<li><p><strong>custom_kinds</strong> – (Optional) If passed must be a list of
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.Kind" title="aiida.orm.nodes.data.structure.Kind"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.Kind</span></code></a> objects. There must be one
kind object for each different string in the <code class="docutils literal notranslate"><span class="pre">symbols</span></code> array, with
<code class="docutils literal notranslate"><span class="pre">kind.name</span></code> set to this string.
If this parameter is omitted, the automatic kind generation of AiiDA
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> nodes is used,
meaning that the strings in the <code class="docutils literal notranslate"><span class="pre">symbols</span></code> array must be valid
chemical symbols.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_stepids">
<code class="sig-name descname">get_stepids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_stepids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_stepids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of steps, if it has already been set.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7: </span>Renamed from get_steps</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_structure">
<code class="sig-name descname">get_structure</code><span class="sig-paren">(</span><em class="sig-param">store=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates <a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0: </span>Renamed from _get_aiida_structure</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>converter</strong> – specify the converter. Default ‘ase’.</p></li>
<li><p><strong>store</strong> – If True, intermediate calculation gets stored in the
AiiDA database for record. Default False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> node.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_times">
<code class="sig-name descname">get_times</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of times (in ps), if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_velocities">
<code class="sig-name descname">get_velocities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.get_velocities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_velocities" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of velocities, if it has already been set.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function (differently from all other <code class="docutils literal notranslate"><span class="pre">get_*</span></code>
functions, will not raise an exception if the velocities are not
set, but rather return <code class="docutils literal notranslate"><span class="pre">None</span></code> (both if no trajectory was not set yet,
and if it the trajectory was set but no velocities were specified).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.numsites">
<em class="property">property </em><code class="sig-name descname">numsites</code><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.numsites" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of stored sites, or zero if nothing has been stored yet.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.numsteps">
<em class="property">property </em><code class="sig-name descname">numsteps</code><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.numsteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of stored steps, or zero if nothing has been stored yet.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.set_structurelist">
<code class="sig-name descname">set_structurelist</code><span class="sig-paren">(</span><em class="sig-param">structurelist</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.set_structurelist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.set_structurelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Create trajectory from the list of
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>structurelist</strong> – a list of
<a class="reference internal" href="aiida.orm.nodes.data.html#aiida.orm.nodes.data.structure.StructureData" title="aiida.orm.nodes.data.structure.StructureData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.structure.StructureData</span></code></a> instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if symbol lists of supplied structures are
different</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.set_trajectory">
<code class="sig-name descname">set_trajectory</code><span class="sig-paren">(</span><em class="sig-param">symbols</em>, <em class="sig-param">positions</em>, <em class="sig-param">stepids=None</em>, <em class="sig-param">cells=None</em>, <em class="sig-param">times=None</em>, <em class="sig-param">velocities=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.set_trajectory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.set_trajectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the whole trajectory, after checking that types and dimensions
are correct.</p>
<p>Parameters <code class="docutils literal notranslate"><span class="pre">stepids</span></code>, <code class="docutils literal notranslate"><span class="pre">cells</span></code> and <code class="docutils literal notranslate"><span class="pre">velocities</span></code> are optional
variables. If nothing is passed for <code class="docutils literal notranslate"><span class="pre">cells</span></code> or <code class="docutils literal notranslate"><span class="pre">velocities</span></code>
nothing will be stored. However, if no input is given for <code class="docutils literal notranslate"><span class="pre">stepids</span></code>
a consecutive sequence [0,1,2,…,len(positions)-1] will be assumed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbols</strong> – string list with dimension <code class="docutils literal notranslate"><span class="pre">n</span></code>, where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the
number of atoms (i.e., sites) in the structure.
The same list is used for each step. Normally, the string
should be a valid chemical symbol, but actually any unique
string works and can be used as the name of the atomic kind
(see also the <a class="reference internal" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_structure" title="aiida.orm.nodes.data.array.trajectory.TrajectoryData.get_step_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_step_structure()</span></code></a> method).</p></li>
<li><p><strong>positions</strong> – float array with dimension <img class="math" src="../_images/math/7dd7f53f442f3a3b0bb3e0725c666d1d8e020897.png" alt="s \times n \times 3"/>,
where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the
length of the <code class="docutils literal notranslate"><span class="pre">stepids</span></code> array and <code class="docutils literal notranslate"><span class="pre">n</span></code> is the length
of the <code class="docutils literal notranslate"><span class="pre">symbols</span></code> array. Units are angstrom.
In particular,
<code class="docutils literal notranslate"><span class="pre">positions[i,j,k]</span></code> is the <code class="docutils literal notranslate"><span class="pre">k</span></code>-th component of the
<code class="docutils literal notranslate"><span class="pre">j</span></code>-th atom (or site) in the structure at the time step
with index <code class="docutils literal notranslate"><span class="pre">i</span></code> (identified
by step number <code class="docutils literal notranslate"><span class="pre">step[i]</span></code> and with timestamp <code class="docutils literal notranslate"><span class="pre">times[i]</span></code>).</p></li>
<li><p><strong>stepids</strong> – integer array with dimension <code class="docutils literal notranslate"><span class="pre">s</span></code>, where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the
number of steps. Typically represents an internal counter
within the code. For instance, if you want to store a
trajectory with one step every 10, starting from step 65,
the array will be <code class="docutils literal notranslate"><span class="pre">[65,75,85,...]</span></code>.
No checks are done on duplicate elements
or on the ordering, but anyway this array should be
sorted in ascending order, without duplicate elements.
(If not specified, stepids will be set to <code class="docutils literal notranslate"><span class="pre">numpy.arange(s)</span></code>
by default) It is internally stored as an array named ‘steps’.</p></li>
<li><p><strong>cells</strong> – if specified float array with dimension
<img class="math" src="../_images/math/521d5f645dbd52b09727bacf679fe42cfc7e6ca1.png" alt="s \times 3 \times 3"/>, where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the
length of the <code class="docutils literal notranslate"><span class="pre">stepids</span></code> array. Units are angstrom.
In particular, <code class="docutils literal notranslate"><span class="pre">cells[i,j,k]</span></code> is the <code class="docutils literal notranslate"><span class="pre">k</span></code>-th component
of the <code class="docutils literal notranslate"><span class="pre">j</span></code>-th cell vector at the time step with index
<code class="docutils literal notranslate"><span class="pre">i</span></code> (identified by step number <code class="docutils literal notranslate"><span class="pre">stepid[i]</span></code> and with
timestamp <code class="docutils literal notranslate"><span class="pre">times[i]</span></code>).</p></li>
<li><p><strong>times</strong> – if specified, float array with dimension <code class="docutils literal notranslate"><span class="pre">s</span></code>, where
<code class="docutils literal notranslate"><span class="pre">s</span></code> is the length of the <code class="docutils literal notranslate"><span class="pre">stepids</span></code> array. Contains the
timestamp of each step in picoseconds (ps).</p></li>
<li><p><strong>velocities</strong> – if specified, must be a float array with the same
dimensions of the <code class="docutils literal notranslate"><span class="pre">positions</span></code> array.
The array contains the velocities in the atoms.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Choose suitable units for velocities</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.show_mpl_heatmap">
<code class="sig-name descname">show_mpl_heatmap</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.show_mpl_heatmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.show_mpl_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Show a heatmap of the trajectory with matplotlib.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.show_mpl_pos">
<code class="sig-name descname">show_mpl_pos</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#TrajectoryData.show_mpl_pos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.show_mpl_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows the positions as a function of time, separate for XYZ coordinates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stepsize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The stepsize for the trajectory, set higher than 1 to
reduce number of points</p></li>
<li><p><strong>mintime</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Time to start from</p></li>
<li><p><strong>maxtime</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Maximum time</p></li>
<li><p><strong>elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – A list of atomic symbols that should be displayed.
If not specified, all atoms are displayed.</p></li>
<li><p><strong>indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – A list of indices of that atoms that can be displayed.
If not specified, all atoms of the correct species are displayed.</p></li>
<li><p><strong>dont_block</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If True, interpreter is not blocked when figure is displayed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.trajectory.TrajectoryData.symbols">
<em class="property">property </em><code class="sig-name descname">symbols</code><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.TrajectoryData.symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of symbols, if it has already been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the trajectory has not been set yet.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="aiida.orm.nodes.data.array.trajectory.plot_positions_XYZ">
<code class="sig-prename descclassname">aiida.orm.nodes.data.array.trajectory.</code><code class="sig-name descname">plot_positions_XYZ</code><span class="sig-paren">(</span><em class="sig-param">times</em>, <em class="sig-param">positions</em>, <em class="sig-param">indices_to_show</em>, <em class="sig-param">color_list</em>, <em class="sig-param">label</em>, <em class="sig-param">positions_unit='A'</em>, <em class="sig-param">times_unit='ps'</em>, <em class="sig-param">dont_block=False</em>, <em class="sig-param">mintime=None</em>, <em class="sig-param">maxtime=None</em>, <em class="sig-param">label_sparsity=10</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/trajectory.html#plot_positions_XYZ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.trajectory.plot_positions_XYZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot with matplotlib the positions of the coordinates of the atoms
over time for a trajectory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>times</strong> – array of times</p></li>
<li><p><strong>positions</strong> – array of positions</p></li>
<li><p><strong>indices_to_show</strong> – list of indices of to show (0, 1, 2 for X, Y, Z)</p></li>
<li><p><strong>color_list</strong> – list of valid color specifications for matplotlib</p></li>
<li><p><strong>label</strong> – label for this plot to put in the title</p></li>
<li><p><strong>positions_unit</strong> – label for the units of positions (for the x label)</p></li>
<li><p><strong>times_unit</strong> – label for the units of times (for the y label)</p></li>
<li><p><strong>dont_block</strong> – passed to plt.show() as <code class="docutils literal notranslate"><span class="pre">block=not</span> <span class="pre">dont_block</span></code></p></li>
<li><p><strong>mintime</strong> – if specified, cut the time axis at the specified min value</p></li>
<li><p><strong>maxtime</strong> – if specified, cut the time axis at the specified max value</p></li>
<li><p><strong>label_sparsity</strong> – how often to put a label with the pair (t, coord)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-aiida.orm.nodes.data.array.xy"></span><p>This module defines the classes related to Xy data. That is data that contains
collections of y-arrays bound to a single x-array, and the methods to operate
on them.</p>
<dl class="class">
<dt id="aiida.orm.nodes.data.array.xy.XyData">
<em class="property">class </em><code class="sig-prename descclassname">aiida.orm.nodes.data.array.xy.</code><code class="sig-name descname">XyData</code><span class="sig-paren">(</span><em class="sig-param">backend=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">computer=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aiida.orm.nodes.data.array.array.ArrayData" title="aiida.orm.nodes.data.array.array.ArrayData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.nodes.data.array.array.ArrayData</span></code></a></p>
<p>A subclass designed to handle arrays that have an “XY” relationship to
each other. That is there is one array, the X array, and there are several
Y arrays, which can be considered functions of X.</p>
<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.xy.XyData.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.xy.XyData.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.orm.nodes.data.array.xy'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.xy.XyData._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.xy.XyData._arrayandname_validator">
<code class="sig-name descname">_arrayandname_validator</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">name</em>, <em class="sig-param">units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData._arrayandname_validator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData._arrayandname_validator" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates that the array is an numpy.ndarray and that the name is
of type str. Raises InputValidationError if this not the case.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.xy.XyData._logger">
<code class="sig-name descname">_logger</code><em class="property"> = &lt;Logger aiida.orm.nodes.data.array.xy.XyData (REPORT)&gt;</em><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData._logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.xy.XyData._plugin_type_string">
<code class="sig-name descname">_plugin_type_string</code><em class="property"> = 'data.array.xy.XyData.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData._plugin_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.orm.nodes.data.array.xy.XyData._query_type_string">
<code class="sig-name descname">_query_type_string</code><em class="property"> = 'data.array.xy.'</em><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData._query_type_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.xy.XyData.get_x">
<code class="sig-name descname">get_x</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.get_x"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData.get_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to retrieve the x array and x name raises a NotExistent
exception if no x array has been set yet.
:return x_name: the name set for the x_array
:return x_array: the x array set earlier
:return x_units: the x units set earlier</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.xy.XyData.get_y">
<code class="sig-name descname">get_y</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.get_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData.get_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to retrieve the y arrays and the y names, raises a
NotExistent exception if they have not been set yet, or cannot be
retrieved
:return y_names: list of strings naming the y_arrays
:return y_arrays: list of y_arrays
:return y_units: list of strings giving the units for the y_arrays</p>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.xy.XyData.set_x">
<code class="sig-name descname">set_x</code><span class="sig-paren">(</span><em class="sig-param">x_array</em>, <em class="sig-param">x_name</em>, <em class="sig-param">x_units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.set_x"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData.set_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the array and the name for the x values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_array</strong> – A numpy.ndarray, containing only floats</p></li>
<li><p><strong>x_name</strong> – a string for the x array name</p></li>
<li><p><strong>x_units</strong> – the units of x</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.orm.nodes.data.array.xy.XyData.set_y">
<code class="sig-name descname">set_y</code><span class="sig-paren">(</span><em class="sig-param">y_arrays</em>, <em class="sig-param">y_names</em>, <em class="sig-param">y_units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#XyData.set_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.XyData.set_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Set array(s) for the y part of the dataset. Also checks if the
x_array has already been set, and that, the shape of the y_arrays
agree with the x_array.
:param y_arrays: A list of y_arrays, numpy.ndarray
:param y_names: A list of strings giving the names of the y_arrays
:param y_units: A list of strings giving the units of the y_arrays</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="aiida.orm.nodes.data.array.xy.check_convert_single_to_tuple">
<code class="sig-prename descclassname">aiida.orm.nodes.data.array.xy.</code><code class="sig-name descname">check_convert_single_to_tuple</code><span class="sig-paren">(</span><em class="sig-param">item</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/orm/nodes/data/array/xy.html#check_convert_single_to_tuple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.nodes.data.array.xy.check_convert_single_to_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the item is a list or tuple, and converts it to a list if it is
not already a list or tuple</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>item</strong> – an object which may or may not be a list or tuple</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>item_list: the input item unchanged if list or tuple and [item]
otherwise</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>