

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.backends.sqlalchemy package &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>aiida.backends.sqlalchemy package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/aiida.backends.sqlalchemy.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aiida.backends.sqlalchemy">
<span id="aiida-backends-sqlalchemy-package"></span><h1>aiida.backends.sqlalchemy package<a class="headerlink" href="#module-aiida.backends.sqlalchemy" title="Permalink to this headline">¶</a></h1>
<p>Module with implementation of the database backend using SqlAlchemy.</p>
<dl class="function">
<dt id="aiida.backends.sqlalchemy.get_scoped_session">
<code class="sig-prename descclassname">aiida.backends.sqlalchemy.</code><code class="sig-name descname">get_scoped_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy.html#get_scoped_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.get_scoped_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a scoped session</p>
<p>According to SQLAlchemy docs, this returns always the same object within a thread, and a different object in a
different thread. Moreover, since we update the session class upon forking, different session objects will be used.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.reset_session">
<code class="sig-prename descclassname">aiida.backends.sqlalchemy.</code><code class="sig-name descname">reset_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy.html#reset_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.reset_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the session which means setting the global engine and session factory instances to <cite>None</cite>.</p>
</dd></dl>

<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.html">aiida.backends.sqlalchemy.migrations package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.versions.html">aiida.backends.sqlalchemy.migrations.versions package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.versions.html#module-aiida.backends.sqlalchemy.migrations.versions.041a79fc615f_dblog_cleaning">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.html#module-aiida.backends.sqlalchemy.migrations.env">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aiida.backends.sqlalchemy.models.html">aiida.backends.sqlalchemy.models package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aiida.backends.sqlalchemy.models.html#module-aiida.backends.sqlalchemy.models.authinfo">Submodules</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="module-aiida.backends.sqlalchemy.manage">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-aiida.backends.sqlalchemy.manage" title="Permalink to this headline">¶</a></h2>
<p>Simple wrapper around the alembic command line tool that first loads an AiiDA profile.</p>
<dl class="function">
<dt id="aiida.backends.sqlalchemy.manage.execute_alembic_command">
<code class="sig-prename descclassname">aiida.backends.sqlalchemy.manage.</code><code class="sig-name descname">execute_alembic_command</code><span class="sig-paren">(</span><em class="sig-param">command_name</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manage.html#execute_alembic_command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manage.execute_alembic_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an Alembic CLI command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command_name</strong> – the sub command name</p></li>
<li><p><strong>kwargs</strong> – parameters to pass to the command</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-aiida.backends.sqlalchemy.manager"></span><p>Utilities and configuration of the SqlAlchemy database schema.</p>
<dl class="class">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager">
<em class="property">class </em><code class="sig-prename descclassname">aiida.backends.sqlalchemy.manager.</code><code class="sig-name descname">SqlaBackendManager</code><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.backends.html#aiida.backends.manager.BackendManager" title="aiida.backends.manager.BackendManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.backends.manager.BackendManager</span></code></a></p>
<p>Class to manage the database schema.</p>
<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.backends.sqlalchemy.manager'</em><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager._load_backend_environment">
<code class="sig-name descname">_load_backend_environment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager._load_backend_environment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager._load_backend_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the backend environment.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager._migrate_database_version">
<code class="sig-name descname">_migrate_database_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager._migrate_database_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager._migrate_database_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Migrate the database to the current schema version.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.alembic_config">
<em class="property">static </em><code class="sig-name descname">alembic_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.alembic_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.alembic_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to return an instance of an Alembic configuration with the current connection inserted.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">alembic.config.Config</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_schema_version_code">
<code class="sig-name descname">get_schema_version_code</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.get_schema_version_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_schema_version_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the code schema version.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_schema_version_database">
<code class="sig-name descname">get_schema_version_database</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.get_schema_version_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_schema_version_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the database schema version.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>distutils.version.StrictVersion</cite> with schema version of the database</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_schema_version_reset">
<code class="sig-name descname">get_schema_version_reset</code><span class="sig-paren">(</span><em class="sig-param">schema_generation_code</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.get_schema_version_reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_schema_version_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return schema version the database should have to be able to automatically reset to code schema generation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema_generation_code</strong> – the schema generation of the code.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>schema version</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_settings_manager">
<code class="sig-name descname">get_settings_manager</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.get_settings_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.get_settings_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of the <cite>SettingsManager</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>SettingsManager</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.is_database_schema_ahead">
<code class="sig-name descname">is_database_schema_ahead</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.is_database_schema_ahead"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.is_database_schema_ahead" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether the database schema version is ahead of the code schema version.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>this will not check whether the schema generations are equal</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>boolean, True if the database schema version is ahead of the code schema version.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.reset_backend_environment">
<code class="sig-name descname">reset_backend_environment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.reset_backend_environment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.reset_backend_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the backend environment.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaBackendManager.set_schema_version_database">
<code class="sig-name descname">set_schema_version_database</code><span class="sig-paren">(</span><em class="sig-param">version</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaBackendManager.set_schema_version_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaBackendManager.set_schema_version_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the database schema version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> – string with schema version to set</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.backends.sqlalchemy.manager.SqlaSettingsManager">
<em class="property">class </em><code class="sig-prename descclassname">aiida.backends.sqlalchemy.manager.</code><code class="sig-name descname">SqlaSettingsManager</code><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaSettingsManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaSettingsManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.backends.html#aiida.backends.manager.SettingsManager" title="aiida.backends.manager.SettingsManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.backends.manager.SettingsManager</span></code></a></p>
<p>Class to get, set and delete settings from the <cite>DbSettings</cite> table.</p>
<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.manager.SqlaSettingsManager.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.backends.sqlalchemy.manager'</em><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaSettingsManager.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaSettingsManager.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaSettingsManager.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaSettingsManager.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the setting with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – the key identifying the setting</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><cite>~aiida.common.exceptions.NotExistent</cite> if the settings does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaSettingsManager.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaSettingsManager.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaSettingsManager.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the setting with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – the key identifying the setting</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Setting</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><cite>~aiida.common.exceptions.NotExistent</cite> if the settings does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaSettingsManager.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">value</em>, <em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaSettingsManager.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaSettingsManager.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the settings with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – the key identifying the setting</p></li>
<li><p><strong>value</strong> – the value for the setting</p></li>
<li><p><strong>description</strong> – optional setting description</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.manager.SqlaSettingsManager.table_name">
<code class="sig-name descname">table_name</code><em class="property"> = 'db_dbsetting'</em><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaSettingsManager.table_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.manager.SqlaSettingsManager.validate_table_existence">
<code class="sig-name descname">validate_table_existence</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/manager.html#SqlaSettingsManager.validate_table_existence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.manager.SqlaSettingsManager.validate_table_existence" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the <cite>DbSetting</cite> table actually exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><cite>~aiida.common.exceptions.NotExistent</cite> if the settings table does not exist</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.backends.sqlalchemy.queries"></span><p>Module to manage custom queries under SQLA backend.</p>
<dl class="class">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager">
<em class="property">class </em><code class="sig-prename descclassname">aiida.backends.sqlalchemy.queries.</code><code class="sig-name descname">SqlaQueryManager</code><span class="sig-paren">(</span><em class="sig-param">backend</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/queries.html#SqlaQueryManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.backends.general.html#aiida.backends.general.abstractqueries.AbstractQueryManager" title="aiida.backends.general.abstractqueries.AbstractQueryManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.backends.general.abstractqueries.AbstractQueryManager</span></code></a></p>
<p>SQLAlchemy implementation of custom queries, for efficiency reasons.</p>
<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.backends.sqlalchemy.queries'</em><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager.get_creation_statistics">
<code class="sig-name descname">get_creation_statistics</code><span class="sig-paren">(</span><em class="sig-param">user_pk=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/queries.html#SqlaQueryManager.get_creation_statistics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager.get_creation_statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary with the statistics of node creation, summarized by day,
optimized for the Django backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>Days when no nodes were created are not present in the returned <cite>ctime_by_day</cite> dictionary.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>user_pk</strong> – If None (default), return statistics for all users.
If user pk is specified, return only the statistics for the given user.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>a dictionary as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="n">TOTAL_NUM_OF_NODES</span><span class="p">,</span>
   <span class="s2">&quot;types&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">TYPESTRING1</span><span class="p">:</span> <span class="n">count</span><span class="p">,</span> <span class="n">TYPESTRING2</span><span class="p">:</span> <span class="n">count</span><span class="p">,</span> <span class="o">...</span><span class="p">},</span>
   <span class="s2">&quot;ctime_by_day&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;YYYY-MMM-DD&#39;</span><span class="p">:</span> <span class="n">count</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>where in <cite>ctime_by_day</cite> the key is a string in the format ‘YYYY-MM-DD’ and the value is
an integer with the number of nodes created that day.</p>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.backends.sqlalchemy.testbase"></span><p>This module contains the codebase for the setUpClass and tearDown methods used
internally by the AiidaTestCase. This inherits only from ‘object’ to avoid
that it is picked up by the automatic discovery of tests
(It shouldn’t, as it risks to destroy the DB if there are not the checks
in place, and these are implemented in the AiidaTestCase.</p>
<dl class="class">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests">
<em class="property">class </em><code class="sig-prename descclassname">aiida.backends.sqlalchemy.testbase.</code><code class="sig-name descname">SqlAlchemyTests</code><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/testbase.html#SqlAlchemyTests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.backends.html#aiida.backends.testimplbase.AiidaTestImplementation" title="aiida.backends.testimplbase.AiidaTestImplementation"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.backends.testimplbase.AiidaTestImplementation</span></code></a></p>
<p>Base class to test SQLA-related functionalities.</p>
<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.backends.sqlalchemy.testbase'</em><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests._backend">
<code class="sig-name descname">_backend</code><em class="property"> = None</em><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests._backend" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.backend">
<em class="property">property </em><code class="sig-name descname">backend</code><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the backend.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.clean_db">
<code class="sig-name descname">clean_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/testbase.html#SqlAlchemyTests.clean_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.clean_db" title="Permalink to this definition">¶</a></dt>
<dd><p>This method implements the logic to fully clean the DB.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.connection">
<code class="sig-name descname">connection</code><em class="property"> = None</em><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.setUpClass_method">
<code class="sig-name descname">setUpClass_method</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/testbase.html#SqlAlchemyTests.setUpClass_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.setUpClass_method" title="Permalink to this definition">¶</a></dt>
<dd><p>This class prepares the database (cleans it up and installs some basic entries).
You have also to set a self.computer and a self.user_email as explained in the docstring of the
AiidaTestImplemention docstring.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.tearDownClass_method">
<code class="sig-name descname">tearDownClass_method</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/testbase.html#SqlAlchemyTests.tearDownClass_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.testbase.SqlAlchemyTests.tearDownClass_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Backend-specific tasks for tearing down the test environment.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.backends.sqlalchemy.utils"></span><p>Utility functions specific to the SqlAlchemy backend.</p>
<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.delete_nodes_and_connections_sqla">
<code class="sig-prename descclassname">aiida.backends.sqlalchemy.utils.</code><code class="sig-name descname">delete_nodes_and_connections_sqla</code><span class="sig-paren">(</span><em class="sig-param">pks_to_delete</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#delete_nodes_and_connections_sqla"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.delete_nodes_and_connections_sqla" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all nodes corresponding to pks in the input.
:param pks_to_delete: A list, tuple or set of pks that should be deleted.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.flag_modified">
<code class="sig-prename descclassname">aiida.backends.sqlalchemy.utils.</code><code class="sig-name descname">flag_modified</code><span class="sig-paren">(</span><em class="sig-param">instance</em>, <em class="sig-param">key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#flag_modified"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.flag_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around <cite>sqlalchemy.orm.attributes.flag_modified</cite> to correctly dereference utils.ModelWrapper</p>
<p>Since SqlAlchemy 1.2.12 (and maybe earlier but not in 1.0.19) the flag_modified function will check that the
key is actually present in the instance or it will except. If we pass a model instance, wrapped in the ModelWrapper
the call will raise an InvalidRequestError. In this function that wraps the flag_modified of SqlAlchemy, we
derefence the model instance if the passed instance is actually wrapped in the ModelWrapper.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.get_pg_tc">
<code class="sig-prename descclassname">aiida.backends.sqlalchemy.utils.</code><code class="sig-name descname">get_pg_tc</code><span class="sig-paren">(</span><em class="sig-param">links_table_name</em>, <em class="sig-param">links_table_input_field</em>, <em class="sig-param">links_table_output_field</em>, <em class="sig-param">closure_table_name</em>, <em class="sig-param">closure_table_parent_field</em>, <em class="sig-param">closure_table_child_field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#get_pg_tc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.get_pg_tc" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the transitive closure table template</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.install_tc">
<code class="sig-prename descclassname">aiida.backends.sqlalchemy.utils.</code><code class="sig-name descname">install_tc</code><span class="sig-paren">(</span><em class="sig-param">session</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#install_tc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.install_tc" title="Permalink to this definition">¶</a></dt>
<dd><p>Install the transitive closure table with SqlAlchemy.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>