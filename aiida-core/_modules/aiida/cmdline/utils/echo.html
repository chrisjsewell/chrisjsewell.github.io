

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.cmdline.utils.echo &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/togglebutton.js"></script>
        <script src="../../../../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../aiida.html">aiida</a> &raquo;</li>
        
      <li>aiida.cmdline.utils.echo</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for aiida.cmdline.utils.echo</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">###########################################################################</span>
<span class="c1"># Copyright (c), The AiiDA team. All rights reserved.                     #</span>
<span class="c1"># This file is part of the AiiDA code.                                    #</span>
<span class="c1">#                                                                         #</span>
<span class="c1"># The code is hosted on GitHub at https://github.com/aiidateam/aiida-core #</span>
<span class="c1"># For further information on the license, see the LICENSE.txt file        #</span>
<span class="c1"># For further information please visit http://www.aiida.net               #</span>
<span class="c1">###########################################################################</span>
<span class="sd">&quot;&quot;&quot; Convenience functions for printing output from verdi commands &quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">IntEnum</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="kn">import</span> <span class="nn">click</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;echo&#39;</span><span class="p">,</span> <span class="s1">&#39;echo_info&#39;</span><span class="p">,</span> <span class="s1">&#39;echo_success&#39;</span><span class="p">,</span> <span class="s1">&#39;echo_warning&#39;</span><span class="p">,</span> <span class="s1">&#39;echo_error&#39;</span><span class="p">,</span> <span class="s1">&#39;echo_critical&#39;</span><span class="p">,</span> <span class="s1">&#39;echo_highlight&#39;</span><span class="p">,</span>
    <span class="s1">&#39;echo_dictionary&#39;</span>
<span class="p">)</span>


<span class="c1"># pylint: disable=too-few-public-methods</span>
<span class="k">class</span> <span class="nc">ExitCode</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exit codes for the verdi command line.&quot;&quot;&quot;</span>
    <span class="n">CRITICAL</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">DEPRECATED</span> <span class="o">=</span> <span class="mi">80</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mi">99</span>
    <span class="n">SUCCESS</span> <span class="o">=</span> <span class="mi">0</span>


<span class="n">COLORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
    <span class="s1">&#39;highlight&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
    <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
    <span class="s1">&#39;warning&#39;</span><span class="p">:</span> <span class="s1">&#39;bright_yellow&#39;</span><span class="p">,</span>
    <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
    <span class="s1">&#39;critical&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
    <span class="s1">&#39;deprecated&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">BOLD</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># whether colors are used together with &#39;bold&#39;</span>


<span class="c1"># pylint: disable=invalid-name</span>
<div class="viewcode-block" id="echo"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo">[docs]</a><span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print a normal message through click&#39;s echo function to stdout</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param err: whether to print to stderr</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="echo_info"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo_info">[docs]</a><span class="k">def</span> <span class="nf">echo_info</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print an info message through click&#39;s echo function to stdout, prefixed with &#39;Info:&#39;</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param err: whether to print to stderr</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Info: &#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="s1">&#39;info&#39;</span><span class="p">],</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="echo_success"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo_success">[docs]</a><span class="k">def</span> <span class="nf">echo_success</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print a success message through click&#39;s echo function to stdout, prefixed with &#39;Success:&#39;</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">        include a newline character</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param err: whether to print to stderr</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Success: &#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">],</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="echo_warning"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo_warning">[docs]</a><span class="k">def</span> <span class="nf">echo_warning</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print a warning message through click&#39;s echo function to stdout, prefixed with &#39;Warning:&#39;</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param err: whether to print to stderr</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Warning: &#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="s1">&#39;warning&#39;</span><span class="p">],</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="echo_error"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo_error">[docs]</a><span class="k">def</span> <span class="nf">echo_error</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print an error message through click&#39;s echo function to stdout, prefixed with &#39;Error:&#39;</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param err: whether to print to stderr</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Error: &#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">],</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="echo_critical"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo_critical">[docs]</a><span class="k">def</span> <span class="nf">echo_critical</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print an error message through click&#39;s echo function to stdout, prefixed with &#39;Critical:&#39;</span>
<span class="sd">    and then calls sys.exit with the given exit_status.</span>

<span class="sd">    This should be used to print messages for errors that cannot be recovered</span>
<span class="sd">    from and so the script should be directly terminated with a non-zero exit</span>
<span class="sd">    status to indicate that the command failed</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param err: whether to print to stderr</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Critical: &#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="s1">&#39;critical&#39;</span><span class="p">],</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">)</span></div>


<div class="viewcode-block" id="echo_highlight"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo_highlight">[docs]</a><span class="k">def</span> <span class="nf">echo_highlight</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;highlight&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print a highlighted message to stdout</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param color: a color from COLORS</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="n">color</span><span class="p">])</span></div>


<span class="c1"># pylint: disable=redefined-builtin</span>
<span class="k">def</span> <span class="nf">echo_deprecated</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exit</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print an error message through click&#39;s echo function to stdout, prefixed with &#39;Deprecated:&#39;</span>
<span class="sd">    and then calls sys.exit with the given exit_status.</span>

<span class="sd">    This should be used to indicate deprecated commands.</span>

<span class="sd">    :param message: the string representing the message to print</span>
<span class="sd">    :param bold: whether to print the message in bold</span>
<span class="sd">    :param nl: whether to print a newline at the end of the message</span>
<span class="sd">    :param err: whether to print to stderr</span>
<span class="sd">    :param exit: whether to exit after printing the message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Deprecated: &#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="s1">&#39;deprecated&#39;</span><span class="p">],</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="n">bold</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="n">nl</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exit</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">DEPRECATED</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">echo_formatted_list</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">attributes</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">highlight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hide</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Print a collection of entries as a formatted list, one entry per line.</span>

<span class="sd">    :param collection: a list of objects</span>
<span class="sd">    :param attributes: a list of attributes to print for each entry in the collection</span>
<span class="sd">    :param sort: optional lambda to sort the collection</span>
<span class="sd">    :param highlight: optional lambda to highlight an entry in the collection if it returns True</span>
<span class="sd">    :param hide: optional lambda to skip an entry if it returns True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sort</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sort</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="n">collection</span>

    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{symbol}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39; </span><span class="si">{}</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">hide</span> <span class="ow">and</span> <span class="n">hide</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">attribute</span><span class="p">)</span> <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">highlight</span> <span class="ow">and</span> <span class="n">highlight</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">),</span> <span class="n">fg</span><span class="o">=</span><span class="n">COLORS</span><span class="p">[</span><span class="s1">&#39;highlight&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">_format_dictionary_json_date</span><span class="p">(</span><span class="n">dictionary</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary formatted as a string using the json format and converting dates to strings.&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">aiida.common</span> <span class="kn">import</span> <span class="n">json</span>

    <span class="k">def</span> <span class="nf">default_jsondump</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Function needed to decode datetimes, that would otherwise not be JSON-decodable.&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">datetime</span>
        <span class="kn">from</span> <span class="nn">aiida.common</span> <span class="kn">import</span> <span class="n">timezone</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">timezone</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S.</span><span class="si">%f</span><span class="s1">%z&#39;</span><span class="p">)</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; is not JSON serializable&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default_jsondump</span><span class="p">)</span>


<span class="n">VALID_DICT_FORMATS_MAPPING</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(((</span><span class="s1">&#39;json+date&#39;</span><span class="p">,</span> <span class="n">_format_dictionary_json_date</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;yaml&#39;</span><span class="p">,</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">),</span>
                                          <span class="p">(</span><span class="s1">&#39;yaml_expanded&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">))))</span>


<div class="viewcode-block" id="echo_dictionary"><a class="viewcode-back" href="../../../../apidoc/aiida.cmdline.utils.html#aiida.cmdline.echo_dictionary">[docs]</a><span class="k">def</span> <span class="nf">echo_dictionary</span><span class="p">(</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;json+date&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print the given dictionary to stdout in the given format</span>

<span class="sd">    :param dictionary: the dictionary</span>
<span class="sd">    :param fmt: the format to use for printing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">format_function</span> <span class="o">=</span> <span class="n">VALID_DICT_FORMATS_MAPPING</span><span class="p">[</span><span class="n">fmt</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">VALID_DICT_FORMATS_MAPPING</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Unrecognised printing format. Valid formats are: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">formats</span><span class="p">))</span>

    <span class="n">echo</span><span class="p">(</span><span class="n">format_function</span><span class="p">(</span><span class="n">dictionary</span><span class="p">))</span></div>


<span class="k">def</span> <span class="nf">is_stdout_redirected</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Determines if the standard output is redirected.</span>

<span class="sd">    For cases where the standard output is redirected and you want to</span>
<span class="sd">    inform the user without messing up the output. Example::</span>

<span class="sd">        echo.echo_info(&quot;Found {} results&quot;.format(qb.count()), err=echo.is_stdout_redirected)</span>
<span class="sd">        echo.echo(tabulate.tabulate(qb.all()))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=no-member</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">isatty</span><span class="p">()</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>