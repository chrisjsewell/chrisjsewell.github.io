

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.tools.groups.paths &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/togglebutton.js"></script>
        <script src="../../../../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../aiida.html">aiida</a> &raquo;</li>
        
      <li>aiida.tools.groups.paths</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for aiida.tools.groups.paths</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">###########################################################################</span>
<span class="c1"># Copyright (c), The AiiDA team. All rights reserved.                     #</span>
<span class="c1"># This file is part of the AiiDA code.                                    #</span>
<span class="c1">#                                                                         #</span>
<span class="c1"># The code is hosted on GitHub at https://github.com/aiidateam/aiida-core #</span>
<span class="c1"># For further information on the license, see the LICENSE.txt file        #</span>
<span class="c1"># For further information please visit http://www.aiida.net               #</span>
<span class="c1">###########################################################################</span>
<span class="sd">&quot;&quot;&quot;Provides functionality for managing large numbers of AiiDA Groups, via label delimitation.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">total_ordering</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>  <span class="c1"># pylint: disable=unused-import</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">from</span> <span class="nn">aiida</span> <span class="kn">import</span> <span class="n">orm</span>
<span class="kn">from</span> <span class="nn">aiida.common.exceptions</span> <span class="kn">import</span> <span class="n">NotExistent</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;GroupPath&#39;</span><span class="p">,</span> <span class="s1">&#39;InvalidPath&#39;</span><span class="p">,</span> <span class="s1">&#39;GroupNotFoundError&#39;</span><span class="p">,</span> <span class="s1">&#39;GroupNotUniqueError&#39;</span><span class="p">,</span> <span class="s1">&#39;NoGroupsInPathError&#39;</span><span class="p">)</span>

<span class="n">REGEX_ATTR</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;^[a-zA-Z][</span><span class="se">\\</span><span class="s1">_a-zA-Z0-9]*$&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="InvalidPath"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.InvalidPath">[docs]</a><span class="k">class</span> <span class="nc">InvalidPath</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An exception to indicate that a path is not valid.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="GroupNotFoundError"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupNotFoundError">[docs]</a><span class="k">class</span> <span class="nc">GroupNotFoundError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An exception raised when a path does not have an associated group.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="GroupNotFoundError.__init__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupNotFoundError.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grouppath</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;No such group: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grouppath</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="GroupNotUniqueError"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupNotUniqueError">[docs]</a><span class="k">class</span> <span class="nc">GroupNotUniqueError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An exception raised when a path has multiple associated groups.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="GroupNotUniqueError.__init__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupNotUniqueError.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grouppath</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;The path is not unique: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grouppath</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="NoGroupsInPathError"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.NoGroupsInPathError">[docs]</a><span class="k">class</span> <span class="nc">NoGroupsInPathError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An exception raised when a path has multiple associated groups.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NoGroupsInPathError.__init__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.NoGroupsInPathError.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grouppath</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;The path does not contain any descendant groups: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grouppath</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div></div>


<span class="n">WalkNodeResult</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;WalkNodeResult&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;group_path&#39;</span><span class="p">,</span> <span class="s1">&#39;node&#39;</span><span class="p">])</span>


<div class="viewcode-block" id="GroupPath"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath">[docs]</a><span class="nd">@total_ordering</span>
<span class="k">class</span> <span class="nc">GroupPath</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A class to provide label delimited access to groups.</span>

<span class="sd">    See tests for usage examples.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="GroupPath.__init__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">orm</span><span class="o">.</span><span class="n">Group</span><span class="p">,</span> <span class="n">warn_invalid_child</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># type: (str, Optional[str], Optional[GroupPath])</span>
        <span class="sd">&quot;&quot;&quot;Instantiate the class.</span>

<span class="sd">        :param path: The initial path of the group.</span>
<span class="sd">        :param cls: The subclass of `Group` to operate on.</span>
<span class="sd">        :param warn_invalid_child: Issue a warning, when iterating children, if a child path is invalid.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">orm</span><span class="o">.</span><span class="n">Group</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;cls must a subclass of Group: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cls</span> <span class="o">=</span> <span class="bp">cls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="p">)</span> <span class="k">if</span> <span class="n">path</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_warn_invalid_child</span> <span class="o">=</span> <span class="n">warn_invalid_child</span></div>

<div class="viewcode-block" id="GroupPath._validate_path"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath._validate_path">[docs]</a>    <span class="k">def</span> <span class="nf">_validate_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validate the supplied path.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">path</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span> <span class="o">*</span> <span class="mi">2</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidPath</span><span class="p">(</span><span class="s2">&quot;The path may not contain a duplicate delimiter &#39;</span><span class="si">{}</span><span class="s2">&#39;: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="p">)</span> <span class="ow">or</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">InvalidPath</span><span class="p">(</span><span class="s2">&quot;The path may not start/end with the delimiter &#39;</span><span class="si">{}</span><span class="s2">&#39;: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">path</span></div>

<div class="viewcode-block" id="GroupPath.__repr__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Represent the instantiated class.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(&#39;</span><span class="si">{}</span><span class="s2">&#39;, cls=&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupPath.__eq__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c1"># type: (Any) -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Compare equality of path and ``Group`` subclass to another ``GroupPath`` object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">GroupPath</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupPath.__lt__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__lt__">[docs]</a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c1"># type: (Any) -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Compare less-than operator of path and ``Group`` subclass to another ``GroupPath`` object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">GroupPath</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Return the path string.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_string</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; List[str]</span>
        <span class="sd">&quot;&quot;&quot;Return a list of the path components.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span><span class="p">[:]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Return the final component of the the path.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">delimiter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Return the delimiter used to split path into components.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Return the cls used to query for and instantiate a ``Group`` with.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cls</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Optional[GroupPath]</span>
        <span class="sd">&quot;&quot;&quot;Return the parent path.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">GroupPath</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_list</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span> <span class="n">warn_invalid_child</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_warn_invalid_child</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="GroupPath.__truediv__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__truediv__">[docs]</a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; GroupPath</span>
        <span class="sd">&quot;&quot;&quot;Return a child ``GroupPath``, with a new path formed by appending ``path`` to the current path.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;path is not a string: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">GroupPath</span><span class="p">(</span>
            <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">delimiter</span> <span class="o">+</span> <span class="n">path</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="k">else</span> <span class="n">path</span><span class="p">,</span>
            <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span>
            <span class="n">warn_invalid_child</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_warn_invalid_child</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">child</span></div>

<div class="viewcode-block" id="GroupPath.__getitem__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; GroupPath</span>
        <span class="sd">&quot;&quot;&quot;Return a child ``GroupPath``, with a new path formed by appending ``path`` to the current path.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__truediv__</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupPath.get_group"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.get_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Optional[self.cls]</span>
        <span class="sd">&quot;&quot;&quot;Return the concrete group associated with this path.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">orm</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span> <span class="n">subclassing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">})</span><span class="o">.</span><span class="n">one</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">NotExistent</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">group_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; List[int]</span>
        <span class="sd">&quot;&quot;&quot;Return all the UUID associated with this GroupPath.</span>

<span class="sd">        :returns: and empty list, if no group associated with this label,</span>
<span class="sd">            or can be multiple if cls was None</span>

<span class="sd">        This is an efficient method for checking existence,</span>
<span class="sd">        which does not require the (slow) loading of the ORM entity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">}</span>
        <span class="n">query</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span> <span class="n">subclassing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_virtual</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Return whether there is one or more concrete groups associated with this path.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group_ids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<div class="viewcode-block" id="GroupPath.get_or_create_group"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.get_or_create_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_or_create_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; (self.cls, bool)</span>
        <span class="sd">&quot;&quot;&quot;Return the concrete group associated with this path or, create it, if it does not already exist.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupPath.delete_group"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.delete_group">[docs]</a>    <span class="k">def</span> <span class="nf">delete_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete the concrete group associated with this path.</span>

<span class="sd">        :raises: GroupNotFoundError, GroupNotUniqueError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_ids</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupNotFoundError</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupNotUniqueError</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Iterable[GroupPath]</span>
        <span class="sd">&quot;&quot;&quot;Iterate through all (direct) children of this path.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="n">filters</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;like&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">delimiter</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">}</span>
        <span class="n">query</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span> <span class="n">subclassing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s1">&#39;label&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_virtual</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoGroupsInPathError</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">yielded</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label</span><span class="p">,)</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">iterall</span><span class="p">():</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">path_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">path_string</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">yielded</span> <span class="ow">and</span> <span class="n">path</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span><span class="p">)]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_list</span><span class="p">):</span>
                <span class="n">yielded</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path_string</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">GroupPath</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path_string</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span> <span class="n">warn_invalid_child</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_warn_invalid_child</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">InvalidPath</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_warn_invalid_child</span><span class="p">:</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;invalid path encountered: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path_string</span><span class="p">))</span>  <span class="c1"># pylint: disable=no-member</span>

<div class="viewcode-block" id="GroupPath.__iter__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Iterable[GroupPath]</span>
        <span class="sd">&quot;&quot;&quot;Iterate through all (direct) children of this path.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span></div>

<div class="viewcode-block" id="GroupPath.__len__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; int</span>
        <span class="sd">&quot;&quot;&quot;Return the number of children for this path.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupPath.__contains__"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Return whether a child exists for this key.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">path_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="GroupPath.walk"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.walk">[docs]</a>    <span class="k">def</span> <span class="nf">walk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">return_virtual</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Iterable[GroupPath]</span>
        <span class="sd">&quot;&quot;&quot;Recursively iterate through all children of this path.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">return_virtual</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">child</span><span class="o">.</span><span class="n">is_virtual</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">child</span>
            <span class="k">for</span> <span class="n">sub_child</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">return_virtual</span><span class="o">=</span><span class="n">return_virtual</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">return_virtual</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">sub_child</span><span class="o">.</span><span class="n">is_virtual</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">sub_child</span></div>

<div class="viewcode-block" id="GroupPath.walk_nodes"><a class="viewcode-back" href="../../../../apidoc/aiida.tools.groups.html#aiida.tools.groups.GroupPath.walk_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">walk_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">node_class</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">query_batch</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Iterable[WalkNodeResult]</span>
        <span class="sd">&quot;&quot;&quot;Recursively iterate through all nodes of this path and its children.</span>

<span class="sd">        :param filters: filters to apply to the node query</span>
<span class="sd">        :param node_class: return only nodes of a certain class (or list of classes)</span>
<span class="sd">        :param int batch_size: The size of the batches to ask the backend to batch results in subcollections.</span>
<span class="sd">            You can optimize the speed of the query by tuning this parameter.</span>
<span class="sd">            Be aware though that is only safe if no commit will take place during this transaction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
        <span class="n">group_filters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="n">group_filters</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;or&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;==&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;like&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">delimiter</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">}]}</span>
        <span class="n">query</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span> <span class="n">subclassing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="n">group_filters</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;group&#39;</span><span class="p">)</span>
        <span class="n">query</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">orm</span><span class="o">.</span><span class="n">Node</span> <span class="k">if</span> <span class="n">node_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">node_class</span><span class="p">,</span>
            <span class="n">with_group</span><span class="o">=</span><span class="s1">&#39;group&#39;</span><span class="p">,</span>
            <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span>
            <span class="n">project</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">iterall</span><span class="p">(</span><span class="n">query_batch</span><span class="p">)</span> <span class="k">if</span> <span class="n">query_batch</span> <span class="k">else</span> <span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="k">yield</span> <span class="n">WalkNodeResult</span><span class="p">(</span><span class="n">GroupPath</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">),</span> <span class="n">node</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">browse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a ``GroupAttr`` instance, for attribute access to children.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">GroupAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">GroupAttr</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A class to provide attribute access to a ``GroupPath`` children.</span>

<span class="sd">    The only public attributes on this class are dynamically created from the ``GroupPath`` child keys.</span>
<span class="sd">    NOTE: any child keys that do not conform to an acceptable (public) attribute string will be ignored.</span>
<span class="sd">    The ``GroupPath`` can be retrieved *via* a function call, e.g.::</span>

<span class="sd">        group_path = GroupPath()</span>
<span class="sd">        group_attr = GroupAttr(group_path)</span>
<span class="sd">        group_attr.a.b.c() == GroupPath(&quot;a/b/c&quot;)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_path</span><span class="p">):</span>
        <span class="c1"># type: (GroupPath)</span>
        <span class="sd">&quot;&quot;&quot;Instantiate the ``GroupPath``, and a mapping of its children.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_group_path</span> <span class="o">=</span> <span class="n">group_path</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Represent the instantiated class.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(&#39;</span><span class="si">{}</span><span class="s2">&#39;, type=&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_path</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_path</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; GroupPath</span>
        <span class="sd">&quot;&quot;&quot;Return the ``GroupPath``.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_path</span>

    <span class="k">def</span> <span class="fm">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of available attributes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">path_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_path</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">REGEX_ATTR</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">path_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])]</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; GroupAttr</span>
        <span class="sd">&quot;&quot;&quot;Return the requested attribute name.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_path</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="n">child</span><span class="o">.</span><span class="n">path_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">GroupAttr</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>