

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.manage.external package &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>aiida.manage.external package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/aiida.manage.external.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aiida.manage.external">
<span id="aiida-manage-external-package"></span><h1>aiida.manage.external package<a class="headerlink" href="#module-aiida.manage.external" title="Permalink to this headline">¶</a></h1>
<p>User facing APIs to control AiiDA from the verdi cli, scripts or plugins</p>
<div class="section" id="module-aiida.manage.external.pgsu">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-aiida.manage.external.pgsu" title="Permalink to this headline">¶</a></h2>
<p>Connect to an existing PostgreSQL cluster as the <cite>postgres</cite> superuser and execute SQL commands.</p>
<dl class="simple">
<dt>Note: Once the API of this functionality has converged, this module should be moved out of aiida-core and into a</dt><dd><p>separate package that can then be tested on multiple OS / postgres setups. Therefore, <strong>please keep this
module entirely AiiDA-agnostic</strong>.</p>
</dd>
</dl>
<span class="target" id="module-aiida.manage.external.postgres"></span><p>Provides an API for postgres database maintenance tasks.</p>
<p>This API creates and drops postgres users and databases used by the
<code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">quicksetup</span></code> commandline tool. It allows convenient access to this
functionality from within python without knowing details about how postgres is
installed by default on various systems. If the postgres setup is not the
default installation, additional information needs to be provided.</p>
<dl class="class">
<dt id="aiida.manage.external.postgres.Postgres">
<em class="property">class </em><code class="sig-prename descclassname">aiida.manage.external.postgres.</code><code class="sig-name descname">Postgres</code><span class="sig-paren">(</span><em class="sig-param">dbinfo=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pgsu.PGSU</span></code></p>
<p>Adds convenience functions to <code class="xref py py-class docutils literal notranslate"><span class="pre">pgsu.PGSU</span></code>.</p>
<dl class="simple">
<dt>Provides convenience functions for</dt><dd><ul class="simple">
<li><p>creating/dropping users</p></li>
<li><p>creating/dropping databases</p></li>
</ul>
</dd>
</dl>
<p>etc.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">postgres</span> <span class="o">=</span> <span class="n">Postgres</span><span class="p">()</span>
<span class="n">postgres</span><span class="o">.</span><span class="n">create_dbuser</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">postgres</span><span class="o">.</span><span class="n">db_exists</span><span class="p">(</span><span class="s1">&#39;dbname&#39;</span><span class="p">):</span>
    <span class="n">postgres</span><span class="o">.</span><span class="n">create_db</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;dbname&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">dbinfo=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>See documentation of <code class="xref py py-meth docutils literal notranslate"><span class="pre">pgsu.PGSU.__init__()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.manage.external.postgres.Postgres.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.manage.external.postgres'</em><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.check_db">
<code class="sig-name descname">check_db</code><span class="sig-paren">(</span><em class="sig-param">dbname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.check_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.check_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks up if a database with the name exists, prompts for using or creating a differently named one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the database to be created or reused.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple (dbname, created)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.check_dbuser">
<code class="sig-name descname">check_dbuser</code><span class="sig-paren">(</span><em class="sig-param">dbuser</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.check_dbuser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.check_dbuser" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks up if a given user already exists, prompts for using or creating a differently named one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbuser</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the user to be created or reused.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple (dbuser, created)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.copy_db">
<code class="sig-name descname">copy_db</code><span class="sig-paren">(</span><em class="sig-param">src_db</em>, <em class="sig-param">dest_db</em>, <em class="sig-param">dbuser</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.copy_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.copy_db" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.create_db">
<code class="sig-name descname">create_db</code><span class="sig-paren">(</span><em class="sig-param">dbuser</em>, <em class="sig-param">dbname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.create_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.create_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a database in postgres</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dbuser</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the user which should own the db.</p></li>
<li><p><strong>dbname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the database.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.create_dbuser">
<code class="sig-name descname">create_dbuser</code><span class="sig-paren">(</span><em class="sig-param">dbuser</em>, <em class="sig-param">dbpass</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.create_dbuser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.create_dbuser" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a database user in postgres</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dbuser</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the user to be created.</p></li>
<li><p><strong>dbpass</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Password the user should be given.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>psycopg2.errors.DuplicateObject if user already exists and
self.connection_mode == PostgresConnectionMode.PSYCOPG</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.create_dbuser_db_safe">
<code class="sig-name descname">create_dbuser_db_safe</code><span class="sig-paren">(</span><em class="sig-param">dbname</em>, <em class="sig-param">dbuser</em>, <em class="sig-param">dbpass</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.create_dbuser_db_safe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.create_dbuser_db_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Create DB and user + grant privileges.</p>
<p>Prompts when reusing existing users / databases.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.db_exists">
<code class="sig-name descname">db_exists</code><span class="sig-paren">(</span><em class="sig-param">dbname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.db_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.db_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check wether a postgres database with dbname exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the database to check for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(bool), True if database exists, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.dbinfo">
<em class="property">property </em><code class="sig-name descname">dbinfo</code><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.dbinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for Postgres.dsn.</p>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.dbuser_exists">
<code class="sig-name descname">dbuser_exists</code><span class="sig-paren">(</span><em class="sig-param">dbuser</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.dbuser_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.dbuser_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Find out if postgres user with name dbuser exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbuser</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – database user to check for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(bool) True if user exists, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.drop_db">
<code class="sig-name descname">drop_db</code><span class="sig-paren">(</span><em class="sig-param">dbname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.drop_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.drop_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop a database in postgres</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the database.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.drop_dbuser">
<code class="sig-name descname">drop_dbuser</code><span class="sig-paren">(</span><em class="sig-param">dbuser</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.drop_dbuser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.drop_dbuser" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop a database user in postgres</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbuser</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of the user to be dropped.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.from_profile">
<em class="property">classmethod </em><code class="sig-name descname">from_profile</code><span class="sig-paren">(</span><em class="sig-param">profile</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/postgres.html#Postgres.from_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.from_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Postgres instance with dbinfo from AiiDA profile data.</p>
<dl class="simple">
<dt>Note: This only uses host and port from the profile, since the others are not going to be relevant for the</dt><dd><p>database superuser.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profile</strong> – AiiDA profile instance</p></li>
<li><p><strong>kwargs</strong> – keyword arguments forwarded to PGSU constructor</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Postgres instance pre-populated with data from AiiDA profile</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.host_for_psycopg2">
<em class="property">property </em><code class="sig-name descname">host_for_psycopg2</code><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.host_for_psycopg2" title="Permalink to this definition">¶</a></dt>
<dd><p>Return correct host for psycopg2 connection (as required by regular AiiDA operation).</p>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.postgres.Postgres.port_for_psycopg2">
<em class="property">property </em><code class="sig-name descname">port_for_psycopg2</code><a class="headerlink" href="#aiida.manage.external.postgres.Postgres.port_for_psycopg2" title="Permalink to this definition">¶</a></dt>
<dd><p>Return port for psycopg2 connection (as required by regular AiiDA operation).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.manage.external.postgres.PostgresConnectionMode">
<em class="property">class </em><code class="sig-prename descclassname">aiida.manage.external.postgres.</code><code class="sig-name descname">PostgresConnectionMode</code><a class="reference internal" href="../_modules/pgsu.html#PostgresConnectionMode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.postgres.PostgresConnectionMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.IntEnum" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.IntEnum</span></code></a></p>
<p>Describe mode of connecting to postgres.</p>
<dl class="attribute">
<dt id="aiida.manage.external.postgres.PostgresConnectionMode.DISCONNECTED">
<code class="sig-name descname">DISCONNECTED</code><em class="property"> = 0</em><a class="headerlink" href="#aiida.manage.external.postgres.PostgresConnectionMode.DISCONNECTED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.manage.external.postgres.PostgresConnectionMode.PSQL">
<code class="sig-name descname">PSQL</code><em class="property"> = 2</em><a class="headerlink" href="#aiida.manage.external.postgres.PostgresConnectionMode.PSQL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.manage.external.postgres.PostgresConnectionMode.PSYCOPG">
<code class="sig-name descname">PSYCOPG</code><em class="property"> = 1</em><a class="headerlink" href="#aiida.manage.external.postgres.PostgresConnectionMode.PSYCOPG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.manage.external.postgres.PostgresConnectionMode.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'pgsu'</em><a class="headerlink" href="#aiida.manage.external.postgres.PostgresConnectionMode.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="module-aiida.manage.external.rmq"></span><p>Components to communicate tasks to RabbitMQ.</p>
<dl class="exception">
<dt id="aiida.manage.external.rmq.RemoteException">
<em class="property">exception </em><code class="sig-prename descclassname">aiida.manage.external.rmq.</code><code class="sig-name descname">RemoteException</code><a class="reference internal" href="../_modules/kiwipy/communications.html#RemoteException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.rmq.RemoteException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>An exception occurred at the remote end of the call</p>
<dl class="attribute">
<dt id="aiida.manage.external.rmq.RemoteException.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'kiwipy.communications'</em><a class="headerlink" href="#aiida.manage.external.rmq.RemoteException.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.manage.external.rmq.RemoteException.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#aiida.manage.external.rmq.RemoteException.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="aiida.manage.external.rmq.CommunicationTimeout">
<code class="sig-prename descclassname">aiida.manage.external.rmq.</code><code class="sig-name descname">CommunicationTimeout</code><a class="headerlink" href="#aiida.manage.external.rmq.CommunicationTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures._base.TimeoutError</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="aiida.manage.external.rmq.DeliveryFailed">
<em class="property">exception </em><code class="sig-prename descclassname">aiida.manage.external.rmq.</code><code class="sig-name descname">DeliveryFailed</code><a class="reference internal" href="../_modules/kiwipy/communications.html#DeliveryFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.rmq.DeliveryFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Failed to deliver a message</p>
<dl class="attribute">
<dt id="aiida.manage.external.rmq.DeliveryFailed.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'kiwipy.communications'</em><a class="headerlink" href="#aiida.manage.external.rmq.DeliveryFailed.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.manage.external.rmq.DeliveryFailed.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#aiida.manage.external.rmq.DeliveryFailed.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.manage.external.rmq.ProcessLauncher">
<em class="property">class </em><code class="sig-prename descclassname">aiida.manage.external.rmq.</code><code class="sig-name descname">ProcessLauncher</code><span class="sig-paren">(</span><em class="sig-param">loop=None</em>, <em class="sig-param">persister=None</em>, <em class="sig-param">load_context=None</em>, <em class="sig-param">loader=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/rmq.html#ProcessLauncher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.rmq.ProcessLauncher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://plumpy.readthedocs.io/en/latest/apidoc/plumpy.html#plumpy.process_comms.ProcessLauncher" title="(in plumpy v0.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">plumpy.process_comms.ProcessLauncher</span></code></a></p>
<p>A sub class of <cite>plumpy.ProcessLauncher</cite> to launch a <cite>Process</cite>.</p>
<p>It overrides the _continue method to make sure the node corresponding to the task can be loaded and
that if it is already marked as terminated, it is not continued but the future is reconstructed and returned</p>
<dl class="attribute">
<dt id="aiida.manage.external.rmq.ProcessLauncher.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.manage.external.rmq'</em><a class="headerlink" href="#aiida.manage.external.rmq.ProcessLauncher.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.manage.external.rmq.ProcessLauncher._continue">
<code class="sig-name descname">_continue</code><span class="sig-paren">(</span><em class="sig-param">communicator</em>, <em class="sig-param">pid</em>, <em class="sig-param">nowait</em>, <em class="sig-param">tag=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/rmq.html#ProcessLauncher._continue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.rmq.ProcessLauncher._continue" title="Permalink to this definition">¶</a></dt>
<dd><p>Continue the task.</p>
<p>Note that the task may already have been completed, as indicated from the corresponding the node, in which
case it is not continued, but the corresponding future is reconstructed and returned. This scenario may
occur when the Process was already completed by another worker that however failed to send the acknowledgment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>communicator</strong> – the communicator that called this method</p></li>
<li><p><strong>pid</strong> – the pid of the process to continue</p></li>
<li><p><strong>nowait</strong> – if True don’t wait for the process to finish, just return the pid, otherwise wait and
return the results</p></li>
<li><p><strong>tag</strong> – the tag of the checkpoint to continue from</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aiida.manage.external.rmq.ProcessLauncher.handle_continue_exception">
<em class="property">static </em><code class="sig-name descname">handle_continue_exception</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">exception</em>, <em class="sig-param">message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/manage/external/rmq.html#ProcessLauncher.handle_continue_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.manage.external.rmq.ProcessLauncher.handle_continue_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle exception raised in <cite>_continue</cite> call.</p>
<p>If the process state of the node has not yet been put to excepted, the exception was raised before the process
instance could be reconstructed, for example when the process class could not be loaded, thereby circumventing
the exception handling of the state machine. Raising this exception will then acknowledge the process task with
RabbitMQ leaving an uncleaned node in the <cite>CREATED</cite> state for ever. Therefore we have to perform the node
cleaning manually.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exception</strong> – the exception object</p></li>
<li><p><strong>message</strong> – string message to use for the log message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>