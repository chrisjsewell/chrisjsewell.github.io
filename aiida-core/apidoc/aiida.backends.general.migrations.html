

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.backends.general.migrations package &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>aiida.backends.general.migrations package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/aiida.backends.general.migrations.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aiida.backends.general.migrations">
<span id="aiida-backends-general-migrations-package"></span><h1>aiida.backends.general.migrations package<a class="headerlink" href="#module-aiida.backends.general.migrations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-aiida.backends.general.migrations.calc_state">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-aiida.backends.general.migrations.calc_state" title="Permalink to this headline">¶</a></h2>
<p>Data structures for mapping legacy <cite>JobCalculation</cite> data to new process attributes.</p>
<dl class="class">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping">
<em class="property">class </em><code class="sig-prename descclassname">aiida.backends.general.migrations.calc_state.</code><code class="sig-name descname">StateMapping</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">process_state</em>, <em class="sig-param">exit_status</em>, <em class="sig-param">process_status</em><span class="sig-paren">)</span><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self as a plain tuple.  Used by copy and pickle.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'aiida.backends.general.migrations.calc_state'</em><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.__new__">
<em class="property">static </em><code class="sig-name descname">__new__</code><span class="sig-paren">(</span><em class="sig-param">_cls</em>, <em class="sig-param">state</em>, <em class="sig-param">process_state</em>, <em class="sig-param">exit_status</em>, <em class="sig-param">process_status</em><span class="sig-paren">)</span><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.__new__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new instance of StateMapping(state, process_state, exit_status, process_status)</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.__repr__">
<code class="sig-name descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a nicely formatted representation string</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.__slots__">
<code class="sig-name descname">__slots__</code><em class="property"> = ()</em><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.__slots__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping._asdict">
<code class="sig-name descname">_asdict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping._asdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new OrderedDict which maps field names to their values.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping._fields">
<code class="sig-name descname">_fields</code><em class="property"> = ('state', 'process_state', 'exit_status', 'process_status')</em><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping._fields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping._fields_defaults">
<code class="sig-name descname">_fields_defaults</code><em class="property"> = {}</em><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping._fields_defaults" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping._make">
<em class="property">classmethod </em><code class="sig-name descname">_make</code><span class="sig-paren">(</span><em class="sig-param">iterable</em><span class="sig-paren">)</span><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping._make" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a new StateMapping object from a sequence or iterable</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping._replace">
<code class="sig-name descname">_replace</code><span class="sig-paren">(</span><em class="sig-param">**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping._replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new StateMapping object replacing specified fields with new values</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.exit_status">
<em class="property">property </em><code class="sig-name descname">exit_status</code><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.exit_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.process_state">
<em class="property">property </em><code class="sig-name descname">process_state</code><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.process_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.process_status">
<em class="property">property </em><code class="sig-name descname">process_status</code><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.process_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="method">
<dt id="aiida.backends.general.migrations.calc_state.StateMapping.state">
<em class="property">property </em><code class="sig-name descname">state</code><a class="headerlink" href="#aiida.backends.general.migrations.calc_state.StateMapping.state" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.backends.general.migrations.provenance_redesign"></span><p>SQL statements to detect invalid/ununderstood links for the provenance redesign migration.</p>
<span class="target" id="module-aiida.backends.general.migrations.utils"></span><p>Various utils that should be used during migrations and migrations tests because the AiiDA ORM cannot be used.</p>
<dl class="function">
<dt id="aiida.backends.general.migrations.utils.delete_numpy_array_from_repository">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">delete_numpy_array_from_repository</code><span class="sig-paren">(</span><em class="sig-param">uuid</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#delete_numpy_array_from_repository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.delete_numpy_array_from_repository" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the numpy array with a given name from the repository corresponding to a node with a given uuid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> – the UUID of the node</p></li>
<li><p><strong>name</strong> – the name of the numpy array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.dumps_json">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">dumps_json</code><span class="sig-paren">(</span><em class="sig-param">dictionary</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#dumps_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.dumps_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms all datetime object into isoformat and then returns the JSON.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.ensure_repository_folder_created">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">ensure_repository_folder_created</code><span class="sig-paren">(</span><em class="sig-param">uuid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#ensure_repository_folder_created"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.ensure_repository_folder_created" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that the repository sub folder for the node with the given UUID exists or create it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uuid</strong> – UUID of the node</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.get_node_repository_sub_folder">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">get_node_repository_sub_folder</code><span class="sig-paren">(</span><em class="sig-param">uuid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#get_node_repository_sub_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.get_node_repository_sub_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute path to the sub folder <cite>path</cite> within the repository of the node with the given UUID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uuid</strong> – UUID of the node</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>absolute path to node repository folder, i.e <cite>/some/path/repository/node/12/ab/c123134-a123/path</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.get_numpy_array_absolute_path">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">get_numpy_array_absolute_path</code><span class="sig-paren">(</span><em class="sig-param">uuid</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#get_numpy_array_absolute_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.get_numpy_array_absolute_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute path of a numpy array with the given name in the repository of the node with the given uuid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> – the UUID of the node</p></li>
<li><p><strong>name</strong> – the name of the numpy array</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the absolute path of the numpy array file</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.get_object_from_repository">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">get_object_from_repository</code><span class="sig-paren">(</span><em class="sig-param">uuid</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#get_object_from_repository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.get_object_from_repository" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the content of a file with the given name in the repository sub folder of the given node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> – UUID of the node</p></li>
<li><p><strong>name</strong> – name to use for the file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.load_numpy_array_from_repository">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">load_numpy_array_from_repository</code><span class="sig-paren">(</span><em class="sig-param">uuid</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#load_numpy_array_from_repository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.load_numpy_array_from_repository" title="Permalink to this definition">¶</a></dt>
<dd><p>Load and return a numpy array from the repository folder of a node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> – the node UUID</p></li>
<li><p><strong>name</strong> – the name under which to store the array</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.put_object_from_string">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">put_object_from_string</code><span class="sig-paren">(</span><em class="sig-param">uuid</em>, <em class="sig-param">name</em>, <em class="sig-param">content</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#put_object_from_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.put_object_from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a file with the given content in the repository sub folder of the given node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> – UUID of the node</p></li>
<li><p><strong>name</strong> – name to use for the file</p></li>
<li><p><strong>content</strong> – the content to write to the file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.recursive_datetime_to_isoformat">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">recursive_datetime_to_isoformat</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#recursive_datetime_to_isoformat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.recursive_datetime_to_isoformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert all datetime objects in the given value to string representations in ISO format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – a mapping, sequence or single value optionally containing datetime objects</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.general.migrations.utils.store_numpy_array_in_repository">
<code class="sig-prename descclassname">aiida.backends.general.migrations.utils.</code><code class="sig-name descname">store_numpy_array_in_repository</code><span class="sig-paren">(</span><em class="sig-param">uuid</em>, <em class="sig-param">name</em>, <em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/general/migrations/utils.html#store_numpy_array_in_repository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.general.migrations.utils.store_numpy_array_in_repository" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a numpy array in the repository folder of a node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> – the node UUID</p></li>
<li><p><strong>name</strong> – the name under which to store the array</p></li>
<li><p><strong>array</strong> – the numpy array to store</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>