

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configure AiiDA &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Configure AiiDA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configure-aiida">
<span id="id1"></span><h1>Configure AiiDA<a class="headerlink" href="#configure-aiida" title="Permalink to this headline">¶</a></h1>
<div class="section" id="verdi-tab-completion">
<span id="tab-completion"></span><h2>Verdi tab-completion<a class="headerlink" href="#verdi-tab-completion" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">verdi</span></code> command line interface has many commands and options,
which can be tab-completed to simplify your life.
Enable tab-completion with the following shell command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">eval</span> <span class="s2">&quot;$(_VERDI_COMPLETE=source verdi)&quot;</span>
</pre></div>
</div>
<p>Place this command in your startup file, i.e. one of</p>
<ul class="simple">
<li><p>the startup file of your shell (<code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>, <code class="docutils literal notranslate"><span class="pre">.zsh</span></code>, …), if aiida is installed system-wide</p></li>
<li><p>the <a class="reference external" href="https://virtualenv.pypa.io/en/latest/userguide/#activate-script">activate script</a> of your virtual environment</p></li>
<li><p>a <a class="reference external" href="https://conda.io/docs/user-guide/tasks/manage-environments.html#saving-environment-variables">startup file</a> for your conda environment</p></li>
</ul>
<p>In order to enable tab completion in your current shell,
make sure to source the startup file once.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This line replaces the <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">&quot;$(verdi</span> <span class="pre">completioncommand)&quot;</span></code> line that was used in <code class="docutils literal notranslate"><span class="pre">aiida-core&lt;1.0.0</span></code>. While this continues to work, support for the old line may be dropped in the future.</p>
</div>
</div>
<div class="section" id="isolating-aiida-environments">
<span id="directory-location"></span><h2>Isolating AiiDA environments<a class="headerlink" href="#isolating-aiida-environments" title="Permalink to this headline">¶</a></h2>
<p>By default, the AiiDA configuration is stored in the directory <code class="docutils literal notranslate"><span class="pre">~/.aiida</span></code>.
When running AiiDA in multiple virtual environments (using <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code>),
you can ask AiiDA to use a separate <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> configuration directory per environment.</p>
<ol class="arabic">
<li><p>Create your virtual environment <code class="docutils literal notranslate"><span class="pre">aiida2</span></code></p></li>
<li><p>Edit the activation script <code class="docutils literal notranslate"><span class="pre">~/.virtualenvs/aiida2/bin/activate</span></code>
and append a line to set the <code class="docutils literal notranslate"><span class="pre">AIIDA_PATH</span></code> environment variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">AIIDA_PATH</span><span class="o">=</span><span class="s1">&#39;~/.virtualenvs/aiida2&#39;</span>  <span class="c1"># use .aiida configuration in this folder</span>
<span class="nb">eval</span> <span class="s2">&quot;$(_VERDI_COMPLETE=source verdi)&quot;</span>  <span class="c1"># e.g. set up tab completion</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For <code class="docutils literal notranslate"><span class="pre">conda</span></code>,     create a directory structure <code class="docutils literal notranslate"><span class="pre">etc/conda/activate.d</span></code> in
the root folder of your conda environment (e.g.
<code class="docutils literal notranslate"><span class="pre">/home/user/miniconda/envs/aiida</span></code>), and place a file <code class="docutils literal notranslate"><span class="pre">aiida-init.sh</span></code> in
that folder which exports the <code class="docutils literal notranslate"><span class="pre">AIIDA_PATH</span></code>.</p>
</div>
<ol class="arabic simple" start="3">
<li><p>Deactivate and re-activate the virtual environment</p></li>
</ol>
<p>You can test that everything is set up correctly if you can reproduce the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(aiida2)$ echo $AIIDA_PATH
&gt;&gt;&gt; ~/.virtualenvs/aiida2

(aiida2)$ verdi profile list
&gt;&gt;&gt; Info: configuration folder: /home/my_username/.virtualenvs/aiida/.aiida2
&gt;&gt;&gt; Critical: configuration file /home/my_username/.virtualenvs/aiida/.aiida2/config.json does not exist
</pre></div>
</div>
<p>Now simply <a class="reference internal" href="installation.html#setup-aiida"><span class="std std-ref">create a new AiiDA profile</span></a> in the <code class="docutils literal notranslate"><span class="pre">aiida2</span></code> environment.</p>
<div class="section" id="aiida-path-details">
<h3><code class="docutils literal notranslate"><span class="pre">AIIDA_PATH</span></code> Details<a class="headerlink" href="#aiida-path-details" title="Permalink to this headline">¶</a></h3>
<p>The value of <code class="docutils literal notranslate"><span class="pre">AIIDA_PATH</span></code> can be a colon-separated list of paths.
AiiDA will go through each of the paths and check whether they contain a <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> directory.
The first configuration directory that is encountered will be used.
If no <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> directory is found, one will be created in the last path that was considered.</p>
<p>For example, the directory structure in your home folder <code class="docutils literal notranslate"><span class="pre">~/</span></code> might look like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
├── .aiida
└── project_a
    ├── .aiida
    └── subfolder
</pre></div>
</div>
<p>If you leave the <code class="docutils literal notranslate"><span class="pre">AIIDA_PATH</span></code> variable unset, the default location <code class="docutils literal notranslate"><span class="pre">~/.aiida</span></code> will be used.
However, if you set</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">AIIDA_PATH</span><span class="o">=</span><span class="s1">&#39;~/project_a:&#39;</span>
</pre></div>
</div>
<p>the configuration directory <code class="docutils literal notranslate"><span class="pre">~/project_a/.aiida</span></code> will be used.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If there was no <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> directory in <code class="docutils literal notranslate"><span class="pre">~/project_a</span></code>, AiiDA would have created it for you.
Thus make sure to set the <code class="docutils literal notranslate"><span class="pre">AIIDA_PATH</span></code> correctly.</p>
</div>
</div>
</div>
<div class="section" id="using-aiida-in-jupyter">
<h2>Using AiiDA in Jupyter<a class="headerlink" href="#using-aiida-in-jupyter" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://jupyter.org">Jupyter</a> is an open-source web application that allows you to create in-browser notebooks containing live code, visualizations and formatted text.</p>
<p>Originally born out of the iPython project, it now supports code written in many languages and customized iPython kernels.</p>
<p>If you didn’t already install AiiDA with the <code class="docutils literal notranslate"><span class="pre">[notebook]</span></code> option (during <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>), run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">jupyter</span></code> <strong>inside</strong> the virtualenv, and then run <strong>from within the virtualenv</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">notebook</span>
</pre></div>
</div>
<p>This will open a tab in your browser. Click on <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">-&gt;</span> <span class="pre">Python</span></code> and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">aiida</span>
</pre></div>
</div>
<p>followed by <code class="docutils literal notranslate"><span class="pre">Shift-Enter</span></code>. If no exception is thrown, you can use AiiDA in Jupyter.</p>
<p>If you want to set the same environment as in a <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">shell</span></code>,
add the following code to a <code class="docutils literal notranslate"><span class="pre">.py</span></code> file (create one if there isn’t any) in <code class="docutils literal notranslate"><span class="pre">&lt;home_folder&gt;/.ipython/profile_default/startup/</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">aiida</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">IPython</span>
    <span class="kn">from</span> <span class="nn">aiida.tools.ipython.ipython_magics</span> <span class="kn">import</span> <span class="n">load_ipython_extension</span>

    <span class="c1"># Get the current Ipython session</span>
    <span class="n">ipython</span> <span class="o">=</span> <span class="n">IPython</span><span class="o">.</span><span class="n">get_ipython</span><span class="p">()</span>

    <span class="c1"># Register the line magic</span>
    <span class="n">load_ipython_extension</span><span class="p">(</span><span class="n">ipython</span><span class="p">)</span>
</pre></div>
</div>
<p>This file will be executed when the ipython kernel starts up and enable the line magic <code class="docutils literal notranslate"><span class="pre">%aiida</span></code>.
Alternatively, if you have a <code class="docutils literal notranslate"><span class="pre">aiida-core</span></code> repository checked out locally,
you can just copy the file <code class="docutils literal notranslate"><span class="pre">&lt;aiida-core&gt;/aiida/tools/ipython/aiida_magic_register.py</span></code> to the same folder.
The current ipython profile folder can be located using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ipython</span> <span class="n">locate</span> <span class="n">profile</span>
</pre></div>
</div>
<p>After this, if you open a Jupyter notebook as explained above and type in a cell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">aiida</span>
</pre></div>
</div>
<p>followed by <code class="docutils literal notranslate"><span class="pre">Shift-Enter</span></code>. You should receive the message “Loaded AiiDA DB environment.”
This line magic should also be enabled in standard ipython shells.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>