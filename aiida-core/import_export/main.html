

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AiiDA Graphs &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>AiiDA Graphs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/import_export/main.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aiida-graphs">
<h1>AiiDA Graphs<a class="headerlink" href="#aiida-graphs" title="Permalink to this headline">¶</a></h1>
<p>AiiDA offers tools for exporting selected parts of an AiiDA graph to a file for backup or sharing purposes.</p>
<div class="section" id="export">
<h2>Export<a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">create</span></code> to export a selection of nodes, codes, groups, users, and/or computers.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">create</span> <span class="pre">-h</span></code> for a full list of available options.</p>
<ul class="simple">
<li><p><strong>Selection:</strong> Nodes can be selected via identifier (PK, UUID, label).
It is often convenient to first put the nodes you would like to export into a <a class="reference internal" href="../apidoc/aiida.orm.html#aiida.orm.Group" title="aiida.orm.Group"><code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code></a> and then to export the group using <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">create</span> <span class="pre">-G</span> <span class="pre">&lt;group-name&gt;</span></code>.</p></li>
<li><p><strong>Augmentation:</strong> By default, the export function automatically augments your selection of nodes by their provenance (and calculations by their direct outputs).
You can customize this behavior using command line options.
For details on how the provenance graph is traversed, see the section on <a class="reference internal" href="../concepts/provenance.html#consistency"><span class="std std-ref">data consistency</span></a>.</p></li>
<li><p><strong>File content:</strong> The export file contains all information pertaining to the exported nodes: both the information stored in the database and files stored in the AiiDA repository.</p></li>
<li><p><strong>Compression:</strong> By default, the export file is a compressed <code class="docutils literal notranslate"><span class="pre">zip</span></code> archive.
Use the command line options to disable compression or to switch to a different format (gzipped tar ball or uncompressed zip).</p></li>
</ul>
</div>
<div class="section" id="import">
<h2>Import<a class="headerlink" href="#import" title="Permalink to this headline">¶</a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">import</span></code> to import AiiDA export archives generated by <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">create</span></code>, either passing local paths and/or URLs.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">import</span> <span class="pre">-h</span></code> for a full list of available options.</p>
<ul class="simple">
<li><p><strong>Duplication:</strong> AiiDA will avoid identifier collisions and node duplication based on UUIDs or email comparisons.</p></li>
<li><p><strong>Merging:</strong> By default, all existing entities will be updated with the most recent changes.
Node extras and comments have special modes for determining how to import them.</p></li>
</ul>
</div>
<div class="section" id="export-file-format">
<span id="id1"></span><h2>Export File Format<a class="headerlink" href="#export-file-format" title="Permalink to this headline">¶</a></h2>
<p>An AiiDA export file is an archive of <code class="docutils literal notranslate"><span class="pre">.zip</span></code> or <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> format with the following content:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> file containing information on the version of AiiDA as well as the database schema.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data.json</span></code> file containing the exported nodes and their links.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nodes/</span></code> directory containing the repository files corresponding to the exported nodes.</p></li>
</ul>
<div class="section" id="metadata-json">
<span id="id2"></span><h3><code class="docutils literal notranslate"><span class="pre">metadata.json</span></code><a class="headerlink" href="#metadata-json" title="Permalink to this headline">¶</a></h3>
<p>This file contains important information, and it is necessary for the correct interpretation of <code class="docutils literal notranslate"><span class="pre">data.json</span></code>.
Apart from the data schema, the AiiDA and export versions are also mentioned.
This is used to avoid any incompatibilities among different versions of AiiDA.
It should be noted that the schema described in <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> is related to the data itself - abstracted schema focused on the extracted information - and not how the data is stored in the database (database schema).
This makes the import/export mechanism transparent to the database system used, backend selected and how the data is organised in the database (database schema).</p>
<p>Let’s have a look at the contents of <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;export_version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.7&quot;</span><span class="p">,</span>
  <span class="nt">&quot;aiida_version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;export_parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;graph_traversal_rules&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;input_calc_forward&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;input_calc_backward&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;create_forward&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;create_backward&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;return_forward&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;return_backward&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;input_work_forward&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;input_work_backward&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;call_calc_forward&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;call_calc_backward&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;call_work_forward&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;call_work_backward&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nt">&quot;entities_starting_set&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;Node&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;1024e35e-166b-4104-95f6-c1706df4ce15&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;include_comments&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;include_logs&quot;</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="nt">&quot;unique_identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;Computer&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Group&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
    <span class="nt">&quot;User&quot;</span><span class="p">:</span> <span class="s2">&quot;email&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Node&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Log&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Comment&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;all_fields_info&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;Computer&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;transport_type&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;hostname&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;scheduler_type&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nt">&quot;User&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;last_name&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;first_name&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;institution&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nt">&quot;Node&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;ctime&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;convert_type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;mtime&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;convert_type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;node_type&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related_name&quot;</span><span class="p">:</span> <span class="s2">&quot;dbnodes&quot;</span><span class="p">,</span>
        <span class="nt">&quot;requires&quot;</span><span class="p">:</span> <span class="s2">&quot;User&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;dbcomputer&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related_name&quot;</span><span class="p">:</span> <span class="s2">&quot;dbnodes&quot;</span><span class="p">,</span>
        <span class="nt">&quot;requires&quot;</span><span class="p">:</span> <span class="s2">&quot;Computer&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;process_type&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nt">&quot;Group&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related_name&quot;</span><span class="p">:</span> <span class="s2">&quot;dbgroups&quot;</span><span class="p">,</span>
        <span class="nt">&quot;requires&quot;</span><span class="p">:</span> <span class="s2">&quot;User&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;convert_type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;type_string&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nt">&quot;Log&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;convert_type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;loggername&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;levelname&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;dbnode&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;requires&quot;</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">,</span>
        <span class="nt">&quot;related_name&quot;</span><span class="p">:</span> <span class="s2">&quot;dblogs&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;Comment&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;ctime&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;convert_type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;mtime&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;convert_type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;dbnode&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related_name&quot;</span><span class="p">:</span> <span class="s2">&quot;dbcomments&quot;</span><span class="p">,</span>
        <span class="nt">&quot;requires&quot;</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related_name&quot;</span><span class="p">:</span> <span class="s2">&quot;dbcomments&quot;</span><span class="p">,</span>
        <span class="nt">&quot;requires&quot;</span><span class="p">:</span> <span class="s2">&quot;User&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>At the beginning of the file, we see the version of the export file and the version of the AiiDA code.</p>
<p>The entities that are exported are mentioned in <em>unique_identifiers</em> with their respective unique identifiers.
Knowing the unique IDs is useful for duplicate avoidance (in order to avoid the insertion of the node multiple times).</p>
<p>Then in <em>all_fields_info</em>, the properties of each entity are mentioned.
The correlations with other entities are also mentioned.
For example, the entity <em>Node</em> is related to a <em>Computer</em> and a <em>User</em>.
The corresponding entity names appear nested next to the properties to show this correlation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have migrated an export archive to the newest export version, there may be an extra entry in <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code>.
This simply states from which export version the archive was migrated.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you supply an old export archive that the current AiiDA code does not support, <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">import</span></code> will automatically try to migrate the archive by calling <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">migrate</span></code>.</p>
</div>
</div>
<div class="section" id="data-json">
<span id="id3"></span><h3><code class="docutils literal notranslate"><span class="pre">data.json</span></code><a class="headerlink" href="#data-json" title="Permalink to this headline">¶</a></h3>
<p>A sample of the <code class="docutils literal notranslate"><span class="pre">data.json</span></code> file follows:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;links_uuid&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="s2">&quot;1024e35e-166b-4104-95f6-c1706df4ce15&quot;</span><span class="p">,</span>
      <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;parameters&quot;</span><span class="p">,</span>
      <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="s2">&quot;628ba258-ccc1-47bf-bab7-8aee64b563ea&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;input_calc&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;export_data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;User&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;AiiDA&quot;</span><span class="p">,</span>
        <span class="nt">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;theossrv2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;institution&quot;</span><span class="p">:</span> <span class="s2">&quot;EPFL, Lausanne&quot;</span><span class="p">,</span>
        <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;aiida@theossrv2.epfl.ch&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;Computer&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;theospc14-direct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;theospc14 (N. Mounet&#39;s PC) with direct scheduler&quot;</span><span class="p">,</span>
        <span class="nt">&quot;hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;theospc14.epfl.ch&quot;</span><span class="p">,</span>
        <span class="nt">&quot;transport_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ssh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;default_mpiprocs_per_machine&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
          <span class="nt">&quot;workdir&quot;</span><span class="p">:</span> <span class="s2">&quot;/scratch/{username}/aiida_run/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;append_text&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nt">&quot;prepend_text&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nt">&quot;mpirun_command&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mpirun&quot;</span><span class="p">,</span> <span class="s2">&quot;-np&quot;</span><span class="p">,</span> <span class="s2">&quot;{tot_num_mpiprocs}&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;scheduler_type&quot;</span><span class="p">:</span> <span class="s2">&quot;direct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;fb7729ff-8254-4bc0-bbec-acbdb573cfe2&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;Node&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;5921143&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;628ba258-ccc1-47bf-bab7-8aee64b563ea&quot;</span><span class="p">,</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dbcomputer&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;mtime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-08-21T11:55:53.132925&quot;</span><span class="p">,</span>
        <span class="nt">&quot;node_type&quot;</span><span class="p">:</span> <span class="s2">&quot;data.dict.Dict.&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-08-21T11:55:53.118306&quot;</span><span class="p">,</span>
        <span class="nt">&quot;process_type&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;20063&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;1024e35e-166b-4104-95f6-c1706df4ce15&quot;</span><span class="p">,</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dbcomputer&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;mtime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-02-16T10:33:54.095973&quot;</span><span class="p">,</span>
        <span class="nt">&quot;process_type&quot;</span><span class="p">:</span> <span class="s2">&quot;aiida.calculations:codtools.ciffilter&quot;</span><span class="p">,</span>
        <span class="nt">&quot;node_type&quot;</span><span class="p">:</span> <span class="s2">&quot;process.calculation.calcjob.CalcJobNode.&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-10-02T20:08:06.628472&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;Comment&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;8c165836-6ae1-4ae8-8cf1-fb111abc483e&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-08-21T11:56:05.501162&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mtime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-08-21T11:56:05.501697&quot;</span><span class="p">,</span>
        <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;vc-relax calculation with cold smearing&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dbnode&quot;</span><span class="p">:</span> <span class="mi">20063</span><span class="p">,</span>
        <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="mi">2</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;groups_uuid&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;node_attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;5921143&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;CONTROL&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;calculation&quot;</span><span class="p">:</span> <span class="s2">&quot;vc-relax&quot;</span><span class="p">,</span>
        <span class="nt">&quot;restart_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;from_scratch&quot;</span><span class="p">,</span>
        <span class="nt">&quot;max_seconds&quot;</span><span class="p">:</span> <span class="mi">83808</span>
      <span class="p">},</span>
      <span class="nt">&quot;ELECTRONS&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;electron_maxstep&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="nt">&quot;conv_thr&quot;</span><span class="p">:</span> <span class="mf">3.6e-10</span>
      <span class="p">},</span>
      <span class="nt">&quot;SYSTEM&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;ecutwfc&quot;</span><span class="p">:</span> <span class="mf">90.0</span><span class="p">,</span>
        <span class="nt">&quot;input_dft&quot;</span><span class="p">:</span> <span class="s2">&quot;vdw-df2-c09&quot;</span><span class="p">,</span>
        <span class="nt">&quot;occupations&quot;</span><span class="p">:</span> <span class="s2">&quot;smearing&quot;</span><span class="p">,</span>
        <span class="nt">&quot;degauss&quot;</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">,</span>
        <span class="nt">&quot;smearing&quot;</span><span class="p">:</span> <span class="s2">&quot;cold&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ecutrho&quot;</span><span class="p">:</span> <span class="mf">1080.0</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;20063&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;retrieve_list&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;aiida.out&quot;</span><span class="p">,</span>
        <span class="s2">&quot;aiida.err&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_scheduler-stdout.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_scheduler-stderr.txt&quot;</span>
      <span class="p">],</span>
      <span class="nt">&quot;last_job_info&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;job_state&quot;</span><span class="p">:</span> <span class="s2">&quot;DONE&quot;</span><span class="p">,</span>
        <span class="nt">&quot;job_id&quot;</span><span class="p">:</span> <span class="s2">&quot;13489&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;scheduler_state&quot;</span><span class="p">:</span> <span class="s2">&quot;DONE&quot;</span><span class="p">,</span>
      <span class="nt">&quot;parser&quot;</span><span class="p">:</span> <span class="s2">&quot;codtools.ciffilter&quot;</span><span class="p">,</span>
      <span class="nt">&quot;linkname_retrieved&quot;</span><span class="p">:</span> <span class="s2">&quot;retrieved&quot;</span><span class="p">,</span>
      <span class="nt">&quot;jobresource_params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;num_machines&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;num_mpiprocs_per_machine&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;default_mpiprocs_per_machine&quot;</span><span class="p">:</span> <span class="mi">8</span>
      <span class="p">},</span>
      <span class="nt">&quot;remote_workdir&quot;</span><span class="p">:</span> <span class="s2">&quot;/scratch/aiida/aiida_run/10/24/e35e-166b-4104-95f6-c1706df4ce15&quot;</span><span class="p">,</span>
      <span class="nt">&quot;process_state&quot;</span><span class="p">:</span> <span class="s2">&quot;finished&quot;</span><span class="p">,</span>
      <span class="nt">&quot;max_wallclock_seconds&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span>
      <span class="nt">&quot;retrieve_singlefile_list&quot;</span><span class="p">:</span> <span class="p">[],</span>
      <span class="nt">&quot;scheduler_lastchecktime&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-10-02T20:30:36.481951+00:00&quot;</span><span class="p">,</span>
      <span class="nt">&quot;job_id&quot;</span><span class="p">:</span> <span class="s2">&quot;13489&quot;</span><span class="p">,</span>
      <span class="nt">&quot;exit_status&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;process_status&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nt">&quot;process_label&quot;</span><span class="p">:</span> <span class="s2">&quot;vc-relax&quot;</span><span class="p">,</span>
      <span class="nt">&quot;sealed&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;node_extras&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;5921143&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;20063&quot;</span><span class="p">:</span> <span class="p">{}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>At the start of the JSON file shown above, the links among the various AiiDA nodes are stated (<em>links_uuid</em> field).
For every link the UUIDs (universal unique identifiers) of the connected nodes, as well as the name of the link, are mentioned.</p>
<p>Then the export data follows, where the data appears “grouped” into entity types.
It is worth noticing the references between the instances of the various entities.
For example the DbNode with identifier <em>5921143</em> belongs to the user with identifier 2 and was generated by the computer with identifier 1.</p>
<p>The name of the entities is a reference to the base ORM entities.
This ensuries that the export files are cross-backend compatible.</p>
<p>If any groups are extracted, then they are mentioned in the corresponding field (<em>groups_uuid</em>).</p>
<p>Attributes and extras of the extracted nodes, are described in the final part of the JSON file.
The identifier of the corresponding node is used as a key for the attribute or extra.</p>
</div>
</div>
<div class="section" id="export-archive-migration">
<h2>Export Archive Migration<a class="headerlink" href="#export-archive-migration" title="Permalink to this headline">¶</a></h2>
<p>Old AiiDA archives may be migrated to the newest version using <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">migrate</span></code>, in order to make them importable into the newest AiiDA version.</p>
<p>New export versions are introduced for several different reasons.
This may generally be when
* a change occurs in what can or cannot be exported for each entity,
* the schemes in <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> are updated or changed,
* or standardized exported property values (like the one for <code class="docutils literal notranslate"><span class="pre">node_type</span></code> or similar) are updated in AiiDA.</p>
<p>As a default, <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">import</span></code> will call <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">migrate</span></code> if an old archive is supplied.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is not possible to “downgrade” an archive to previous export versions.
However, since the migration will produce a new file, you will have your archive in at least two different export versions.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For archives of version 0.3 and older (run either <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">inspect</span> <span class="pre">-v</span> <span class="pre">&lt;ARCHIVE&gt;</span></code> or inspect your <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> file directly to check the version), it is advisable that you manually try to convince yourself that the migration was completely successful.
While all migrations are tested, trying to include reasonable edge-cases, the migrations involed in going from version 0.3 to 0.4 are intricate and it is virtually impossible to account for all edge-cases that may occur.
It is worth noting that if you ever have an issue, please report it on <a class="reference external" href="https://www.github.com/aiidateam/aiida_core/issues/new">GitHub</a>, join the <a class="reference external" href="http://www.aiida.net/mailing-list/">AiiDA mailing list</a>, or use the <a class="reference external" href="http://www.aiida.net/contact-new/">contact form</a>.</p>
</div>
</div>
<div class="section" id="inspect-export-archives">
<h2>Inspect Export Archives<a class="headerlink" href="#inspect-export-archives" title="Permalink to this headline">¶</a></h2>
<p>You can inspect an export archive by using <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">inspect</span></code>.</p>
<p>This is useful to get a quick overview of the amount of different entities contained in the archive.
Furthermore, using the <code class="docutils literal notranslate"><span class="pre">-v</span></code> flag, you can quickly inspect the archive’s export version.</p>
<p>Note that for archives with export versions prior to 0.3 (0.3 not included), the quick entities overview is not accurate.
Future updates to AiiDA and the export/import schemes may change the validity of other export versions.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>