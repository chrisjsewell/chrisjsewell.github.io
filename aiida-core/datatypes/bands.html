

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>BandsData &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>BandsData</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/datatypes/bands.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bandsdata">
<span id="bands"></span><h1>BandsData<a class="headerlink" href="#bandsdata" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">BandsData</span></code> object is dedicated to store bands object of different types
(electronic bands, phonons). In this section we describe the usage of the
<code class="docutils literal notranslate"><span class="pre">BandsData</span></code> to store the  electronic band structure of silicon
and some logic behind its methods.</p>
<p>To start working with <code class="docutils literal notranslate"><span class="pre">BandsData</span></code> we should import it using the
<code class="docutils literal notranslate"><span class="pre">DataFactory</span></code> and create an object of type <code class="docutils literal notranslate"><span class="pre">BandsData</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.plugins</span> <span class="kn">import</span> <span class="n">DataFactory</span>
<span class="n">BandsData</span> <span class="o">=</span> <span class="n">DataFactory</span><span class="p">(</span><span class="s1">&#39;array.bands&#39;</span><span class="p">)</span>
<span class="n">bs</span> <span class="o">=</span> <span class="n">BandsData</span><span class="p">()</span>
</pre></div>
</div>
<p>To import the bands we need to make sure to have two arrays: one
containing kpoints and another containing bands. The shape of the kpoints object
should be <code class="docutils literal notranslate"><span class="pre">nkpoints</span> <span class="pre">*</span> <span class="pre">3</span></code>, while the shape of the bands should be
<code class="docutils literal notranslate"><span class="pre">nkpoints</span> <span class="pre">*</span> <span class="pre">nstates</span></code>. Let’s assume the number of kpoints is 12, and the number
of states is 5. So the kpoints and the bands array will look as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">kpoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
       <span class="p">[[</span><span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.</span>    <span class="p">],</span> <span class="c1"># array shape is 12 * 3</span>
       <span class="p">[</span><span class="mf">0.1</span>   <span class="p">,</span> <span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.1</span>   <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.2</span>   <span class="p">,</span> <span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.2</span>   <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.3</span>   <span class="p">,</span> <span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.3</span>   <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.4</span>   <span class="p">,</span> <span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.4</span>   <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.5</span>   <span class="p">,</span> <span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.5</span>   <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.5</span>   <span class="p">,</span> <span class="mf">0.</span>    <span class="p">,</span> <span class="mf">0.5</span>   <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.525</span> <span class="p">,</span> <span class="mf">0.05</span>  <span class="p">,</span> <span class="mf">0.525</span> <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.55</span>  <span class="p">,</span> <span class="mf">0.1</span>   <span class="p">,</span> <span class="mf">0.55</span>  <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.575</span> <span class="p">,</span> <span class="mf">0.15</span>  <span class="p">,</span> <span class="mf">0.575</span> <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.6</span>   <span class="p">,</span> <span class="mf">0.2</span>   <span class="p">,</span> <span class="mf">0.6</span>   <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.625</span> <span class="p">,</span> <span class="mf">0.25</span>  <span class="p">,</span> <span class="mf">0.625</span> <span class="p">]])</span>

<span class="n">bands</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
   <span class="p">[[</span><span class="o">-</span><span class="mf">5.64024889</span><span class="p">,</span>  <span class="mf">6.66929678</span><span class="p">,</span>  <span class="mf">6.66929678</span><span class="p">,</span>  <span class="mf">6.66929678</span><span class="p">,</span>  <span class="mf">8.91047649</span><span class="p">],</span> <span class="c1"># array shape is 12 * 5, where 12 is the size of the kpoints mesh</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">5.46976726</span><span class="p">,</span>  <span class="mf">5.76113772</span><span class="p">,</span>  <span class="mf">5.97844699</span><span class="p">,</span>  <span class="mf">5.97844699</span><span class="p">,</span>  <span class="mf">8.48186734</span><span class="p">],</span>  <span class="c1"># and 5 is the numbe of states</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">4.93870761</span><span class="p">,</span>  <span class="mf">4.06179965</span><span class="p">,</span>  <span class="mf">4.97235487</span><span class="p">,</span>  <span class="mf">4.97235488</span><span class="p">,</span>  <span class="mf">7.68276008</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">4.05318686</span><span class="p">,</span>  <span class="mf">2.21579935</span><span class="p">,</span>  <span class="mf">4.18048674</span><span class="p">,</span>  <span class="mf">4.18048675</span><span class="p">,</span>  <span class="mf">7.04145185</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">2.83974972</span><span class="p">,</span>  <span class="mf">0.37738276</span><span class="p">,</span>  <span class="mf">3.69024464</span><span class="p">,</span>  <span class="mf">3.69024465</span><span class="p">,</span>  <span class="mf">6.75053465</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">1.34041116</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.34041115</span><span class="p">,</span>  <span class="mf">3.52500177</span><span class="p">,</span>  <span class="mf">3.52500178</span><span class="p">,</span>  <span class="mf">6.92381041</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">1.34041116</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.34041115</span><span class="p">,</span>  <span class="mf">3.52500177</span><span class="p">,</span>  <span class="mf">3.52500178</span><span class="p">,</span>  <span class="mf">6.92381041</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">1.34599146</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.31663872</span><span class="p">,</span>  <span class="mf">3.34867603</span><span class="p">,</span>  <span class="mf">3.54390139</span><span class="p">,</span>  <span class="mf">6.93928289</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">1.36769345</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.24523403</span><span class="p">,</span>  <span class="mf">2.94149041</span><span class="p">,</span>  <span class="mf">3.6004033</span> <span class="p">,</span>  <span class="mf">6.98809593</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">1.42050683</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.12604118</span><span class="p">,</span>  <span class="mf">2.48497007</span><span class="p">,</span>  <span class="mf">3.69389815</span><span class="p">,</span>  <span class="mf">7.07537154</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">1.52788845</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.95900776</span><span class="p">,</span>  <span class="mf">2.09104321</span><span class="p">,</span>  <span class="mf">3.82330632</span><span class="p">,</span>  <span class="mf">7.20537566</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">1.71354964</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.74425095</span><span class="p">,</span>  <span class="mf">1.82242466</span><span class="p">,</span>  <span class="mf">3.98697455</span><span class="p">,</span>  <span class="mf">7.37979746</span><span class="p">]])</span>
</pre></div>
</div>
<p>To insert kpoints and bands in the <code class="docutils literal notranslate"><span class="pre">bs</span></code> object we should employ
<code class="docutils literal notranslate"><span class="pre">set_kpoints()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_bands()</span></code> methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bs</span><span class="o">.</span><span class="n">set_kpoints</span><span class="p">(</span><span class="n">kpoints</span><span class="p">)</span>
<span class="n">bs</span><span class="o">.</span><span class="n">set_bands</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;eV&#39;</span><span class="p">)</span>

<span class="n">bs</span><span class="o">.</span><span class="n">show_mpl</span><span class="p">()</span> <span class="c1"># to visualize the bands</span>
</pre></div>
</div>
<p>From now the band structure can be visualized. Last thing that we may want to
add is the array of kpoint labels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">labels</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;GAMMA&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">)]</span>

<span class="n">bs</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
<span class="n">bs</span><span class="o">.</span><span class="n">show_mpl</span><span class="p">()</span> <span class="c1"># to visualize the bands</span>
</pre></div>
</div>
<p>The resulting band structure will look as follows</p>
<div class="figure align-default">
<img alt="../_images/bands.png" src="../_images/bands.png" />
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Once the <code class="docutils literal notranslate"><span class="pre">bs</span></code> object is stored (<code class="docutils literal notranslate"><span class="pre">bs.store()</span></code>) – it won’t
accept any modifications.</p>
</div>
<div class="section" id="plotting-the-band-structure">
<h2>Plotting the band structure<a class="headerlink" href="#plotting-the-band-structure" title="Permalink to this headline">¶</a></h2>
<p>You may notice that depending on how you assign the kpoints labels the output
of the <code class="docutils literal notranslate"><span class="pre">show_mpl()</span></code> method looks different. Please compare:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bs</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;GAMMA&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">)]</span>
<span class="n">bs</span><span class="o">.</span><span class="n">show_mpl</span><span class="p">()</span>

<span class="n">bs</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;GAMMA&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">)]</span>
<span class="n">bs</span><span class="o">.</span><span class="n">show_mpl</span><span class="p">()</span>
</pre></div>
</div>
<p>In the first case two neighboring kpoints with <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code> labels will look like
<code class="docutils literal notranslate"><span class="pre">X|Y</span></code>, while in the second case they will be separated by a certain distance.
The logic behind such a difference is the following. In the first case the
plotting method discovers the two neighboring kpoints and assumes them to be a
discontinuity point in the band structure (e.g. Gamma-X|Y-U). In the second case the
kpoints labelled <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code> are not neighbors anymore, so they are
plotted with a certain distance between them. The intervals between the kpoints on the X axis are
proportional to the cartesian distance between them.</p>
</div>
<div class="section" id="dealing-with-spins">
<h2>Dealing with spins<a class="headerlink" href="#dealing-with-spins" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">BandsData</span></code> object can also deal with the results of spin-polarized calculations. Two
provide different bands for two different spins you should just merge them in
one array and import them again using the <code class="docutils literal notranslate"><span class="pre">set_bands()</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bands_spins</span> <span class="o">=</span> <span class="p">[</span><span class="n">bands</span><span class="p">,</span> <span class="n">bands</span><span class="o">-</span><span class="mf">0.3</span><span class="p">]</span> <span class="c1"># to distinguish the bands of different spins we substitute 0.3 from the second band structure</span>
<span class="n">bs</span><span class="o">.</span><span class="n">set_bands</span><span class="p">(</span><span class="n">bands_spins</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;eV&#39;</span><span class="p">)</span>
<span class="n">bs</span><span class="o">.</span><span class="n">show_mpl</span><span class="p">()</span>
</pre></div>
</div>
<p>Now the shape of the bands array becomes <code class="docutils literal notranslate"><span class="pre">nspins</span> <span class="pre">*</span> <span class="pre">nkpoints</span> <span class="pre">*</span> <span class="pre">nstates</span></code></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>