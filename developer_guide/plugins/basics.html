

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Basics &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/togglebutton.js"></script>
        <script src="../../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Basics</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developer_guide/plugins/basics.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basics">
<span id="plugin-development"></span><h1>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nomenclature">
<h2>Nomenclature<a class="headerlink" href="#nomenclature" title="Permalink to this headline">¶</a></h2>
<p>An AiiDA plugin is an extension of AiiDA, announcing itself to <code class="docutils literal notranslate"><span class="pre">aiida-core</span></code> by means of a new <a class="reference internal" href="entry_points.html#plugins-entry-points"><span class="std std-ref">entry point</span></a>.</p>
<p>AiiDA plugins can be bundled and distributed in a <a class="reference external" href="packages">python package</a> that provides a set of extensions to AiiDA.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The python community uses the term ‘package’ rather loosely.
Depending on context, it can refer to a collection of python modules or it may, in addition, include the files necessary for building and installing the package.</p>
</div>
</div>
<div class="section" id="what-a-plugin-can-do">
<h2>What a plugin can do<a class="headerlink" href="#what-a-plugin-can-do" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Add a new class to AiiDA’s <a class="reference internal" href="entry_points.html#plugins-aiida-entry-points"><span class="std std-ref">entry point groups</span></a>, including:: calculations, parsers, workflows, data types, verdi commands, schedulers, transports and importers/exporters from external databases.
This typically involves subclassing the respective base class AiiDA provides for that purpose.</p></li>
<li><p>Install new commandline and/or GUI executables</p></li>
<li><p>Depend on, and build on top of any number of other plugins (as long as their requirements do not clash)</p></li>
</ul>
</div>
<div class="section" id="what-a-plugin-should-not-do">
<span id="plugins-maynot"></span><h2>What a plugin should not do<a class="headerlink" href="#what-a-plugin-should-not-do" title="Permalink to this headline">¶</a></h2>
<p>An AiiDA plugin should not:</p>
<ul class="simple">
<li><p>Change the database schema AiiDA uses</p></li>
<li><p>Use protected functions, methods or classes of AiiDA (those starting with an underscore <code class="docutils literal notranslate"><span class="pre">_</span></code>)</p></li>
<li><p>Monkey patch anything within the <code class="docutils literal notranslate"><span class="pre">aiida</span></code> namespace (or the namespace itself)</p></li>
</ul>
<p>Failure to comply will likely prevent your plugin from being listed on the official <a class="reference external" href="registry">AiiDA plugin registry</a>.</p>
<p>If you find yourself tempted to do any of the above, please open an issue on the <a class="reference external" href="core">AiiDA repository</a> and explain why.
We will advise on how to proceed.</p>
</div>
<div class="section" id="design-guidelines">
<h2>Design guidelines<a class="headerlink" href="#design-guidelines" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wrapping-an-external-code">
<h3>Wrapping an external code<a class="headerlink" href="#wrapping-an-external-code" title="Permalink to this headline">¶</a></h3>
<p>In order to wrap an external simulation code for use in AiiDA, you will need to write a calculation input plugin (subclassing the <a class="reference internal" href="../../apidoc/aiida.engine.html#aiida.engine.CalcJob" title="aiida.engine.CalcJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalcJob</span></code></a> class) and an output parser plugin (subclassing the <a class="reference internal" href="../../apidoc/aiida.parsers.html#aiida.parsers.Parser" title="aiida.parsers.Parser"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code></a> class):</p>
<blockquote>
<div><ul>
<li><div class="line-block">
<div class="line"><strong>Start simple.</strong></div>
<div class="line">Make use of existing classes like <a class="reference internal" href="../../apidoc/aiida.orm.nodes.data.html#aiida.orm.nodes.data.dict.Dict" title="aiida.orm.nodes.data.dict.Dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>, <a class="reference internal" href="../../apidoc/aiida.orm.nodes.data.html#aiida.orm.nodes.data.singlefile.SinglefileData" title="aiida.orm.nodes.data.singlefile.SinglefileData"><code class="xref py py-class docutils literal notranslate"><span class="pre">SinglefileData</span></code></a>, …</div>
<div class="line">Write only what is necessary to pass information from and to AiiDA.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Don’t break data provenance.</strong></div>
<div class="line">Store <em>at least</em> what is needed for full reproducibility.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Parse what you want to query for.</strong></div>
<div class="line">Make a list of which information to:</div>
</div>
<blockquote>
<div><ol class="arabic simple">
<li><p>parse into the database for querying (<a class="reference internal" href="../../apidoc/aiida.orm.nodes.data.html#aiida.orm.nodes.data.dict.Dict" title="aiida.orm.nodes.data.dict.Dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>, …)</p></li>
<li><p>store in files for safe-keeping (<a class="reference internal" href="../../apidoc/aiida.orm.nodes.data.html#aiida.orm.nodes.data.singlefile.SinglefileData" title="aiida.orm.nodes.data.singlefile.SinglefileData"><code class="xref py py-class docutils literal notranslate"><span class="pre">SinglefileData</span></code></a>, …)</p></li>
<li><p>leave on the remote computer (<a class="reference internal" href="../../apidoc/aiida.orm.nodes.data.html#aiida.orm.nodes.data.remote.RemoteData" title="aiida.orm.nodes.data.remote.RemoteData"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteData</span></code></a>, …)</p></li>
</ol>
</div></blockquote>
</li>
<li><div class="line-block">
<div class="line"><strong>Expose the full functionality.</strong></div>
<div class="line">Standardization is good but don’t artificially limit the power of a code you are wrapping - or your users will get frustrated.</div>
<div class="line">If the code can do it, there should be <em>some</em> way to do it with your plugin.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Don’t rely on AiiDA internals.</strong></div>
<div class="line">AiiDA’s <a class="reference internal" href="../../working_with_aiida/python_api.html#python-api-public-list"><span class="std std-ref">public python API</span></a> includes anything that you can import via  <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">aiida.module</span> <span class="pre">import</span> <span class="pre">thing</span></code>.</div>
<div class="line">Functionality at deeper nesting levels is not considered part of the public API and may change between minor AiiDA releases, forcing you to update your plugin.</div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="folder-structure">
<h3>Folder structure<a class="headerlink" href="#folder-structure" title="Permalink to this headline">¶</a></h3>
<p>While it is up to you to decide the folder structure for your plugin, here is how a typical AiiDA plugin package may look like (see also the <a class="reference external" href="https://github.com/aiidateam/aiida-diff">aiida-diff</a> demo plugin):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aiida</span><span class="o">-</span><span class="n">mycode</span><span class="o">/</span>           <span class="o">-</span> <span class="n">distribution</span> <span class="n">folder</span>
   <span class="n">aiida_mycode</span><span class="o">/</span>        <span class="o">-</span> <span class="n">toplevel</span> <span class="n">package</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">aiida_mycode</span> <span class="kn">import</span> <span class="o">..</span><span class="p">)</span>
      <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
      <span class="n">calculations</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mycode</span><span class="o">.</span><span class="n">py</span>      <span class="o">-</span> <span class="n">contains</span> <span class="n">MycodeCalculation</span>
      <span class="n">parsers</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mycode</span><span class="o">.</span><span class="n">py</span>      <span class="o">-</span> <span class="n">contains</span> <span class="n">MycodeParser</span>
      <span class="n">data</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mydat</span><span class="o">.</span><span class="n">py</span>       <span class="o">-</span> <span class="n">contains</span> <span class="n">MyData</span> <span class="p">(</span><span class="n">supports</span> <span class="n">code</span> <span class="n">specific</span> <span class="nb">format</span><span class="p">)</span>
      <span class="n">commands</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mydat</span><span class="o">.</span><span class="n">py</span>       <span class="o">-</span> <span class="n">contains</span> <span class="n">visualization</span> <span class="n">subcommand</span> <span class="k">for</span> <span class="n">MyData</span>
      <span class="n">workflows</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mywf</span><span class="o">.</span><span class="n">py</span>        <span class="o">-</span> <span class="n">contains</span> <span class="n">a</span> <span class="n">basic</span> <span class="n">workflow</span> <span class="n">using</span> <span class="n">mycode</span>
      <span class="o">...</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">py</span>             <span class="o">-</span> <span class="n">install</span> <span class="n">script</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">json</span>           <span class="o">-</span> <span class="n">install</span> <span class="n">configuration</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>A minimal plugin package instead might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aiida</span><span class="o">-</span><span class="n">minimal</span><span class="o">/</span>
   <span class="n">aiida_minimal</span><span class="o">/</span>
      <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
      <span class="n">simpledata</span><span class="o">.</span><span class="n">py</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">py</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>