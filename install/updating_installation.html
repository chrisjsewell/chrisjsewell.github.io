

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Updating AiiDA &mdash; AiiDA 1.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/contentui.js"></script>
        <script >var togglebuttonSelector = '.toggle';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/about.html">What is AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/placeholder.html">Placeholder</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/placeholder.html">Placeholder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Updating AiiDA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/updating_installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="updating-aiida">
<span id="id1"></span><h1>Updating AiiDA<a class="headerlink" href="#updating-aiida" title="Permalink to this headline">¶</a></h1>
<div class="section" id="generic-update-instructions">
<span id="updating-instructions"></span><h2>Generic update instructions<a class="headerlink" href="#generic-update-instructions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Enter the python environment where AiiDA is installed</p></li>
<li><p>Finish all running calculations. After migrating your database, you will not be able to resume unfinished calculations. Data of finished calculations will of course be automatically migrated.</p></li>
<li><p>Stop the daemon using <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">daemon</span> <span class="pre">stop</span></code></p></li>
<li><p><a class="reference internal" href="../backup/index.html#backup"><span class="std std-ref">Create a backup of your database and repository</span></a></p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Once you have migrated your database, you can no longer go back to an older version of <code class="docutils literal notranslate"><span class="pre">aiida-core</span></code> (unless you restore your database and repository from a backup).</p>
</div>
<ol class="arabic" start="5">
<li><p>Update your <code class="docutils literal notranslate"><span class="pre">aiida-core</span></code> installation</p>
<blockquote>
<div><ul class="simple">
<li><p>If you have installed AiiDA through <code class="docutils literal notranslate"><span class="pre">pip</span></code> simply run: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">aiida-core</span></code></p></li>
<li><p>If you have installed from the git repository using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code>, first delete all the <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files (<code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">.</span> <span class="pre">-name</span> <span class="pre">&quot;*.pyc&quot;</span> <span class="pre">-delete</span></code>) before updating your branch.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Migrate your database with <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">-p</span> <span class="pre">&lt;profile_name&gt;</span> <span class="pre">database</span> <span class="pre">migrate</span></code>.
Depending on the size of your database and the number of migrations to perform, data migration can take time, so please be patient.</p></li>
</ol>
<p>After the database migration finishes, you will be able to continue working with your existing data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your update involved a change in the major version number of <code class="docutils literal notranslate"><span class="pre">aiida-core</span></code>, expect <a class="reference internal" href="#updating-backward-incompatible-changes"><span class="std std-ref">backwards incompatible changes</span></a> and check whether you also need to update your installed plugin packages.</p>
</div>
</div>
<div class="section" id="updating-from-0-12-to-1">
<h2>Updating from 0.12.* to 1.*<a class="headerlink" href="#updating-from-0-12-to-1" title="Permalink to this headline">¶</a></h2>
<p>Besides the generic update instructions, the following applies:</p>
<blockquote>
<div><ul class="simple">
<li><p>Finish all running legacy workflows.
The legacy workflows are completely deprecated and all data will be removed from your database, so make sure to create a backup (see point 5).</p></li>
<li><p>The upgrade involves several long-running migrations. Migrating databases containing millions of nodes can take a few hours.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="breaking-changes-from-0-12-to-1">
<span id="updating-backward-incompatible-changes"></span><h2>Breaking changes from 0.12.* to 1.*<a class="headerlink" href="#breaking-changes-from-0-12-to-1" title="Permalink to this headline">¶</a></h2>
<p>The following list covers the most important backward incompatible changes between <code class="docutils literal notranslate"><span class="pre">aiida-core==0.12.*</span></code> and <code class="docutils literal notranslate"><span class="pre">aiida-core==1.0.0</span></code>.</p>
<div class="section" id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Reorganization of some second-level modules. Various classes and functions have been moved, renamed or replaced. See <a class="reference internal" href="../working_with_aiida/python_api.html#python-api-public-list"><span class="std std-ref">this page</span></a> for the rules on the publicness of parts of the python API <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2357">[#2357]</a></p></li>
<li><p>The module <code class="docutils literal notranslate"><span class="pre">aiida.work</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">aiida.engine</span></code> and reorganized significantly <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2524">[#2524]</a></p></li>
<li><p>The module <code class="docutils literal notranslate"><span class="pre">aiida.scheduler</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">aiida.schedulers</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2498">[#2498]</a></p></li>
<li><p>The module <code class="docutils literal notranslate"><span class="pre">aiida.transport</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">aiida.transports</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2498">[#2498]</a></p></li>
<li><p>The module <code class="docutils literal notranslate"><span class="pre">aiida.utils</span></code> has been removed and its contents have been placed in other places where appropriate <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2357">[#2357]</a></p></li>
<li><p>Requirements were moved from <code class="docutils literal notranslate"><span class="pre">setup_requirements.py</span></code> to <code class="docutils literal notranslate"><span class="pre">setup.json</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2307">[#2307]</a></p></li>
</ul>
</div>
<div class="section" id="orm">
<h3>ORM<a class="headerlink" href="#orm" title="Permalink to this headline">¶</a></h3>
<p>In order to define a clearer interface for users to the AiiDA entities, and allow (in the future) to swap between different profiles, the underlying hierarchy of nodes and links has been reworked (and a new paradigm has been implemented, with a “frontend” class that all users will interact with, and a “backend” class that users should never use directly, that implements the interaction to the database with a common interface, independent of the underlying ORM).
The reorganisation of nodes and linktypes is mostly invisible to the user, but existing import statements will need to be updated.</p>
<ul>
<li><p>Refactoring the ORM <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2190">[#2190]</a><a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2210">[#2210]</a><a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2227">[#2227]</a><a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2225">[#2225]</a><a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/#2481">[#2481]</a><a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2544">[#2544]</a></p></li>
<li><p>Renamed the node classes for the various process types</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WorkCalculation</span></code> to <code class="docutils literal notranslate"><span class="pre">WorkChainNode</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2192">[#2192]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FunctionCalculation</span></code> to <code class="docutils literal notranslate"><span class="pre">WorkFunctionNode</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2189">[#2189]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JobCalculation</span></code> to <code class="docutils literal notranslate"><span class="pre">CalcJobNode</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2184">[#2184]</a> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2201">[#2201]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InlineCalculation</span></code> to <code class="docutils literal notranslate"><span class="pre">CalcFunctionNode</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2195">[#2195]</a></p></li>
<li><p>Reorganization of the <code class="docutils literal notranslate"><span class="pre">aiida.orm</span></code> module, all node sub classes are now located under <code class="docutils literal notranslate"><span class="pre">aiida.orm.nodes</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2402">[#2402]</a><a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2497">[#2497]</a></p></li>
<li><p>Make <code class="docutils literal notranslate"><span class="pre">Code</span></code> a real sub class of <code class="docutils literal notranslate"><span class="pre">Data</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2193">[#2193]</a></p></li>
<li><p>Implement new link types <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2220">[#2220]</a></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CREATE</span></code>: <code class="docutils literal notranslate"><span class="pre">CalculationNode</span> <span class="pre">-&gt;</span> <span class="pre">Data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RETURN</span></code>: <code class="docutils literal notranslate"><span class="pre">WorkflowNode</span> <span class="pre">-&gt;</span> <span class="pre">Data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INPUT_CALC</span></code>: <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">-&gt;</span> <span class="pre">CalculationNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INPUT_WORK</span></code>: <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">-&gt;</span> <span class="pre">WorkflowNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CALL_CALC</span></code>: <code class="docutils literal notranslate"><span class="pre">WorkflowNode</span> <span class="pre">-&gt;</span> <span class="pre">CalculationNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CALL_WORK</span></code>: <code class="docutils literal notranslate"><span class="pre">WorkflowNode</span> <span class="pre">-&gt;</span> <span class="pre">WorkflowNode</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Moved the plugin factories to <code class="docutils literal notranslate"><span class="pre">aiida.plugins.factories</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2498">[#2498]</a></p></li>
<li><p>Methods that operated on the repository of a <code class="docutils literal notranslate"><span class="pre">Node</span></code> instance have been moved to a <code class="docutils literal notranslate"><span class="pre">Repository</span></code> utility that is exposed through the <code class="docutils literal notranslate"><span class="pre">Node.repository</span></code> property <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2506">[#2506]</a></p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">Error</span></code> data sub class and its entry point <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2529">[#2529]</a></p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">FrozenDict</span></code> data sub class and its entry point <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2532">[#2532]</a></p></li>
<li><p>Renamed the <code class="docutils literal notranslate"><span class="pre">ParameterData</span></code> data sub class to <code class="docutils literal notranslate"><span class="pre">Dict</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2517">[#2517]</a></p></li>
</ul>
</div>
<div class="section" id="querybuilder">
<h3><code class="docutils literal notranslate"><span class="pre">QueryBuilder</span></code><a class="headerlink" href="#querybuilder" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Changed relationship indicator keywords, e.g. <code class="docutils literal notranslate"><span class="pre">input_of</span></code> is now <code class="docutils literal notranslate"><span class="pre">with_outgoing</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2224">[#2224]</a><a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2278">[#2278]</a></p></li>
<li><p>Changed type of UUIDs returned by the <code class="docutils literal notranslate"><span class="pre">QueryBuilder</span></code> to always be of type unicode <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2259">[#2259]</a></p></li>
</ul>
</div>
<div class="section" id="group">
<h3><code class="docutils literal notranslate"><span class="pre">Group</span></code><a class="headerlink" href="#group" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Change group type strings <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2329">[#2329]</a></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data.upf.family</span></code> to <code class="docutils literal notranslate"><span class="pre">data.upf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aiida.import</span></code> to <code class="docutils literal notranslate"><span class="pre">auto.import</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">autogroup.run</span></code> to <code class="docutils literal notranslate"><span class="pre">auto.run</span></code></p></li>
<li><p>custom ones to <code class="docutils literal notranslate"><span class="pre">user</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">Group.query</span></code> and <code class="docutils literal notranslate"><span class="pre">Group.group_query</span></code> methods have been removed <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2329">[#2329]</a></p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">type</span></code> column of <code class="docutils literal notranslate"><span class="pre">Group</span></code> database model to <code class="docutils literal notranslate"><span class="pre">type_string</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2329">[#2329]</a></p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">name</span></code> column of <code class="docutils literal notranslate"><span class="pre">Group</span></code> database model to <code class="docutils literal notranslate"><span class="pre">label</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2329">[#2329]</a></p></li>
<li><p>Class method <code class="docutils literal notranslate"><span class="pre">Group.get_or_create</span></code> has been removed, use the collection method <code class="docutils literal notranslate"><span class="pre">Group.objects.get_or_create</span></code> instead</p></li>
<li><p>Class method <code class="docutils literal notranslate"><span class="pre">Group.get_from_string</span></code> has been removed, use the class method <code class="docutils literal notranslate"><span class="pre">Group.get</span></code> instead</p></li>
</ul>
</div>
<div class="section" id="node">
<h3><code class="docutils literal notranslate"><span class="pre">Node</span></code><a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The column <code class="docutils literal notranslate"><span class="pre">type</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">node_type</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2522">[#2522]</a></p></li>
<li><p>The methods <code class="docutils literal notranslate"><span class="pre">get_inputs</span></code>, <code class="docutils literal notranslate"><span class="pre">get_outputs</span></code>, <code class="docutils literal notranslate"><span class="pre">get_inputs_dict</span></code> and <code class="docutils literal notranslate"><span class="pre">get_outputs_dict</span></code> have been removed and replace by <code class="docutils literal notranslate"><span class="pre">get_incoming</span></code> and <code class="docutils literal notranslate"><span class="pre">get_outgoing</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2236">[#2236]</a></p></li>
<li><p>Removed the link manager methods <code class="docutils literal notranslate"><span class="pre">Node.inp</span></code> and <code class="docutils literal notranslate"><span class="pre">Node.out</span></code> and the functionality has partially been replaced by: <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2569">[#2569]</a></p>
<ul>
<li><p>The link manager properties <code class="docutils literal notranslate"><span class="pre">inputs</span></code> and <code class="docutils literal notranslate"><span class="pre">outputs</span></code> for the <code class="docutils literal notranslate"><span class="pre">CalculationNode</span></code> and <code class="docutils literal notranslate"><span class="pre">WorkflowNode</span></code> classes.</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">Data.creator</span></code> property</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">ProcessNode.caller</span></code> property</p></li>
<li><p>Functionality to traverse the graph with tab completion when there is no uniqueness on the label is no longer supported and <code class="docutils literal notranslate"><span class="pre">get_incoming</span></code> and <code class="docutils literal notranslate"><span class="pre">get_outgoing</span></code> should be used instead.</p></li>
</ul>
</li>
<li><p>The classes <code class="docutils literal notranslate"><span class="pre">Node</span></code>, <code class="docutils literal notranslate"><span class="pre">ProcessNode</span></code> can no longer be stored but only their sub classes <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2301">[#2301]</a></p></li>
</ul>
</div>
<div class="section" id="data">
<h3><code class="docutils literal notranslate"><span class="pre">Data</span></code><a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Kind.is_alloy()</span></code> has been changed to a property <code class="docutils literal notranslate"><span class="pre">Kind.is_alloy</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2374">[#2374]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Kind.has_vacancies()</span></code> has been changed to a property <code class="docutils literal notranslate"><span class="pre">Kind.has_vacancies</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2374">[#2374]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StructureData.is_alloy()</span></code> has been changed to a property <code class="docutils literal notranslate"><span class="pre">StructureData.is_alloy</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2374">[#2374]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StructureData.has_vacancies()</span></code> has been changed to a property <code class="docutils literal notranslate"><span class="pre">StructureData.has_vacancies</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2374">[#2374]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CifData._get_aiida_structure()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">CifData.get_structure()</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CifData</span></code> default library used in <code class="docutils literal notranslate"><span class="pre">get_structure</span></code> to convert to <code class="docutils literal notranslate"><span class="pre">StructureData</span></code> has been changed from <code class="docutils literal notranslate"><span class="pre">ase</span></code> to <code class="docutils literal notranslate"><span class="pre">pymatgen</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1257">[#1257]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SinglefileData</span></code> the methods <code class="docutils literal notranslate"><span class="pre">get_file_content</span></code>, <code class="docutils literal notranslate"><span class="pre">add_path</span></code> and <code class="docutils literal notranslate"><span class="pre">remove_path</span></code> have been removed in favor of <code class="docutils literal notranslate"><span class="pre">put_object_from_file</span></code> and <code class="docutils literal notranslate"><span class="pre">get_content</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2506">[#2506]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ArrayData.iterarrays()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">ArrayData.get_iterarrays()</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrajectoryData._get_cif()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">TrajectoryData.get_cif()</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrajectoryData._get_aiida_structure()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">TrajectoryData.get_structure()</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StructureData._get_cif()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">StructureData.get_cif()</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Code.full_text_info()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">Code.get_full_text_info()</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Code.is_hidden()</span></code> has been renamed and changed to <code class="docutils literal notranslate"><span class="pre">Code.hidden</span></code> property. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RemoteData.is_empty()</span></code> has been changed to a property <code class="docutils literal notranslate"><span class="pre">RemoteData.is_empty</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p>The arguments <code class="docutils literal notranslate"><span class="pre">stepids</span></code> and <code class="docutils literal notranslate"><span class="pre">cells</span></code> of the <code class="docutils literal notranslate"><span class="pre">TrajectoryData.set_trajectory()</span></code> method are made optional which has implications on the ordering of the arguments passed to this method. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p>The list of atomic symbols for <code class="docutils literal notranslate"><span class="pre">TrajectoryData</span></code> is no longer stored as array data but is now accessible through the <code class="docutils literal notranslate"><span class="pre">TrajectoryData.symbols</span></code> attribute. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2422">[#2422]</a></p></li>
<li><p>Removed deprecated methods <code class="docutils literal notranslate"><span class="pre">BandsData._prepare_dat_1</span></code> and <code class="docutils literal notranslate"><span class="pre">BandsData._prepare_dat_2</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed deprecated method <cite>KpoinstData.bravais_lattice</cite> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed deprecated method <cite>KpoinstData._set_bravais_lattice</cite> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed deprecated method <cite>KpoinstData._get_or_create_bravais_lattice</cite> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed deprecated method <cite>KpoinstData.set_kpoints_path</cite> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed deprecated method <cite>KpoinstData._find_bravais_info</cite> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed deprecated method <cite>KpoinstData.find_bravais_lattice</cite> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed deprecated method <cite>KpoinstData.get_special_kpoints</cite> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
</ul>
</div>
<div class="section" id="process">
<h3><code class="docutils literal notranslate"><span class="pre">Process</span></code><a class="headerlink" href="#process" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Metadata inputs that used to start with an underscore (<code class="docutils literal notranslate"><span class="pre">_label</span></code>, <code class="docutils literal notranslate"><span class="pre">_description</span></code> and <code class="docutils literal notranslate"><span class="pre">_options</span></code>) no longer use an underscore and have moved within the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> namespace <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1105">[#1105]</a></p></li>
<li><p>Non-storable input ports are now markable as such through the <code class="docutils literal notranslate"><span class="pre">non_db</span></code> keyword <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1105">[#1105]</a></p></li>
</ul>
</div>
<div class="section" id="inline-calculations">
<h3>Inline calculations<a class="headerlink" href="#inline-calculations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">make_inline</span></code> and <code class="docutils literal notranslate"><span class="pre">optional_inline</span></code> decorators have been replaced by <code class="docutils literal notranslate"><span class="pre">calcfunction</span></code>. <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2203">[#2203]</a></p></li>
</ul>
</div>
<div class="section" id="jobcalculation">
<h3><code class="docutils literal notranslate"><span class="pre">JobCalculation</span></code><a class="headerlink" href="#jobcalculation" title="Permalink to this headline">¶</a></h3>
<p>In the new engine, it is not possible to launch calculation jobs by first creating an instance of the Calculation and then calling the <code class="docutils literal notranslate"><span class="pre">calculation.use_xxx</span></code> methods, as it was common in early versions of AiiDA.
Instead, you need to pass the correct Calculation class to the <code class="docutils literal notranslate"><span class="pre">run</span></code> or <code class="docutils literal notranslate"><span class="pre">submit</span></code> function, passing the nodes to link as input as <code class="docutils literal notranslate"><span class="pre">kwargs</span></code>.
For the past few versions, we have kept back-compatibility by supporting both ways of submitting. In version 1.0 we have decided to keep only one single way of submitting calculations for simplicity.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JobCalculation</span></code> has been replaced by <code class="docutils literal notranslate"><span class="pre">CalcJob</span></code> process class <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2389">[#2389]</a></p></li>
<li><p>Custom methods on the node class should now be implemented through a <code class="docutils literal notranslate"><span class="pre">CalculationTools</span></code> plugin <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2331">[#2331]</a></p></li>
<li><p>Explicit <code class="docutils literal notranslate"><span class="pre">set_</span></code> methods of the <code class="docutils literal notranslate"><span class="pre">JobCalculation</span></code> have been replaced with generic <code class="docutils literal notranslate"><span class="pre">set_option</span></code> method <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2361">[#2361]</a></p></li>
<li><p>Explicit <code class="docutils literal notranslate"><span class="pre">get_</span></code> methods of the <code class="docutils literal notranslate"><span class="pre">JobCalculation</span></code> have been replaced with generic <code class="docutils literal notranslate"><span class="pre">get_option</span></code> method <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1961">[#1961]</a></p></li>
<li><p>New calculation job states have been introduced set as an attribute, only to be used for querying <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2389">[#2389]</a></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DbCalcState</span></code> table that recorded the old job state of <code class="docutils literal notranslate"><span class="pre">JobCalculations</span></code> has been removed <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2389">[#2389]</a></p></li>
</ul>
</div>
<div class="section" id="parser">
<h3><code class="docutils literal notranslate"><span class="pre">Parser</span></code><a class="headerlink" href="#parser" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parse_from_retrieved</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">parse</span></code>. In addition the arguments and return signatures have changed, for details see the PR <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2397">[#2397]</a></p></li>
</ul>
</div>
<div class="section" id="workchain">
<h3><code class="docutils literal notranslate"><span class="pre">WorkChain</span></code><a class="headerlink" href="#workchain" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The free function <code class="docutils literal notranslate"><span class="pre">submit</span></code> in any <code class="docutils literal notranslate"><span class="pre">WorkChain</span></code> should be replaced with <code class="docutils literal notranslate"><span class="pre">self.submit</span></code>.</p></li>
<li><p>The future returned by <code class="docutils literal notranslate"><span class="pre">submit</span></code> no longer has the <code class="docutils literal notranslate"><span class="pre">pid</span></code> attribute but rather <code class="docutils literal notranslate"><span class="pre">pk</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">workfunction</span></code> decorator can only be used for functions that return one of the inputs they receive, for all other use the <code class="docutils literal notranslate"><span class="pre">calcfunction</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">get_inputs_template</span> <span class="pre">class</span></code> method has been replaced by <code class="docutils literal notranslate"><span class="pre">get_builder</span></code>. See the <a class="reference external" href="https://aiida-core.readthedocs.io/en/latest/concepts/processes.html#the-process-builder">section on the process builder in the documentation</a> on how to use it.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">input_group</span></code> has been deprecated and been replaced by namespaces. See the <a class="reference external" href="https://aiida-core.readthedocs.io/en/latest/concepts/workflows.html#ports-and-portnamespaces">section on ports in the documentation</a> on how to use them.</p></li>
<li><p>The use of a <code class="docutils literal notranslate"><span class="pre">.</span></code> (period) in output keys is not supported in <code class="docutils literal notranslate"><span class="pre">Process.out</span></code> because that is now reserved to indicate namespaces.</p></li>
</ul>
</div>
<div class="section" id="legacy-workflows">
<h3>Legacy workflows<a class="headerlink" href="#legacy-workflows" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Remove implementation of legacy workflows <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2379">[#2379]</a></p></li>
</ul>
</div>
<div class="section" id="verdi">
<h3><code class="docutils literal notranslate"><span class="pre">verdi</span></code><a class="headerlink" href="#verdi" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">verdi</span></code> command line interface has been migrated over to a new system (called <code class="docutils literal notranslate"><span class="pre">click</span></code>), making the interface of all <code class="docutils literal notranslate"><span class="pre">verdi</span></code> commands consistent: now the way to specify a node (via a PK, a UUID or a LABEL) is the same for all commands, and command-line options that have the same meaning use the same flags in all commands.
To make this possible, the interface of various verdi commands has been changed to ensure consistency.
Also the output of most commands has been homogenised (e.g. to print errors or warnings always in the same style).
Moreover, some of the commands have been renamed to be consistent with the new names of the classes in AiiDA.</p>
<ul class="simple">
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">data</span> <span class="pre">plugins</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">plugin</span> <span class="pre">list</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">code</span> <span class="pre">rename</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">code</span> <span class="pre">relabel</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">code</span> <span class="pre">update</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">code</span> <span class="pre">duplicate</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/3114">[#3114]</a></p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">work</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">process</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2574">[#2574]</a></p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">calculation</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">process</span></code> and <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">calcjob</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2574">[#2574]</a></p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">workflows</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2379">[#2379]</a></p></li>
<li><p>Deprecated the commands to set and get config options <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">devel</span> <span class="pre">*property*</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">config</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2354">[#2354]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">code</span> <span class="pre">show</span></code> no longer shows number of calculations by default to improve performance, with <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> flag to restore old behavior <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1428">[#1428]</a></p></li>
<li><p>The tab-completion activation for <code class="docutils literal notranslate"><span class="pre">verdi</span></code> has changed, simply replace the <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">&quot;$(verdi</span> <span class="pre">completioncommand)&quot;</span></code> line in your activation script with <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">&quot;$(_VERDI_COMPLETE-source</span> <span class="pre">verdi)&quot;</span></code></p></li>
</ul>
</div>
<div class="section" id="daemon">
<h3>Daemon<a class="headerlink" href="#daemon" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Each profile now has its own daemon that can be run completely independently in parallel, so <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">daemon</span> <span class="pre">configureuser</span></code> has been removed <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1217">[#1217]</a></p></li>
<li><p>Replaced <code class="docutils literal notranslate"><span class="pre">Celery</span></code> with <code class="docutils literal notranslate"><span class="pre">Circus</span></code> as the daemonizer of the daemon <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1213">[#1213]</a></p></li>
</ul>
</div>
<div class="section" id="schedulers">
<h3>Schedulers<a class="headerlink" href="#schedulers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">aiida.daemon.execmanager.job_states</span></code> to <code class="docutils literal notranslate"><span class="pre">JOB_STATES</span></code>, conforming to python conventions <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/1799">[#1799]</a></p></li>
<li><p>Abstract method <code class="docutils literal notranslate"><span class="pre">aiida.scheduler.Scheduler._get_detailed_jobinfo_command()</span></code> raises <code class="docutils literal notranslate"><span class="pre">aiida.common.exceptions.FeatureNotAvailable</span></code> (was <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code>).</p></li>
<li><p>Moved the <code class="docutils literal notranslate"><span class="pre">SchedulerFactory</span></code> to <code class="docutils literal notranslate"><span class="pre">aiida.plugins.factories</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2498">[#2498]</a></p></li>
</ul>
</div>
<div class="section" id="transports">
<h3>Transports<a class="headerlink" href="#transports" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Moved the <code class="docutils literal notranslate"><span class="pre">TransportFactory</span></code> to <code class="docutils literal notranslate"><span class="pre">aiida.plugins.factories</span></code> <a class="reference external" href="https://github.com/aiidateam/aiida-core/pull/2498">[#2498]</a></p></li>
</ul>
</div>
<div class="section" id="export-import">
<h3>Export import<a class="headerlink" href="#export-import" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>New export archive format introduced <code class="docutils literal notranslate"><span class="pre">v0.6</span></code>. Older archives will automatically be converted when using <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">import</span></code>, or alternatively can be manually exported using <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">export</span> <span class="pre">migrate</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="older-versions">
<span id="update-older-versions"></span><h2>Older versions<a class="headerlink" href="#older-versions" title="Permalink to this headline">¶</a></h2>
<p>To determine the current version of your installation use <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">--version</span></code>.
If the command does not exist, you have an older version of AiiDA, in which case you need to get it from the <code class="docutils literal notranslate"><span class="pre">aiida.__init__.py</span></code> file.
Update instructions for older versions can be found in the documentation of the corresponding version:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://aiida-core.readthedocs.io/en/v0.12.2/installation/updating.html#updating-from-0-11-to-0-12-0">0.11.*</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.10.0/installation/updating.html#updating-from-0-9-to-0-10-0">0.10.*</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.10.0/installation/updating.html#updating-from-0-9-to-0-10-0">0.9.*</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.9.1/installation/index.html#updating-from-0-8-django-to-0-9-0-django">0.8.* Django</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.8.1/installation/index.html#updating-from-0-7-0-django-to-0-8-0-django">0.7.* Django</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.7.0/installation.html#updating-from-0-6-0-django-to-0-7-0-django">0.6.* Django</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.7.0/installation.html#updating-from-0-6-0-django-to-0-7-0-sqlalchemy">0.6.* SqlAlchemy</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.7.0/installation.html#updating-from-0-5-0-to-0-6-0">0.5.* Django</a></p></li>
<li><p><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.5.0/installation.html#updating-from-0-4-1-to-0-5-0">0.4.* Django</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>